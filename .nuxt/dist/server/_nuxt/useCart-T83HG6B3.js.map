{"version":3,"file":"useCart-T83HG6B3.js","sources":["../../../../composables/useCart.ts"],"sourcesContent":["import type { Product } from '@/types/product'\n\ntype CartItem = Product & { quantity: number }\n\ntype CartState = {\n  items: CartItem[]\n}\n\nexport const useCart = () => {\n  const state = useState<CartState>('cart', () => ({ items: [] }))\n  const notifications = useNotifications()\n\n  const totalItems = computed(() => state.value.items.reduce((count, item) => count + item.quantity, 0))\n\n  const subtotal = computed(() =>\n    state.value.items.reduce((sum, item) => sum + item.quantity * item.price, 0)\n  )\n\n  const addItem = (product: Product, quantity = 1) => {\n    const existingItem = state.value.items.find((item) => item.id === product.id)\n\n    if (existingItem) {\n      existingItem.quantity += quantity\n    } else {\n      state.value.items.push({ ...product, quantity })\n    }\n\n    notifications.show({\n      title: 'Added to cart',\n      message: `${product.name} has been added to your cart.`,\n      type: 'cart'\n    })\n  }\n\n  const removeItem = (productId: number) => {\n    state.value.items = state.value.items.filter((item) => item.id !== productId)\n  }\n\n  const updateQuantity = (productId: number, quantity: number) => {\n    const item = state.value.items.find((product) => product.id === productId)\n    if (!item) return\n    if (quantity <= 0) {\n      removeItem(productId)\n      return\n    }\n    item.quantity = quantity\n  }\n\n  const clear = () => {\n    state.value.items = []\n  }\n\n  return {\n    state,\n    items: computed(() => state.value.items),\n    totalItems,\n    subtotal,\n    addItem,\n    removeItem,\n    updateQuantity,\n    clear\n  }\n}\n"],"names":[],"mappings":";;AAQO,MAAM,UAAU,MAAM;AAC3B,QAAM,QAAQ,SAAoB,QAAQ,OAAO,EAAE,OAAO,CAAA,IAAK;AAC/D,QAAM,gBAAgB,iBAAA;AAEtB,QAAM,aAAa,SAAS,MAAM,MAAM,MAAM,MAAM,OAAO,CAAC,OAAO,SAAS,QAAQ,KAAK,UAAU,CAAC,CAAC;AAErG,QAAM,WAAW;AAAA,IAAS,MACxB,MAAM,MAAM,MAAM,OAAO,CAAC,KAAK,SAAS,MAAM,KAAK,WAAW,KAAK,OAAO,CAAC;AAAA,EAAA;AAG7E,QAAM,UAAU,CAAC,SAAkB,WAAW,MAAM;AAClD,UAAM,eAAe,MAAM,MAAM,MAAM,KAAK,CAAC,SAAS,KAAK,OAAO,QAAQ,EAAE;AAE5E,QAAI,cAAc;AAChB,mBAAa,YAAY;AAAA,IAC3B,OAAO;AACL,YAAM,MAAM,MAAM,KAAK,EAAE,GAAG,SAAS,UAAU;AAAA,IACjD;AAEA,kBAAc,KAAK;AAAA,MACjB,OAAO;AAAA,MACP,SAAS,GAAG,QAAQ,IAAI;AAAA,MACxB,MAAM;AAAA,IAAA,CACP;AAAA,EACH;AAEA,QAAM,aAAa,CAAC,cAAsB;AACxC,UAAM,MAAM,QAAQ,MAAM,MAAM,MAAM,OAAO,CAAC,SAAS,KAAK,OAAO,SAAS;AAAA,EAC9E;AAEA,QAAM,iBAAiB,CAAC,WAAmB,aAAqB;AAC9D,UAAM,OAAO,MAAM,MAAM,MAAM,KAAK,CAAC,YAAY,QAAQ,OAAO,SAAS;AACzE,QAAI,CAAC,KAAM;AACX,QAAI,YAAY,GAAG;AACjB,iBAAW,SAAS;AACpB;AAAA,IACF;AACA,SAAK,WAAW;AAAA,EAClB;AAEA,QAAM,QAAQ,MAAM;AAClB,UAAM,MAAM,QAAQ,CAAA;AAAA,EACtB;AAEA,SAAO;AAAA,IACL;AAAA,IACA,OAAO,SAAS,MAAM,MAAM,MAAM,KAAK;AAAA,IACvC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;"}