/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 17:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.BucketingSdkManager=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _types=__webpack_require__(3957);var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var _Troubleshooting=__webpack_require__(6360);var BucketingSdkManager=exports.BucketingSdkManager=function(){function BucketingSdkManager(_ref){var httpClient=_ref.httpClient,sdkConfig=_ref.sdkConfig,trackingManager=_ref.trackingManager,flagshipInstanceId=_ref.flagshipInstanceId;(0,_classCallCheck2.default)(this,BucketingSdkManager);this._httpClient=httpClient;this._config=sdkConfig;this._trackingManager=trackingManager;this._bucketingContent=sdkConfig.initialBucketing;this._flagshipInstanceId=flagshipInstanceId;this._lastModified='';}return(0,_createClass2.default)(BucketingSdkManager,[{key:"resetSdk",value:function resetSdk(){if(this._intervalID){clearInterval(this._intervalID);}this._isPooling=false;this._intervalID=undefined;this._lastModified='';this._bucketingContent=undefined;this._EAIConfig=undefined;(0,_utils.logInfo)(this._config,_index.BUCKETING_POOLING_STOPPED,_index.PROCESS_BUCKETING);}},{key:"getBucketingContent",value:function getBucketingContent(){return this._bucketingContent;}},{key:"initSdk",value:function(){var _initSdk=(0,_asyncToGenerator2.default)(function*(){var _this=this;var timeout=this._config.pollingInterval*1000;yield this.fetchBucketingFile();if(timeout===0){return;}(0,_utils.logInfo)(this._config,_index.BUCKETING_POOLING_STARTED,_index.PROCESS_BUCKETING);this._intervalID=setInterval(function(){_this.fetchBucketingFile();},timeout);});function initSdk(){return _initSdk.apply(this,arguments);}return initSdk;}()},{key:"getEAIConfig",value:function getEAIConfig(){return this._EAIConfig;}},{key:"sendTroubleshooting",value:function sendTroubleshooting(headers,url,response,now){var troubleshootingHit=new _Troubleshooting.Troubleshooting({visitorId:this._flagshipInstanceId,flagshipInstanceId:this._flagshipInstanceId,label:_types.TroubleshootingLabel.SDK_BUCKETING_FILE,traffic:0,logLevel:_index.LogLevel.INFO,config:this._config,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:response==null?void 0:response.body,httpResponseHeaders:response==null?void 0:response.headers,httpResponseCode:response==null?void 0:response.status,httpResponseTime:Date.now()-now});this._trackingManager.initTroubleshootingHit=troubleshootingHit;}},{key:"sendErrorTroubleshooting",value:function sendErrorTroubleshooting(headers,url,error,now){var troubleshootingHit=new _Troubleshooting.Troubleshooting({visitorId:this._flagshipInstanceId,flagshipInstanceId:this._flagshipInstanceId,label:_types.TroubleshootingLabel.SDK_BUCKETING_FILE_ERROR,traffic:0,logLevel:_index.LogLevel.INFO,config:this._config,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now});this._trackingManager.initTroubleshootingHit=troubleshootingHit;}},{key:"handlePollingResponse",value:function handlePollingResponse(params){var _response$headers;var response=params.response;if(response.status===200){var _this$_bucketingConte,_this$_bucketingConte2;(0,_utils.logDebugSprintf)(this._config,_index.PROCESS_BUCKETING,_index.POLLING_EVENT_200,response.body);this._bucketingContent=response.body;this._lastBucketingTimestamp=new Date().toISOString();this._EAIConfig={eaiCollectEnabled:!!((_this$_bucketingConte=this._bucketingContent)!=null&&(_this$_bucketingConte=_this$_bucketingConte.accountSettings)!=null&&_this$_bucketingConte.eaiActivationEnabled),eaiActivationEnabled:!!((_this$_bucketingConte2=this._bucketingContent)!=null&&(_this$_bucketingConte2=_this$_bucketingConte2.accountSettings)!=null&&_this$_bucketingConte2.eaiCollectEnabled)};this.sendTroubleshooting(params.headers,params.url,response,params.now);}else if(response.status===304){(0,_utils.logDebug)(this._config,_index.POLLING_EVENT_300,_index.PROCESS_BUCKETING);}var lastModified=response==null||(_response$headers=response.headers)==null?void 0:_response$headers['last-modified'];if(lastModified){if(this._lastModified!==lastModified&&this._config.onBucketingUpdated){this._config.onBucketingUpdated(new Date(lastModified));}this._lastModified=lastModified;}this._isPooling=false;}},{key:"fetchBucketingFile",value:function(){var _fetchBucketingFile=(0,_asyncToGenerator2.default)(function*(){if(this._isPooling){return;}this._isPooling=true;var url=(0,_utils.sprintf)(_index.BUCKETING_API_URL,this._config.envId);var headers=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.HEADER_X_SDK_CLIENT,_index.SDK_INFO.name),_index.HEADER_X_SDK_VERSION,_index.SDK_INFO.version),_index.HEADER_CONTENT_TYPE,_index.HEADER_APPLICATION_JSON);var now=Date.now();try{if(this._lastModified){headers['if-modified-since']=this._lastModified;}var response=yield this._httpClient.getAsync(url,{headers:headers,timeout:this._config.timeout,nextFetchConfig:this._config.nextFetchConfig});this.handlePollingResponse({response:response,headers:headers,url:url,now:now});}catch(error){this._isPooling=false;(0,_utils.logError)(this._config,(0,_utils.errorFormat)(_index.POLLING_EVENT_FAILED,{url:url,headers:headers,error:error,nextFetchConfig:this._config.nextFetchConfig,method:'GET',duration:Date.now()-now}),_index.PROCESS_BUCKETING);this.sendErrorTroubleshooting(headers,url,error,now);}});function fetchBucketingFile(){return _fetchBucketingFile.apply(this,arguments);}return fetchBucketingFile;}()}]);}();

/***/ }),

/***/ 210:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.ERROR_MESSAGE=exports.Batch=exports.BATCH=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var BATCH=exports.BATCH='BATCH';var ERROR_MESSAGE=exports.ERROR_MESSAGE='Please check required fields';var Batch=exports.Batch=function(_HitAbstract){function Batch(params){var _this;(0,_classCallCheck2.default)(this,Batch);_this=_callSuper(this,Batch,[Object.assign({},params,{visitorId:'',anonymousId:'',type:BATCH})]);_this.hits=params.hits;return _this;}(0,_inherits2.default)(Batch,_HitAbstract);return(0,_createClass2.default)(Batch,[{key:"hits",get:function get(){return this._hits;},set:function set(v){this._hits=v;}},{key:"isReady",value:function isReady(){return!!(_superPropGet(Batch,"isReady",this,3)([])&&this.hits&&this.hits.length>0&&this.hits.every(function(hit){return hit.isReady(false);}));}},{key:"toApiKeys",value:function toApiKeys(){var _this$config;var apiKeys=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_FlagshipConstant.DS_API_ITEM,this.ds),_FlagshipConstant.CUSTOMER_ENV_ID_API_ITEM,`${(_this$config=this.config)==null?void 0:_this$config.envId}`),_FlagshipConstant.T_API_ITEM,this.type),_FlagshipConstant.QT_API_ITEM,Date.now()-this.createdAt);apiKeys.h=this.hits.map(function(hit){var hitKeys=hit.toApiKeys();delete hitKeys[_FlagshipConstant.DS_API_ITEM];delete hitKeys[_FlagshipConstant.CUSTOMER_ENV_ID_API_ITEM];return hitKeys;});return apiKeys;}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 234:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.BatchingContinuousCachingStrategy=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _BatchTriggeredBy=__webpack_require__(594);var _index=__webpack_require__(3664);var _ActivateBatch=__webpack_require__(3401);var _utils=__webpack_require__(9647);var _BatchingCachingStrategyAbstract=__webpack_require__(7001);var _types=__webpack_require__(3957);var _Troubleshooting=__webpack_require__(6360);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var BatchingContinuousCachingStrategy=exports.BatchingContinuousCachingStrategy=function(_BatchingCachingStrat){function BatchingContinuousCachingStrategy(){(0,_classCallCheck2.default)(this,BatchingContinuousCachingStrategy);return _callSuper(this,BatchingContinuousCachingStrategy,arguments);}(0,_inherits2.default)(BatchingContinuousCachingStrategy,_BatchingCachingStrat);return(0,_createClass2.default)(BatchingContinuousCachingStrategy,[{key:"addHitInPoolQueue",value:function(){var _addHitInPoolQueue=(0,_asyncToGenerator2.default)(function*(hit){this._hitsPoolQueue.set(hit.key,hit);yield this.cacheHit(new Map([[hit.key,hit]]));});function addHitInPoolQueue(_x){return _addHitInPoolQueue.apply(this,arguments);}return addHitInPoolQueue;}()},{key:"sendActivateHitBatch",value:function(){var _sendActivateHitBatch=(0,_asyncToGenerator2.default)(function*(activateBatch,batchTriggeredBy,currentActivate){var _this=this;var headers=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.HEADER_X_API_KEY,this.config.apiKey),_index.HEADER_X_SDK_CLIENT,_index.SDK_INFO.name),_index.HEADER_X_SDK_VERSION,_index.SDK_INFO.version),_index.HEADER_CONTENT_TYPE,_index.HEADER_APPLICATION_JSON);if(currentActivate){activateBatch.hits.push(currentActivate);}var requestBody=activateBatch.toApiKeys();var url=_index.BASE_API_URL+_index.URL_ACTIVATE_MODIFICATION;var now=Date.now();try{yield this._httpClient.postAsync(url,{headers:headers,body:requestBody,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});(0,_utils.logDebugSprintf)(this.config,_FlagshipConstant.TRACKING_MANAGER,_FlagshipConstant.HIT_SENT_SUCCESS,_FlagshipConstant.ACTIVATE_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});var hitKeysToRemove=activateBatch.hits.filter(function(item){return item.key!==(currentActivate==null?void 0:currentActivate.key);}).map(function(item){return item.key;});activateBatch.hits.forEach(function(item){_this.onVisitorExposed(item);});if(hitKeysToRemove.length){yield this.flushHits(hitKeysToRemove);}this.sendHitsToFsQa(activateBatch.hits);}catch(error){activateBatch.hits.forEach(function(item){_this._activatePoolQueue.set(item.key,item);});if(currentActivate){yield this.cacheHit(new Map([[currentActivate.key,currentActivate]]));}(0,_utils.logErrorSprintf)(this.config,_FlagshipConstant.TRACKING_MANAGER,_FlagshipConstant.TRACKING_MANAGER_ERROR,_FlagshipConstant.ACTIVATE_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});var monitoringHttpResponse=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.SEND_ACTIVATE_HIT_ROUTE_ERROR,logLevel:_index.LogLevel.ERROR,visitorId:`${this._flagshipInstanceId}`,traffic:0,config:this.config,httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now,batchTriggeredBy:batchTriggeredBy});this.sendTroubleshootingHit(monitoringHttpResponse);}});function sendActivateHitBatch(_x2,_x3,_x4){return _sendActivateHitBatch.apply(this,arguments);}return sendActivateHitBatch;}()},{key:"sendActivate",value:function(){var _sendActivate=(0,_asyncToGenerator2.default)(function*(_ref){var activateHitsPool=_ref.activateHitsPool,currentActivate=_ref.currentActivate,batchTriggeredBy=_ref.batchTriggeredBy;var filteredItems=Array.from(activateHitsPool.filter(function(item){return Date.now()-item.createdAt<_FlagshipConstant.DEFAULT_HIT_CACHE_TIME_MS;}));if(!filteredItems.length&&currentActivate){var batch=new _ActivateBatch.ActivateBatch([],this.config);yield this.sendActivateHitBatch(batch,batchTriggeredBy,currentActivate);return;}for(var i=0;i<filteredItems.length;i+=_FlagshipConstant.MAX_ACTIVATE_HIT_PER_BATCH){var _batch=new _ActivateBatch.ActivateBatch(filteredItems.slice(i,i+_FlagshipConstant.MAX_ACTIVATE_HIT_PER_BATCH),this.config);this.sendActivateHitBatch(_batch,batchTriggeredBy,i===0?currentActivate:undefined);}});function sendActivate(_x5){return _sendActivate.apply(this,arguments);}return sendActivate;}()}]);}(_BatchingCachingStrategyAbstract.BatchingCachingStrategyAbstract);

/***/ }),

/***/ 419:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.DecisionApiConfig=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _DecisionMode=__webpack_require__(7086);var _FlagshipConfig2=__webpack_require__(4869);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var DecisionApiConfig=exports.DecisionApiConfig=function(_FlagshipConfig){function DecisionApiConfig(param){(0,_classCallCheck2.default)(this,DecisionApiConfig);return _callSuper(this,DecisionApiConfig,[Object.assign({},param,{decisionMode:_DecisionMode.DecisionMode.DECISION_API})]);}(0,_inherits2.default)(DecisionApiConfig,_FlagshipConfig);return(0,_createClass2.default)(DecisionApiConfig);}(_FlagshipConfig2.FlagshipConfig);

/***/ }),

/***/ 505:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/toConsumableArray");

/***/ }),

/***/ 517:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.FS_HIT_PREFIX=exports.DefaultHitCache=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var FS_HIT_PREFIX=exports.FS_HIT_PREFIX='FS_DEFAULT_HIT_CACHE';var DefaultHitCache=exports.DefaultHitCache=function(){function DefaultHitCache(){(0,_classCallCheck2.default)(this,DefaultHitCache);}return(0,_createClass2.default)(DefaultHitCache,[{key:"cacheHit",value:function cacheHit(hits){var localDatabaseJson=localStorage.getItem(FS_HIT_PREFIX)||'{}';var localDatabase=JSON.parse(localDatabaseJson);var newLocalDatabase=Object.assign({},localDatabase,hits);localStorage.setItem(FS_HIT_PREFIX,JSON.stringify(newLocalDatabase));return Promise.resolve();}},{key:"lookupHits",value:function lookupHits(){var localDatabaseJson=localStorage.getItem(FS_HIT_PREFIX)||'{}';var localDatabase=JSON.parse(localDatabaseJson);return Promise.resolve(localDatabase);}},{key:"flushHits",value:function flushHits(hitKeys){var localDatabaseJson=localStorage.getItem(FS_HIT_PREFIX)||'{}';var localDatabase=JSON.parse(localDatabaseJson);hitKeys.forEach(function(key){delete localDatabase[key];});localStorage.setItem(FS_HIT_PREFIX,JSON.stringify(localDatabase));return Promise.resolve();}},{key:"flushAllHits",value:function flushAllHits(){localStorage.removeItem(FS_HIT_PREFIX);return Promise.resolve();}}]);}();

/***/ }),

/***/ 594:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.BatchTriggeredBy=void 0;var BatchTriggeredBy=exports.BatchTriggeredBy=function(BatchTriggeredBy){BatchTriggeredBy[BatchTriggeredBy["Timer"]=0]="Timer";BatchTriggeredBy[BatchTriggeredBy["BatchLength"]=1]="BatchLength";BatchTriggeredBy[BatchTriggeredBy["Flush"]=2]="Flush";BatchTriggeredBy[BatchTriggeredBy["ActivateLength"]=3]="ActivateLength";BatchTriggeredBy[BatchTriggeredBy["DirectHit"]=4]="DirectHit";BatchTriggeredBy[BatchTriggeredBy["DirectActivate"]=5]="DirectActivate";return BatchTriggeredBy;}({});

/***/ }),

/***/ 614:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/readOnlyError");

/***/ }),

/***/ 736:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.ApiManager=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _DecisionManager2=__webpack_require__(6090);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var ApiManager=exports.ApiManager=function(_DecisionManager){function ApiManager(){(0,_classCallCheck2.default)(this,ApiManager);return _callSuper(this,ApiManager,arguments);}(0,_inherits2.default)(ApiManager,_DecisionManager);return(0,_createClass2.default)(ApiManager,[{key:"getCampaignsAsync",value:function(){var _getCampaignsAsync=(0,_asyncToGenerator2.default)(function*(visitor){return this.getDecisionApiCampaignsAsync(visitor);});function getCampaignsAsync(_x){return _getCampaignsAsync.apply(this,arguments);}return getCampaignsAsync;}()}]);}(_DecisionManager2.DecisionManager);

/***/ }),

/***/ 751:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.HttpClient=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _HttpError=__webpack_require__(6320);var _index=__webpack_require__(3664);var _depsNode=__webpack_require__(7471);var HttpClient=exports.HttpClient=function(){function HttpClient(){(0,_classCallCheck2.default)(this,HttpClient);}return(0,_createClass2.default)(HttpClient,[{key:"getResponse",value:function(){var _getResponse=(0,_asyncToGenerator2.default)(function*(response){var applicationType=response.headers.get('Content-Type');var checkJson=applicationType==null?void 0:applicationType.includes('application/json');var body;var headers={};response.headers.forEach(function(value,key){headers[key]=value;});if(checkJson&&response.ok&&response.status!==204){body=yield response.json();}if(response.status>=400){var bodyString=yield response.text();throw new _HttpError.HttpError(response.status,bodyString||response.statusText,headers);}return{status:response.status,body:body,headers:headers};});function getResponse(_x){return _getResponse.apply(this,arguments);}return getResponse;}()},{key:"getAbortController",value:function getAbortController(){var AbortCtrl=typeof globalThis.AbortController!=='undefined'?globalThis.AbortController:_depsNode.LocalAbortController;return new AbortCtrl();}},{key:"getAsync",value:function(){var _getAsync=(0,_asyncToGenerator2.default)(function*(url,options){var c=this.getAbortController();var id=setTimeout(function(){return c.abort();},(options!=null&&options.timeout?options.timeout:_index.REQUEST_TIME_OUT)*1000);try{var response=yield(0,_depsNode.myFetch)(url,{method:'GET',headers:options==null?void 0:options.headers,signal:c.signal,keepalive:true,next:options==null?void 0:options.nextFetchConfig});return this.getResponse(response);}finally{clearTimeout(id);}});function getAsync(_x2,_x3){return _getAsync.apply(this,arguments);}return getAsync;}()},{key:"postAsync",value:function(){var _postAsync=(0,_asyncToGenerator2.default)(function*(url,options){var c=this.getAbortController();var id=setTimeout(function(){return c.abort();},options.timeout?options.timeout*1000:_index.REQUEST_TIME_OUT*1000);try{var response=yield(0,_depsNode.myFetch)(url,{method:'POST',headers:options.headers,body:JSON.stringify(options.body),signal:c.signal,keepalive:true,next:options==null?void 0:options.nextFetchConfig});return this.getResponse(response);}finally{clearTimeout(id);}});function postAsync(_x4,_x5){return _postAsync.apply(this,arguments);}return postAsync;}()}]);}();

/***/ }),

/***/ 796:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.EdgeConfig=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _DecisionMode=__webpack_require__(7086);var _FlagshipConfig2=__webpack_require__(4869);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var EdgeConfig=exports.EdgeConfig=function(_FlagshipConfig){function EdgeConfig(param){(0,_classCallCheck2.default)(this,EdgeConfig);return _callSuper(this,EdgeConfig,[Object.assign({},param,{decisionMode:_DecisionMode.DecisionMode.BUCKETING_EDGE})]);}(0,_inherits2.default)(EdgeConfig,_FlagshipConfig);return(0,_createClass2.default)(EdgeConfig);}(_FlagshipConfig2.FlagshipConfig);

/***/ }),

/***/ 861:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.TrackingManagerConfig=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var TrackingManagerConfig=exports.TrackingManagerConfig=function(){function TrackingManagerConfig(param){(0,_classCallCheck2.default)(this,TrackingManagerConfig);this.batchIntervals=param==null?void 0:param.batchIntervals;this.poolMaxSize=param==null?void 0:param.poolMaxSize;this._batchStrategy=this.getCacheStrategy(param==null?void 0:param.cacheStrategy);}return(0,_createClass2.default)(TrackingManagerConfig,[{key:"getCacheStrategy",value:function getCacheStrategy(cacheStrategy){if(typeof cacheStrategy==='number'){return cacheStrategy;}return(0,_utils.isBrowser)()?_index.CacheStrategy.CONTINUOUS_CACHING:_index.CacheStrategy.PERIODIC_CACHING;}},{key:"batchIntervals",get:function get(){return this._batchIntervals;},set:function set(v){if(typeof v!=='number'||v<0||v>10800){v=(0,_utils.isBrowser)()?_index.DEFAULT_BROWSER_TIME_INTERVAL:_index.DEFAULT_SERVER_TIME_INTERVAL;}this._batchIntervals=v;}},{key:"poolMaxSize",get:function get(){return this._poolMaxSize;},set:function set(v){if(typeof v!=='number'||v<5){v=(0,_utils.isBrowser)()?_index.DEFAULT_BROWSER_POOL_MAX_SIZE:_index.DEFAULT_SERVER_POOL_MAX_SIZE;}this._poolMaxSize=v;}},{key:"cacheStrategy",get:function get(){return this._batchStrategy;}}]);}();

/***/ }),

/***/ 987:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Visitor=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _depsNode=__webpack_require__(7471);var _index=__webpack_require__(3664);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var Visitor=exports.Visitor=function(_EventEmitter){function Visitor(visitorDelegate){var _this;(0,_classCallCheck2.default)(this,Visitor);_this=_callSuper(this,Visitor);_this.visitorDelegate=visitorDelegate;_this._onReady=function(err){_this.emit(_index.EMIT_READY,err);};_this.visitorDelegate.on(_index.EMIT_READY,_this._onReady);var instance=_this;instance.sendEaiVisitorEvent=function(event){_this.visitorDelegate.sendEaiVisitorEvent(event);};instance.sendEaiPageView=function(pageView){_this.visitorDelegate.sendEaiPageView(pageView);};instance.onEAICollectStatusChange=function(callback){_this.visitorDelegate.onEAICollectStatusChange(callback);};return _this;}(0,_inherits2.default)(Visitor,_EventEmitter);return(0,_createClass2.default)(Visitor,[{key:"visitorId",get:function get(){return this.visitorDelegate.visitorId;},set:function set(v){this.visitorDelegate.visitorId=v;}},{key:"anonymousId",get:function get(){return this.visitorDelegate.anonymousId;}},{key:"config",get:function get(){return this.visitorDelegate.config;}},{key:"context",get:function get(){return this.visitorDelegate.context;}},{key:"flagsStatus",get:function get(){return this.visitorDelegate.flagsStatus;}},{key:"hasConsented",get:function get(){return this.visitorDelegate.hasConsented;}},{key:"setConsent",value:function setConsent(hasConsented){this.visitorDelegate.setConsent(hasConsented);}},{key:"updateContext",value:function updateContext(context,value){this.visitorDelegate.updateContext(context,value);}},{key:"clearContext",value:function clearContext(){this.visitorDelegate.clearContext();}},{key:"getFlag",value:function getFlag(key){return this.visitorDelegate.getFlag(key);}},{key:"getFlags",value:function getFlags(){return this.visitorDelegate.getFlags();}},{key:"fetchFlags",value:function fetchFlags(){return this.visitorDelegate.fetchFlags();}},{key:"sendHit",value:function sendHit(hit){return this.visitorDelegate.sendHit(hit);}},{key:"sendHits",value:function sendHits(hits){return this.visitorDelegate.sendHits(hits);}},{key:"authenticate",value:function authenticate(visitorId){this.visitorDelegate.authenticate(visitorId);}},{key:"unauthenticate",value:function unauthenticate(){this.visitorDelegate.unauthenticate();}},{key:"collectEAIEventsAsync",value:function collectEAIEventsAsync(){var currentPage;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}if(args.length>0){currentPage=args[0];}return this.visitorDelegate.collectEAIEventsAsync(currentPage);}},{key:"cleanup",value:function cleanup(){this.visitorDelegate.cleanup();this.visitorDelegate.off(_index.EMIT_READY,this._onReady);}}]);}(_depsNode.EventEmitter);

/***/ }),

/***/ 1111:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.ERROR_MESSAGE=exports.Diagnostic=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _FlagshipConstant=__webpack_require__(1786);var _HitAbstract2=__webpack_require__(8033);var _BatchTriggeredBy=__webpack_require__(594);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var ERROR_MESSAGE=exports.ERROR_MESSAGE='event category and event action are required';var Diagnostic=exports.Diagnostic=function(_HitAbstract){function Diagnostic(param){var _this;(0,_classCallCheck2.default)(this,Diagnostic);_this=_callSuper(this,Diagnostic,[{type:param.type,userIp:param.userIp,screenResolution:param.screenResolution,locale:param.locale,sessionNumber:param.sessionNumber,visitorId:param.visitorId,anonymousId:param.anonymousId}]);_this.data=Object.assign({},param,{version:param.version||'1',stackType:param.stackType||'SDK',stackName:param.stackName||_FlagshipConstant.SDK_INFO.name,stackVersion:param.stackVersion||_FlagshipConstant.SDK_INFO.version,label:param.label,logLevel:param.logLevel,timestamp:param.timestamp||new Date(Date.now()).toISOString(),timeZone:_this.getTimezone(),ds:_FlagshipConstant.SDK_APP,envId:param.envId||param.config.envId});_this._traffic=param.traffic;_this.config=param.config;return _this;}(0,_inherits2.default)(Diagnostic,_HitAbstract);return(0,_createClass2.default)(Diagnostic,[{key:"traffic",get:function get(){return this._traffic;},set:function set(v){this._traffic=v;}},{key:"getTimezone",value:function getTimezone(){var _Intl$DateTimeFormat;var timezone=typeof Intl==='object'?(_Intl$DateTimeFormat=Intl.DateTimeFormat())==null||(_Intl$DateTimeFormat=_Intl$DateTimeFormat.resolvedOptions())==null?void 0:_Intl$DateTimeFormat.timeZone:undefined;return timezone||`${new Date().getTimezoneOffset()/60}`;}},{key:"toApiKeys",value:function toApiKeys(){var _this$data$config;var apiKeys=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_FlagshipConstant.VISITOR_ID_API_ITEM,this.visitorId),_FlagshipConstant.DS_API_ITEM,this.data.ds),_FlagshipConstant.CUSTOMER_ENV_ID_API_ITEM,`${(_this$data$config=this.data.config)==null?void 0:_this$data$config.envId}`),_FlagshipConstant.T_API_ITEM,this.type),"cv",{});var customVariable={version:`${this.data.version}`,logLevel:`${_index.LogLevel[this.data.logLevel]}`,timestamp:`${this.data.timestamp}`,timeZone:`${this.data.timeZone}`,label:`${this.data.label}`,'stack.type':`${this.data.stackType}`,'stack.name':`${this.data.stackName}`,'stack.version':`${this.data.stackVersion}`};if(this.data.lastBucketingTimestamp!==undefined){customVariable.lastBucketingTimestamp=`${this.data.lastBucketingTimestamp}`;}if(this.data.lastInitializationTimestamp!==undefined){customVariable.lastInitializationTimestamp=`${this.data.lastInitializationTimestamp}`;}if(this.data.flagshipInstanceId!==undefined){customVariable.flagshipInstanceId=`${this.data.flagshipInstanceId}`;}if(this.data.accountId){customVariable.accountId=`${this.data.accountId}`;}if(this.data.envId){customVariable.envId=`${this.data.envId}`;}if(this.data.sdkBucketingFile!==undefined){customVariable.sdkBucketingFile=JSON.stringify(this.data.sdkBucketingFile);}if(this.data.stackOriginName!==undefined){customVariable['stack.origin.name']=`${this.data.stackOriginName}`;}if(this.data.stackOriginVersion!==undefined){customVariable['stack.origin.version']=`${this.data.stackOriginVersion}`;}if(this.data.sdkStatus!==undefined){customVariable['sdk.status']=`${_index.FSSdkStatus[this.data.sdkStatus]}`;}if(this.data.sdkConfigLogLevel!==undefined){customVariable['sdk.config.logLevel']=`${_index.LogLevel[this.data.sdkConfigLogLevel]}`;}if(this.data.sdkConfigMode!==undefined){customVariable['sdk.config.mode']=`${this.data.sdkConfigMode}`;}if(this.data.sdkConfigCustomLogManager!==undefined){customVariable['sdk.config.customLogManager']=`${this.data.sdkConfigCustomLogManager}`;}if(this.data.sdkConfigCustomCacheManager!==undefined){customVariable['sdk.config.customCacheManager']=`${this.data.sdkConfigCustomCacheManager}`;}if(this.data.sdkConfigStatusListener!==undefined){customVariable['sdk.config.custom.StatusListener']=`${this.data.sdkConfigStatusListener}`;}if(this.data.sdkConfigTimeout!==undefined){customVariable['sdk.config.timeout']=`${this.data.sdkConfigTimeout*1000}`;}if(this.data.sdkConfigPollingInterval!==undefined){customVariable['sdk.config.pollingTime']=`${this.data.sdkConfigPollingInterval*1000}`;}if(this.data.sdkConfigTrackingManagerStrategy!==undefined){customVariable['sdk.config.trackingManager.strategy']=`${_index.CacheStrategy[this.data.sdkConfigTrackingManagerStrategy]}`;}if(this.data.sdkConfigTrackingManagerBatchIntervals!==undefined){customVariable['sdk.config.trackingManager.batchIntervals']=`${this.data.sdkConfigTrackingManagerBatchIntervals*1000}`;}if(this.data.sdkConfigTrackingManagerPoolMaxSize!==undefined){customVariable['sdk.config.trackingManager.poolMaxSize']=`${this.data.sdkConfigTrackingManagerPoolMaxSize}`;}if(this.data.sdkConfigFetchNow!==undefined){customVariable['sdk.config.fetchNow']=`${this.data.sdkConfigFetchNow}`;}if(this.data.sdkConfigReuseVisitorIds!==undefined){customVariable['sdk.config.reuseVisitorIds']=`${this.data.sdkConfigReuseVisitorIds}`;}if(this.data.sdkConfigInitialBucketing!==undefined){customVariable['sdk.config.initialBucketing']=JSON.stringify(this.data.sdkConfigInitialBucketing);}if(this.data.sdkConfigDecisionApiUrl!==undefined){customVariable['sdk.config.decisionApiUrl']=`${this.data.sdkConfigDecisionApiUrl}`;}if(this.data.sdkConfigHitDeduplicationTime!==undefined){customVariable['sdk.config.hitDeduplicationTime']=`${this.data.sdkConfigHitDeduplicationTime*1000}`;}if(this.data.sdkConfigUsingCustomHitCache!==undefined){customVariable['sdk.config.usingCustomHitCache']=JSON.stringify(this.data.sdkConfigUsingCustomHitCache);}if(this.data.sdkConfigUsingCustomVisitorCache!==undefined){customVariable['sdk.config.usingCustomVisitorCache']=JSON.stringify(this.data.sdkConfigUsingCustomVisitorCache);}if(this.data.sdkConfigUsingOnVisitorExposed!==undefined){customVariable['sdk.config.usingOnVisitorExposed']=JSON.stringify(this.data.sdkConfigUsingOnVisitorExposed);}if(this.data.sdkConfigFetchThirdPartyData!==undefined){customVariable['sdk.config.fetchThirdPartyData']=JSON.stringify(this.data.sdkConfigFetchThirdPartyData);}if(this.data.sdkConfigFetchFlagsBufferingTime!==undefined){customVariable['sdk.config.fetchFlagsBufferingTime']=JSON.stringify(this.data.sdkConfigFetchFlagsBufferingTime*1000);}if(this.data.sdkConfigNextFetchConfig!==undefined){customVariable['sdk.config.nextFetchConfig']=JSON.stringify(this.data.sdkConfigNextFetchConfig);}if(this.data.sdkConfigDisableDeveloperUsageTracking!==undefined){customVariable['sdk.config.disableDeveloperUsageTracking']=JSON.stringify(this.data.sdkConfigDisableDeveloperUsageTracking);}if(this.data.sdkConfigDisableCache!==undefined){customVariable['sdk.config.disableCache']=JSON.stringify(this.data.sdkConfigDisableCache);}if(this.data.httpRequestUrl!==undefined){customVariable['http.request.url']=`${this.data.httpRequestUrl}`;}if(this.data.httpRequestMethod!==undefined){customVariable['http.request.method']=`${this.data.httpRequestMethod}`;}if(this.data.httpRequestHeaders!==undefined){customVariable['http.request.headers']=JSON.stringify(this.data.httpRequestHeaders);}if(this.data.httpRequestBody!==undefined){customVariable['http.request.body']=JSON.stringify(this.data.httpRequestBody);}if(this.data.httpResponseUrl!==undefined){customVariable['http.response.url']=`${this.data.httpResponseUrl}`;}if(this.data.httpResponseMethod!==undefined){customVariable['http.response.method']=`${this.data.httpResponseMethod}`;}if(this.data.httpResponseHeaders!==undefined){customVariable['http.response.headers']=JSON.stringify(this.data.httpResponseHeaders);}if(this.data.httpResponseCode!==undefined){customVariable['http.response.code']=`${this.data.httpResponseCode}`;}if(this.data.httpResponseBody!==undefined){customVariable['http.response.body']=JSON.stringify(this.data.httpResponseBody);}if(this.data.httpResponseTime!==undefined){customVariable['http.response.time']=`${this.data.httpResponseTime}`;}if(this.visitorId!==undefined){customVariable['visitor.visitorId']=`${this.visitorId}`;}if(this.anonymousId!==undefined){customVariable['visitor.anonymousId']=`${this.anonymousId}`;}if(this.data.visitorSessionId!==undefined){customVariable['visitor.sessionId']=`${this.data.visitorSessionId}`;}if(this.data.visitorStatus!==undefined){customVariable['visitor.status']=`${this.data.visitorStatus}`;}if(this.data.visitorInstanceType!==undefined){customVariable['visitor.instanceType']=`${this.data.visitorInstanceType}`;}if(this.data.visitorContext!==undefined){for(var key in this.data.visitorContext){var element=this.data.visitorContext[key];customVariable[`visitor.context.[${key}]`]=`${element}`;}}if(this.data.visitorConsent!==undefined){customVariable['visitor.consent']=`${this.data.visitorConsent}`;}if(this.data.visitorAssignmentHistory!==undefined){for(var _key in this.data.visitorAssignmentHistory){var _element=this.data.visitorAssignmentHistory[_key];customVariable[`visitor.assignments.[${_key}]`]=_element;}}if(this.data.visitorFlags!==undefined){this.data.visitorFlags.forEach(function(item,flagKey){for(var itemKey in item){var itemValue=item[itemKey];var hasMetadataKey=itemKey==='value'||itemKey==='key';var value=typeof itemValue==='string'?itemValue:JSON.stringify(itemValue);customVariable[`visitor.flags.[${flagKey}]${hasMetadataKey?'':'.metadata'}.${itemKey}`]=value;}});}if(this.data.visitorIsAuthenticated!==undefined){customVariable['visitor.isAuthenticated']=`${this.data.visitorIsAuthenticated}`;}if(this.data.visitorInitialCampaigns!==undefined){customVariable['visitor.initialCampaigns']=JSON.stringify(this.data.visitorInitialCampaigns);}if(this.data.visitorInitialFlagsData!==undefined){customVariable['visitor.initialFlagsData']=JSON.stringify(Array.isArray(this.data.visitorInitialFlagsData)?this.data.visitorInitialFlagsData:Array.from(this.data.visitorInitialFlagsData));}if(this.data.visitorCampaigns!==undefined){customVariable['visitor.campaigns']=JSON.stringify(this.data.visitorCampaigns);}if(this.data.visitorCampaignFromCache!==undefined){customVariable['visitor.campaignFromCache']=JSON.stringify(this.data.visitorCampaignFromCache);}if(this.data.contextKey!==undefined){customVariable.contextKey=`${this.data.contextKey}`;}if(this.data.contextValue!==undefined){customVariable.contextValue=`${this.data.contextValue}`;}if(this.data.flagKey!==undefined){customVariable['flag.key']=`${this.data.flagKey}`;}if(this.data.flagValue!==undefined){customVariable['flag.value']=`${this.data.flagValue}`;}if(this.data.flagDefault!==undefined){customVariable['flag.default']=JSON.stringify(this.data.flagDefault);}if(this.data.flagMetadataCampaignId!==undefined){customVariable['flag.metadata.campaignId']=`${this.data.flagMetadataCampaignId}`;}if(this.data.flagMetadataCampaignName!==undefined){customVariable['flag.metadata.campaignName']=`${this.data.flagMetadataCampaignName}`;}if(this.data.flagMetadataVariationGroupId!==undefined){customVariable['flag.metadata.variationGroupId']=`${this.data.flagMetadataVariationGroupId}`;}if(this.data.flagMetadataVariationGroupName!==undefined){customVariable['flag.metadata.variationGroupName']=`${this.data.flagMetadataVariationGroupName}`;}if(this.data.flagMetadataVariationId!==undefined){customVariable['flag.metadata.variationId']=`${this.data.flagMetadataVariationId}`;}if(this.data.flagMetadataVariationName!==undefined){customVariable['flag.metadata.variationName']=`${this.data.flagMetadataVariationName}`;}if(this.data.flagMetadataCampaignSlug!==undefined){customVariable['flag.metadata.campaignSlug']=`${this.data.flagMetadataCampaignSlug}`;}if(this.data.flagMetadataCampaignType!==undefined){customVariable['flag.metadata.campaignType']=`${this.data.flagMetadataCampaignType}`;}if(this.data.flagMetadataCampaignIsReference!==undefined){customVariable['flag.metadata.isReference']=`${this.data.flagMetadataCampaignIsReference}`;}if(this.data.hitContent!==undefined){for(var _key2 in this.data.hitContent){var _element2=this.data.hitContent[_key2];customVariable[`hit.${_key2}`]=typeof _element2==='string'?_element2:JSON.stringify(_element2);}}if(this.data.batchTriggeredBy!==undefined){customVariable.batchTriggeredBy=`${_BatchTriggeredBy.BatchTriggeredBy[this.data.batchTriggeredBy]}`;}if(this.data.accountSettings!==undefined){for(var _key3 in this.data.accountSettings){var _element3=this.data.accountSettings[_key3];customVariable[`accountSettings.${_key3}`]=typeof _element3==='string'?_element3:JSON.stringify(_element3);}}if(this.data.eAIScore!==undefined){customVariable['eAIScore.eai.eas']=this.data.eAIScore.eai.eas;}if(this.data.isEAIScoreFromLocalCache!==undefined){customVariable.isEAIScoreFromLocalCache=`${this.data.isEAIScoreFromLocalCache}`;}if(this.data.eAIDataTimestamp!==undefined){customVariable.eAIDataTimestamp=`${this.data.eAIDataTimestamp}`;}apiKeys.cv=customVariable;return apiKeys;}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!(!checkParent||_superPropGet(Diagnostic,"isReady",this,3)([]));}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 1116:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/defineProperty");

/***/ }),

/***/ 1121:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));

/***/ }),

/***/ 1192:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Screen=exports.ERROR_MESSAGE=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _HitType=__webpack_require__(1197);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var ERROR_MESSAGE=exports.ERROR_MESSAGE='Screen name is required';var Screen=exports.Screen=function(_HitAbstract){function Screen(param){var _this;(0,_classCallCheck2.default)(this,Screen);_this=_callSuper(this,Screen,[{type:_HitType.HitType.SCREEN_VIEW,userIp:param.userIp,screenResolution:param.screenResolution,locale:param.locale,sessionNumber:param.sessionNumber,visitorId:param.visitorId,anonymousId:param.anonymousId,qaMode:param.qaMode,isActionTrackingHit:param.isActionTrackingHit}]);_this.documentLocation=param.documentLocation;return _this;}(0,_inherits2.default)(Screen,_HitAbstract);return(0,_createClass2.default)(Screen,[{key:"documentLocation",get:function get(){return this._documentLocation;},set:function set(v){if(!this.isNotEmptyString(v,'documentLocation')){return;}this._documentLocation=v;}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!((!checkParent||_superPropGet(Screen,"isReady",this,3)([]))&&this.documentLocation);}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys=_superPropGet(Screen,"toApiKeys",this,3)([]);apiKeys[_FlagshipConstant.DL_API_ITEM]=this.documentLocation;return apiKeys;}},{key:"toObject",value:function toObject(){return Object.assign({},_superPropGet(Screen,"toObject",this,3)([]),{documentLocation:this.documentLocation});}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 1197:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.HitType=void 0;var HitType=exports.HitType=function(HitType){HitType["PAGE_VIEW"]="PAGEVIEW";HitType["PAGE"]="PAGEVIEW";HitType["SCREEN_VIEW"]="SCREENVIEW";HitType["SCREEN"]="SCREENVIEW";HitType["TRANSACTION"]="TRANSACTION";HitType["ITEM"]="ITEM";HitType["EVENT"]="EVENT";return HitType;}({});

/***/ }),

/***/ 1385:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.LocalAbortController=void 0;var LocalAbortController=exports.LocalAbortController=AbortController;

/***/ }),

/***/ 1431:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.OS_VERSION_NAME=exports.OS_VERSION_CODE=exports.OS_NAME=exports.LOCATION_REGION=exports.LOCATION_LONG=exports.LOCATION_LAT=exports.LOCATION_COUNTRY=exports.LOCATION_CITY=exports.IP=exports.INTERNET_CONNECTION=exports.INTERFACE_NAME=exports.FLAGSHIP_VISITOR=exports.FLAGSHIP_VERSION=exports.FLAGSHIP_CONTEXT=exports.FLAGSHIP_CLIENT=exports.DEVICE_TYPE=exports.DEVICE_MODEL=exports.DEVICE_LOCALE=exports.CARRIER_NAME=exports.APP_VERSION_NAME=exports.APP_VERSION_CODE=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _FLAGSHIP_CONTEXT;var DEVICE_LOCALE=exports.DEVICE_LOCALE='sdk_deviceLanguage';var DEVICE_TYPE=exports.DEVICE_TYPE='sdk_deviceType';var DEVICE_MODEL=exports.DEVICE_MODEL='sdk_deviceModel';var LOCATION_CITY=exports.LOCATION_CITY='sdk_city';var LOCATION_REGION=exports.LOCATION_REGION='sdk_region';var LOCATION_COUNTRY=exports.LOCATION_COUNTRY='sdk_country';var LOCATION_LAT=exports.LOCATION_LAT='sdk_lat';var LOCATION_LONG=exports.LOCATION_LONG='sdk_long';var IP=exports.IP='sdk_ip';var OS_NAME=exports.OS_NAME='sdk_osName';var OS_VERSION_NAME=exports.OS_VERSION_NAME='sdk_osVersionName';var OS_VERSION_CODE=exports.OS_VERSION_CODE='sdk_osVersionCode';var CARRIER_NAME=exports.CARRIER_NAME='sdk_carrierName';var INTERNET_CONNECTION=exports.INTERNET_CONNECTION='sdk_internetConnection';var APP_VERSION_NAME=exports.APP_VERSION_NAME='sdk_versionName';var APP_VERSION_CODE=exports.APP_VERSION_CODE='sdk_versionCode';var INTERFACE_NAME=exports.INTERFACE_NAME='sdk_interfaceName';var FLAGSHIP_CLIENT=exports.FLAGSHIP_CLIENT='fs_client';var FLAGSHIP_VERSION=exports.FLAGSHIP_VERSION='fs_version';var FLAGSHIP_VISITOR=exports.FLAGSHIP_VISITOR='fs_users';var FLAGSHIP_CONTEXT=exports.FLAGSHIP_CONTEXT=(_FLAGSHIP_CONTEXT={},(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)(_FLAGSHIP_CONTEXT,DEVICE_LOCALE,'string'),DEVICE_TYPE,'string'),DEVICE_MODEL,'string'),LOCATION_CITY,'string'),LOCATION_REGION,'string'),LOCATION_COUNTRY,'string'),LOCATION_LAT,'number'),LOCATION_LONG,'number'),IP,'string'),OS_NAME,'string'),(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)(_FLAGSHIP_CONTEXT,OS_VERSION_NAME,'string'),OS_VERSION_CODE,'string'),CARRIER_NAME,'string'),INTERNET_CONNECTION,'string'),APP_VERSION_NAME,'string'),APP_VERSION_CODE,'string'),INTERFACE_NAME,'string'),FLAGSHIP_CLIENT,'string'),FLAGSHIP_VERSION,'string'),FLAGSHIP_VISITOR,'string'));

/***/ }),

/***/ 1460:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.UsageHit=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _Diagnostic2=__webpack_require__(1111);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var UsageHit=exports.UsageHit=function(_Diagnostic){function UsageHit(param){(0,_classCallCheck2.default)(this,UsageHit);return _callSuper(this,UsageHit,[Object.assign({},param,{type:'USAGE'})]);}(0,_inherits2.default)(UsageHit,_Diagnostic);return(0,_createClass2.default)(UsageHit);}(_Diagnostic2.Diagnostic);

/***/ }),

/***/ 1786:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.FS_QA_ASSISTANT_STAGING=exports.FS_QA_ASSISTANT_SCRIPT_TAG_ID=exports.FS_QA_ASSISTANT_LOCAL=exports.FS_QA_ASSISTANT=exports.FS_IS_QA_MODE_ENABLED=exports.FS_FORCED_VARIATIONS=exports.FS_CONSENT=exports.FLAG_VISITOR_EXPOSED=exports.FLAG_VALUE=exports.FLAG_METADATA=exports.FLAGSHIP_VISITOR_NOT_AUTHENTICATE=exports.FLAGSHIP_SDK=exports.FETCH_FLAG_BUFFERING_DEFAULT_TIME=exports.FETCH_FLAGS_STARTED=exports.FETCH_FLAGS_PANIC_MODE=exports.FETCH_FLAGS_MISSING=exports.FETCH_FLAGS_FROM_CAMPAIGNS=exports.FETCH_FLAGS_BUFFERING_MESSAGE=exports.FETCH_EAI_SCORE_SUCCESS=exports.FETCH_EAI_SCORE_ERROR=exports.FETCH_EAI_SCORE=exports.FETCH_CAMPAIGNS_SUCCESS=exports.FETCH_CAMPAIGNS_FROM_CACHE=exports.EXPOSE_ALL_KEYS=exports.EVENT_VALUE_API_ITEM=exports.EVENT_SUFFIX=exports.EVENT_LABEL_API_ITEM=exports.EVENT_CATEGORY_API_ITEM=exports.EVENT_ACTION_API_ITEM=exports.ERROR=exports.EMOTION_AI_UC_URL=exports.EMOTION_AI_EVENT_URL=exports.EMIT_STATUS=exports.EMIT_READY=exports.EAI_SCORE_CONTEXT_KEY=exports.DS_API_ITEM=exports.DL_API_ITEM=exports.DIRECT_HIT=exports.DEFAULT_SERVER_TIME_INTERVAL=exports.DEFAULT_SERVER_POOL_MAX_SIZE=exports.DEFAULT_POLLING_INTERVAL=exports.DEFAULT_HIT_CACHE_TIME_MS=exports.DEFAULT_DEDUPLICATION_TIME=exports.DEFAULT_BROWSER_TIME_INTERVAL=exports.DEFAULT_BROWSER_POOL_MAX_SIZE=exports.DECISION_MANAGER_MISSING_ERROR=exports.CUSTOMER_UID=exports.CUSTOMER_ENV_ID_API_ITEM=exports.CUSTOMER_ENV_ID_API_ACTIVATE=exports.CURL_LIBRARY_IS_NOT_LOADED=exports.CONTEXT_VALUE_ERROR=exports.CONTEXT_PARAM_ERROR=exports.CONTEXT_OBJET_PARAM_UPDATE=exports.CONTEXT_NULL_ERROR=exports.CONTEXT_KEY_VALUE_UPDATE=exports.CONTEXT_KEY_ERROR=exports.CONSENT_NOT_SPECIFY_WARNING=exports.CONSENT_CHANGED=exports.CLIENT_CACHE_KEY=exports.CLICK_PATH_DELAY_MS=exports.CLEAR_CONTEXT=exports.CDN_ACCOUNT_SETTINGS_URL=exports.CAMPAIGN_ID=exports.BUCKETING_VARIATION_CACHE=exports.BUCKETING_POOLING_STOPPED=exports.BUCKETING_POOLING_STARTED=exports.BUCKETING_NEW_ALLOCATION=exports.BUCKETING_API_URL=exports.BUCKETING_API_CONTEXT_URL=exports.BATCH_SENT_SUCCESS=exports.BATCH_MAX_SIZE=exports.BATCH_LOOP_STOPPED=exports.BATCH_LOOP_STARTED=exports.BATCH_HIT=exports.BATCH=exports.BASE_API_URL=exports.AUTHENTICATE=exports.ANONYMOUS_ID=exports.ANALYTIC_HIT_ALLOCATION=exports.ANALYTICS_HIT_SENT_SUCCESS=exports.ANALYTICS_HIT_ADDED_IN_QUEUE=exports.ALL_HITS_FLUSHED=exports.ALLOCATION=exports.ADD_USAGE_HIT=exports.ADD_TROUBLESHOOTING_HIT=exports.ADD_HIT=exports.ADD_ACTIVATE=exports.ACTIVATE_SENT_SUCCESS=exports.ACTIVATE_MODIFICATION_KEY_ERROR=exports.ACTIVATE_MODIFICATION_ERROR=exports.ACTIVATE_HIT=exports.ACTIVATE_BATCH_LENGTH=exports.ACTIVATE_ADDED_IN_QUEUE=exports.ACTION_TRACKING_SENDING_HIT_ERROR=exports.ACTION_TRACKING_SENDING_HIT=exports.ACTION_TRACKING_INVALID_NONCE=exports.ACTION_TRACKING_INVALID_HIT=exports.ACTION_TRACKING_HIT_RECEIVED=exports.ACTION_TRACKING_DISPATCHED=exports.ACTION_TRACKING=void 0;exports.SEND_ACTIVATE=exports.SDK_VERSION=exports.SDK_STATUS_CHANGED=exports.SDK_STARTED_INFO=exports.SDK_INFO=exports.SDK_APP=exports.SCROLL_END_DELAY_MS=exports.SCREEN_RESOLUTION_API_ITEM=exports.SCORING_INTERVAL=exports.SAVE_VISITOR_INSTANCE=exports.REQUEST_TIME_OUT=exports.QT_API_ITEM=exports.QA_MODE_API_ITEM=exports.QA_ASSISTANT_STAGING_URL=exports.QA_ASSISTANT_PROD_URL=exports.QA_ASSISTANT_LOCAL_URL=exports.PROCESS_UPDATE_CONTEXT=exports.PROCESS_SYNCHRONIZED_MODIFICATION=exports.PROCESS_SET_CONSENT=exports.PROCESS_SEND_HIT=exports.PROCESS_SEND_ACTIVATE=exports.PROCESS_SDK_STATUS=exports.PROCESS_NEW_VISITOR=exports.PROCESS_MODIFICATIONS_FOR_CAMPAIGN=exports.PROCESS_LOOKUP_HIT=exports.PROCESS_INITIALIZATION=exports.PROCESS_GET_MODIFICATION_INFO=exports.PROCESS_GET_MODIFICATION=exports.PROCESS_GET_CAMPAIGNS=exports.PROCESS_GET_ALL_MODIFICATION=exports.PROCESS_FLUSH_HIT=exports.PROCESS_FETCHING_FLAGS=exports.PROCESS_CLEAR_CONTEXT=exports.PROCESS_CACHE_HIT=exports.PROCESS_CACHE=exports.PROCESS_BUCKETING=exports.PROCESS_ACTIVE_MODIFICATION=exports.PROCESS=exports.PREDEFINED_CONTEXT_TYPE_ERROR=exports.PREDEFINED_CONTEXT_LOADED=exports.POLLING_EVENT_FAILED=exports.POLLING_EVENT_300=exports.POLLING_EVENT_200=exports.PM_API_ITEM=exports.PANIC_MODE_ERROR=exports.PANIC_MODE_DOC_URL=exports.NO_FLAG_METADATA=exports.NO_BATCHING_WITH_CONTINUOUS_CACHING_STRATEGY=exports.NEW_VISITOR_NOT_READY=exports.METHOD_DEACTIVATED_SEND_CONSENT_ERROR=exports.METHOD_DEACTIVATED_ERROR=exports.METHOD_DEACTIVATED_CONSENT_ERROR=exports.METHOD_DEACTIVATED_BUCKETING_ERROR=exports.METADATA_SDK_NOT_READY=exports.METADATA_PANIC_MODE=exports.MAX_SCORING_POLLING_TIME=exports.MAX_LAST_COLLECTING_TIME_MS=exports.MAX_COLLECTING_TIME_MS=exports.MAX_CLICK_PATH_LENGTH=exports.MAX_ACTIVATE_HIT_PER_BATCH=exports.LOOKUP_VISITOR_JSON_OBJECT_ERROR=exports.LOOKUP_HITS_JSON_OBJECT_ERROR=exports.JS_DOC_URL=exports.IV_API_ITEM=exports.IQ_API_ITEM=exports.IP_API_ITEM=exports.IN_API_ITEM=exports.INITIALIZATION_STARTING=exports.INITIALIZATION_PARAM_ERROR=exports.IC_API_ITEM=exports.ICN_API_ITEM=exports.HIT_SENT_SUCCESS=exports.HIT_EVENT_URL=exports.HIT_DATA_FLUSHED=exports.HIT_CONSENT_URL=exports.HIT_CACHE_VERSION=exports.HIT_CACHE_SAVED=exports.HIT_CACHE_LOADED=exports.HIT_CACHE_ERROR=exports.HIT_API_URL=exports.HIT_ADDED_IN_QUEUE=exports.HEADER_X_SDK_VERSION=exports.HEADER_X_SDK_CLIENT=exports.HEADER_X_ENV_ID=exports.HEADER_X_API_KEY=exports.HEADER_CONTENT_TYPE=exports.HEADER_APPLICATION_JSON=exports.GET_THIRD_PARTY_SEGMENT=exports.GET_MODIFICATION_MISSING_ERROR=exports.GET_MODIFICATION_KEY_ERROR=exports.GET_MODIFICATION_ERROR=exports.GET_MODIFICATION_CAST_ERROR=exports.GET_METADATA_CAST_ERROR=exports.GET_FLAG_VALUE=exports.GET_FLAG_NOT_FOUND=exports.GET_FLAG_MISSING_ERROR=exports.GET_FLAG_ERROR=exports.GET_FLAG_CAST_ERROR=exports.GET_FLAG=exports.FS_QA_URL=void 0;exports.VISITOR_UNAUTHENTICATE=exports.VISITOR_SYNC_FLAGS_MESSAGE=exports.VISITOR_PROFILE_LOADED=exports.VISITOR_ID_GENERATED=exports.VISITOR_ID_FROM_AB_TASTY_TAG=exports.VISITOR_ID_ERROR=exports.VISITOR_ID_API_ITEM=exports.VISITOR_EXPOSED_VALUE_NOT_CALLED=exports.VISITOR_EAI_SCORE_KEY=exports.VISITOR_CREATED=exports.VISITOR_CONSENT=exports.VISITOR_CACHE_VERSION=exports.VISITOR_CACHE_SAVED=exports.VISITOR_CACHE_LOADED=exports.VISITOR_CACHE_FLUSHED=exports.VISITOR_CACHE_ERROR=exports.VISITOR_AUTHENTICATE_VISITOR_ID_ERROR=exports.VISITOR_AUTHENTICATE=exports.VISITOR_ALREADY_AUTHENTICATE=exports.VARIATION_ID_API_ITEM=exports.VARIATION_GROUP_ID_API_ITEM_ACTIVATE=exports.VARIATION_GROUP_ID_API_ITEM=exports.USER_LANGUAGE=exports.USER_IP_API_ITEM=exports.USER_EXPOSED_FLAG_ERROR=exports.USER_EXPOSED_CAST_ERROR=exports.USAGE_HIT_URL=exports.URL_CAMPAIGNS=exports.URL_ACTIVATE_MODIFICATION=exports.UNAUTHENTICATE=exports.T_API_ITEM=exports.TYPE_INTEGER_ERROR=exports.TYPE_ERROR=exports.TT_API_ITEM=exports.TS_API_ITEM=exports.TR_API_ITEM=exports.TRUSTED_QA_ORIGINS=exports.TROUBLESHOOTING_SENT_SUCCESS=exports.TROUBLESHOOTING_HIT_URL=exports.TROUBLESHOOTING_HIT_ADDED_IN_QUEUE=exports.TRACKING_MANAGER_ERROR=exports.TRACKING_MANAGER=exports.TRACKER_MANAGER_MISSING_ERROR=exports.TID_API_ITEM=exports.THIRD_PARTY_SEGMENT_URL=exports.TC_API_ITEM=exports.TCC_API_ITEM=exports.TA_API_ITEM=exports.TAG_QA_URL=exports.TAG_QA_ASSISTANT_STAGING=exports.TAG_QA_ASSISTANT_LOCAL=exports.TAG_QA_ASSISTANT=exports.S_API_ITEM=exports.SM_API_ITEM=exports.SL_ITEM=exports.SESSION_NUMBER=exports.SEND_USAGE_HIT=exports.SEND_TROUBLESHOOTING=exports.SEND_SEGMENT_HIT=exports.SEND_HIT=exports.SEND_EAI_EVENT_SUCCESS=exports.SEND_EAI_EVENT_ERROR=exports.SEND_EAI_EVENT=exports.SEND_CONTEXT_EVENT=exports.SEND_BATCH=void 0;var _sdkVersion=__webpack_require__(3674);var SDK_INFO=exports.SDK_INFO={name:'TypeScript',version:_sdkVersion.version};var REQUEST_TIME_OUT=exports.REQUEST_TIME_OUT=2;var FETCH_FLAG_BUFFERING_DEFAULT_TIME=exports.FETCH_FLAG_BUFFERING_DEFAULT_TIME=2;var DEFAULT_DEDUPLICATION_TIME=exports.DEFAULT_DEDUPLICATION_TIME=2.5;var DEFAULT_POLLING_INTERVAL=exports.DEFAULT_POLLING_INTERVAL=5;var DEFAULT_SERVER_TIME_INTERVAL=exports.DEFAULT_SERVER_TIME_INTERVAL=10;var DEFAULT_SERVER_POOL_MAX_SIZE=exports.DEFAULT_SERVER_POOL_MAX_SIZE=100;var DEFAULT_BROWSER_TIME_INTERVAL=exports.DEFAULT_BROWSER_TIME_INTERVAL=5;var DEFAULT_BROWSER_POOL_MAX_SIZE=exports.DEFAULT_BROWSER_POOL_MAX_SIZE=10;var BATCH_MAX_SIZE=exports.BATCH_MAX_SIZE=2500000;var ANALYTIC_HIT_ALLOCATION=exports.ANALYTIC_HIT_ALLOCATION=1;var MAX_COLLECTING_TIME_MS=exports.MAX_COLLECTING_TIME_MS=30000;var MAX_LAST_COLLECTING_TIME_MS=exports.MAX_LAST_COLLECTING_TIME_MS=120000;var MAX_CLICK_PATH_LENGTH=exports.MAX_CLICK_PATH_LENGTH=1900;var MAX_SCORING_POLLING_TIME=exports.MAX_SCORING_POLLING_TIME=120000;var SCROLL_END_DELAY_MS=exports.SCROLL_END_DELAY_MS=200;var CLICK_PATH_DELAY_MS=exports.CLICK_PATH_DELAY_MS=500;var SCORING_INTERVAL=exports.SCORING_INTERVAL=5000;var BASE_API_URL=exports.BASE_API_URL='https://decision.flagship.io/v2/';var HIT_API_URL=exports.HIT_API_URL='https://ariane.abtasty.com';var HIT_EVENT_URL=exports.HIT_EVENT_URL='https://events.flagship.io';var TROUBLESHOOTING_HIT_URL=exports.TROUBLESHOOTING_HIT_URL='https://events.flagship.io/troubleshooting';var USAGE_HIT_URL=exports.USAGE_HIT_URL='https://events.flagship.io/analytics';var BUCKETING_API_URL=exports.BUCKETING_API_URL='https://cdn.flagship.io/{0}/bucketing.json';var BUCKETING_API_CONTEXT_URL=exports.BUCKETING_API_CONTEXT_URL='https://decision.flagship.io/v2/{0}/events';var THIRD_PARTY_SEGMENT_URL=exports.THIRD_PARTY_SEGMENT_URL='https://api-data-connector.flagship.io/accounts/{0}/segments/{1}';var HIT_CONSENT_URL=exports.HIT_CONSENT_URL='https://ariane.abtasty.com';var URL_CAMPAIGNS=exports.URL_CAMPAIGNS='/campaigns';var URL_ACTIVATE_MODIFICATION=exports.URL_ACTIVATE_MODIFICATION='activate';var QA_ASSISTANT_PROD_URL=exports.QA_ASSISTANT_PROD_URL='https://qa-assistant.flagship.io/bundle.js';var QA_ASSISTANT_STAGING_URL=exports.QA_ASSISTANT_STAGING_URL='https://staging-qa-assistant.flagship.io/bundle.js';var QA_ASSISTANT_LOCAL_URL=exports.QA_ASSISTANT_LOCAL_URL='https://local-qa-assistant.flagship.io:5000/bundle.js';var FS_QA_ASSISTANT=exports.FS_QA_ASSISTANT='fs_qa_assistant';var FS_QA_ASSISTANT_STAGING=exports.FS_QA_ASSISTANT_STAGING='fs_qa_assistant_staging';var FS_QA_ASSISTANT_LOCAL=exports.FS_QA_ASSISTANT_LOCAL='fs_qa_assistant_local';var TAG_QA_ASSISTANT=exports.TAG_QA_ASSISTANT='abtasty_qa_assistant';var TAG_QA_ASSISTANT_STAGING=exports.TAG_QA_ASSISTANT_STAGING='abtasty_qa_assistant_staging';var TAG_QA_ASSISTANT_LOCAL=exports.TAG_QA_ASSISTANT_LOCAL='abtasty_qa_assistant_local';var TAG_QA_URL=exports.TAG_QA_URL='qa-assistant.abtasty.com';var FS_QA_URL=exports.FS_QA_URL='qa-assistant.flagship.io';var EXPOSE_ALL_KEYS=exports.EXPOSE_ALL_KEYS='exposeAllKeys';var SEND_CONTEXT_EVENT=exports.SEND_CONTEXT_EVENT='sendContextEvent';var FS_CONSENT=exports.FS_CONSENT='fs_consent';var FS_IS_QA_MODE_ENABLED=exports.FS_IS_QA_MODE_ENABLED='FS_IS_QA_MODE_ENABLED';var FS_FORCED_VARIATIONS=exports.FS_FORCED_VARIATIONS='FS_FORCED_VARIATIONS';var FS_QA_ASSISTANT_SCRIPT_TAG_ID=exports.FS_QA_ASSISTANT_SCRIPT_TAG_ID='FS_QA_ASSISTANT_SCRIPT_TAG_ID';var EMOTION_AI_UC_URL=exports.EMOTION_AI_UC_URL='https://uc-info.flagship.io/v1/segments/clients/{0}/visitors/{1}';var CDN_ACCOUNT_SETTINGS_URL=exports.CDN_ACCOUNT_SETTINGS_URL='https://cdn.flagship.io/{0}/accountSettings.json';var VISITOR_EAI_SCORE_KEY=exports.VISITOR_EAI_SCORE_KEY='{0}_EAIScore';var EMOTION_AI_EVENT_URL=exports.EMOTION_AI_EVENT_URL='https://events.flagship.io/emotionsai';var SEND_EAI_EVENT=exports.SEND_EAI_EVENT='sendEAIEvent';var SEND_EAI_EVENT_ERROR=exports.SEND_EAI_EVENT_ERROR='Failed to send Emotion AI event: {0}';var SEND_EAI_EVENT_SUCCESS=exports.SEND_EAI_EVENT_SUCCESS='Emotion AI event sent: {0}';var FETCH_EAI_SCORE=exports.FETCH_EAI_SCORE='fetchEAIScore';var FETCH_EAI_SCORE_ERROR=exports.FETCH_EAI_SCORE_ERROR='visitor {0}, Failed to fetch EAIScore: {1}';var FETCH_EAI_SCORE_SUCCESS=exports.FETCH_EAI_SCORE_SUCCESS='visitor {0}, EAIScore fetched: {1}';var EAI_SCORE_CONTEXT_KEY=exports.EAI_SCORE_CONTEXT_KEY='eai::eas';var CLIENT_CACHE_KEY=exports.CLIENT_CACHE_KEY='FS_CLIENT_VISITOR';var SDK_VERSION=exports.SDK_VERSION=_sdkVersion.version;var VISITOR_CACHE_VERSION=exports.VISITOR_CACHE_VERSION=1;var HIT_CACHE_VERSION=exports.HIT_CACHE_VERSION=1;var DEFAULT_HIT_CACHE_TIME_MS=exports.DEFAULT_HIT_CACHE_TIME_MS=14400000;var MAX_ACTIVATE_HIT_PER_BATCH=exports.MAX_ACTIVATE_HIT_PER_BATCH=100;var SDK_STARTED_INFO=exports.SDK_STARTED_INFO='Flagship SDK (version: {0}) {1} in **{2}** mode';var FLAGSHIP_SDK=exports.FLAGSHIP_SDK='Flagship SDK';var EMIT_READY=exports.EMIT_READY='ready';var EMIT_STATUS=exports.EMIT_STATUS='status';var NO_BATCHING_WITH_CONTINUOUS_CACHING_STRATEGY=exports.NO_BATCHING_WITH_CONTINUOUS_CACHING_STRATEGY=3;var JS_DOC_URL=exports.JS_DOC_URL='https://docs.developers.flagship.io/docs/js-v3';var PANIC_MODE_DOC_URL=exports.PANIC_MODE_DOC_URL='https://docs.developers.flagship.io/docs/glossary#panic-mode';var INITIALIZATION_PARAM_ERROR=exports.INITIALIZATION_PARAM_ERROR=`Params 'envId' and 'apiKey' must not be null or empty.
  Learn more: ${JS_DOC_URL}#initialization`;var ERROR=exports.ERROR='error';var CONTEXT_NULL_ERROR=exports.CONTEXT_NULL_ERROR='Context must not to be null';var CONTEXT_PARAM_ERROR=exports.CONTEXT_PARAM_ERROR="params {0} must be a non null String, and 'value' must be one of the following types , Number, Boolean";var GET_MODIFICATION_CAST_ERROR=exports.GET_MODIFICATION_CAST_ERROR='Modification for key {0} has a different type. Default value is returned.';var GET_MODIFICATION_MISSING_ERROR=exports.GET_MODIFICATION_MISSING_ERROR='No modification for key {0}. Default value is returned.';var GET_MODIFICATION_KEY_ERROR=exports.GET_MODIFICATION_KEY_ERROR='Key {0} must not be null. Default value is returned.';var ACTIVATE_MODIFICATION_KEY_ERROR=exports.ACTIVATE_MODIFICATION_KEY_ERROR='Key {0} must not be null, no activate will be sent.';var GET_MODIFICATION_ERROR=exports.GET_MODIFICATION_ERROR='No modification for key {0}.';var GET_FLAG_ERROR=exports.GET_FLAG_ERROR='No flag for key {0}.';var ACTIVATE_MODIFICATION_ERROR=exports.ACTIVATE_MODIFICATION_ERROR='No modification for key {0}, no activate will be sent.';var DECISION_MANAGER_MISSING_ERROR=exports.DECISION_MANAGER_MISSING_ERROR='decisionManager must not be null.';var TRACKER_MANAGER_MISSING_ERROR=exports.TRACKER_MANAGER_MISSING_ERROR='trackerManager must not be null.';var CURL_LIBRARY_IS_NOT_LOADED=exports.CURL_LIBRARY_IS_NOT_LOADED='curl library is not loaded';var TYPE_ERROR=exports.TYPE_ERROR='{0} must be a {1}';var TYPE_INTEGER_ERROR=exports.TYPE_INTEGER_ERROR='value of {0} is not an {1}, it will be truncated to {1}';var VISITOR_ID_ERROR=exports.VISITOR_ID_ERROR='visitorId must not be null or empty';var PANIC_MODE_ERROR=exports.PANIC_MODE_ERROR='{0} deactivated while panic mode is on.';var METHOD_DEACTIVATED_CONSENT_ERROR=exports.METHOD_DEACTIVATED_CONSENT_ERROR='Method {0} is deactivated for visitor {1} : visitor did not consent.';var METHOD_DEACTIVATED_ERROR=exports.METHOD_DEACTIVATED_ERROR='Visitor {0}, method {1} is deactivated while SDK status is: {2}.';var METHOD_DEACTIVATED_SEND_CONSENT_ERROR=exports.METHOD_DEACTIVATED_SEND_CONSENT_ERROR='Send consent hit is deactivated while SDK status is: {1}.';var TROUBLESHOOTING_HIT_ADDED_IN_QUEUE=exports.TROUBLESHOOTING_HIT_ADDED_IN_QUEUE='The TROUBLESHOOTING HIT has been added to the pool queue : {0}';var ANALYTICS_HIT_ADDED_IN_QUEUE=exports.ANALYTICS_HIT_ADDED_IN_QUEUE='The USAGE HIT has been added to the pool queue : {0}';var ACTIVATE_ADDED_IN_QUEUE=exports.ACTIVATE_ADDED_IN_QUEUE='The ACTIVATE has been added to the pool queue : {0}';var HIT_ADDED_IN_QUEUE=exports.HIT_ADDED_IN_QUEUE='The HIT has been added into the pool queue : {0}';var ADD_HIT=exports.ADD_HIT='ADD HIT';var ADD_TROUBLESHOOTING_HIT=exports.ADD_TROUBLESHOOTING_HIT='ADD TROUBLESHOOTING HIT';var ADD_USAGE_HIT=exports.ADD_USAGE_HIT='ADD USAGE HIT';var ADD_ACTIVATE=exports.ADD_ACTIVATE='ADD ACTIVATE';var BATCH_SENT_SUCCESS=exports.BATCH_SENT_SUCCESS='Batch hit has been sent : {0}';var TROUBLESHOOTING_SENT_SUCCESS=exports.TROUBLESHOOTING_SENT_SUCCESS='Troubleshooting hit has been sent : {0}';var ANALYTICS_HIT_SENT_SUCCESS=exports.ANALYTICS_HIT_SENT_SUCCESS='Usage hit has been sent : {0}';var ACTIVATE_SENT_SUCCESS=exports.ACTIVATE_SENT_SUCCESS='Activate hit has been sent : {0}';var SEND_BATCH=exports.SEND_BATCH='SEND BATCH';var SEND_TROUBLESHOOTING=exports.SEND_TROUBLESHOOTING='SEND TROUBLESHOOTING';var SEND_USAGE_HIT=exports.SEND_USAGE_HIT='SEND USAGE HIT';var SEND_ACTIVATE=exports.SEND_ACTIVATE='SEND ACTIVATE';var SEND_SEGMENT_HIT=exports.SEND_SEGMENT_HIT='SEND SEGMENT HIT';var SEND_HIT=exports.SEND_HIT='SEND HIT';var EVENT_SUFFIX=exports.EVENT_SUFFIX='events';var FETCH_FLAGS_BUFFERING_MESSAGE=exports.FETCH_FLAGS_BUFFERING_MESSAGE='Visitor {0}, fetchFlags has been ignored and will continue to be ignored for the next {1}ms, this delay can be changed with `fetchFlagsBufferingTime` option in the SDK config';var VISITOR_SYNC_FLAGS_MESSAGE=exports.VISITOR_SYNC_FLAGS_MESSAGE='without calling `fetchFlags` method afterwards. So, the value of the flag `{1}` might be outdated';var NEW_VISITOR_NOT_READY=exports.NEW_VISITOR_NOT_READY=`You can't create a new visitor without first calling the "Flagship.start" method.
Learn more: ${JS_DOC_URL}#initialization
`;var LOOKUP_HITS_JSON_OBJECT_ERROR=exports.LOOKUP_HITS_JSON_OBJECT_ERROR='JSON DATA must fit the type HitCacheDTO';var ACTIVATE_BATCH_LENGTH=exports.ACTIVATE_BATCH_LENGTH=5;var PROCESS=exports.PROCESS='process';var PROCESS_INITIALIZATION=exports.PROCESS_INITIALIZATION='INITIALIZATION';var PROCESS_UPDATE_CONTEXT=exports.PROCESS_UPDATE_CONTEXT='UPDATE CONTEXT';var PROCESS_GET_MODIFICATION=exports.PROCESS_GET_MODIFICATION='GET MODIFICATION';var PROCESS_GET_MODIFICATION_INFO=exports.PROCESS_GET_MODIFICATION_INFO='GET MODIFICATION INFO';var PROCESS_NEW_VISITOR=exports.PROCESS_NEW_VISITOR='NEW VISITOR';var PROCESS_ACTIVE_MODIFICATION=exports.PROCESS_ACTIVE_MODIFICATION='ACTIVE MODIFICATION';var PROCESS_SYNCHRONIZED_MODIFICATION=exports.PROCESS_SYNCHRONIZED_MODIFICATION='SYNCHRONIZED MODIFICATION';var PROCESS_SEND_HIT=exports.PROCESS_SEND_HIT='ADD HIT';var PROCESS_SEND_ACTIVATE=exports.PROCESS_SEND_ACTIVATE='SEND ACTIVATE';var PROCESS_GET_CAMPAIGNS=exports.PROCESS_GET_CAMPAIGNS='GET CAMPAIGNS';var PROCESS_GET_ALL_MODIFICATION=exports.PROCESS_GET_ALL_MODIFICATION='GET ALL MODIFICATIONS';var PROCESS_MODIFICATIONS_FOR_CAMPAIGN=exports.PROCESS_MODIFICATIONS_FOR_CAMPAIGN='GET MODIFICATION FOR CAMPAIGN';var PROCESS_CACHE_HIT=exports.PROCESS_CACHE_HIT='CACHE HIT';var PROCESS_FLUSH_HIT=exports.PROCESS_FLUSH_HIT='FLUSH HIT';var PROCESS_LOOKUP_HIT=exports.PROCESS_LOOKUP_HIT='LOOKUP HIT';var BATCH=exports.BATCH='batch';var CUSTOMER_ENV_ID_API_ITEM=exports.CUSTOMER_ENV_ID_API_ITEM='cid';var CUSTOMER_ENV_ID_API_ACTIVATE=exports.CUSTOMER_ENV_ID_API_ACTIVATE='cid';var CUSTOMER_UID=exports.CUSTOMER_UID='cuid';var ANONYMOUS_ID=exports.ANONYMOUS_ID='aid';var VISITOR_ID_API_ITEM=exports.VISITOR_ID_API_ITEM='vid';var VARIATION_GROUP_ID_API_ITEM=exports.VARIATION_GROUP_ID_API_ITEM='caid';var VARIATION_GROUP_ID_API_ITEM_ACTIVATE=exports.VARIATION_GROUP_ID_API_ITEM_ACTIVATE='caid';var VISITOR_CONSENT=exports.VISITOR_CONSENT='vc';var CAMPAIGN_ID=exports.CAMPAIGN_ID='caid';var VARIATION_ID_API_ITEM=exports.VARIATION_ID_API_ITEM='vaid';var DS_API_ITEM=exports.DS_API_ITEM='ds';var T_API_ITEM=exports.T_API_ITEM='t';var QT_API_ITEM=exports.QT_API_ITEM='qt';var QA_MODE_API_ITEM=exports.QA_MODE_API_ITEM='qa';var DL_API_ITEM=exports.DL_API_ITEM='dl';var SL_ITEM=exports.SL_ITEM='sl';var SDK_APP=exports.SDK_APP='APP';var TID_API_ITEM=exports.TID_API_ITEM='tid';var TA_API_ITEM=exports.TA_API_ITEM='ta';var TT_API_ITEM=exports.TT_API_ITEM='tt';var TC_API_ITEM=exports.TC_API_ITEM='tc';var TCC_API_ITEM=exports.TCC_API_ITEM='tcc';var ICN_API_ITEM=exports.ICN_API_ITEM='icn';var SM_API_ITEM=exports.SM_API_ITEM='sm';var PM_API_ITEM=exports.PM_API_ITEM='pm';var TR_API_ITEM=exports.TR_API_ITEM='tr';var TS_API_ITEM=exports.TS_API_ITEM='ts';var IN_API_ITEM=exports.IN_API_ITEM='in';var IC_API_ITEM=exports.IC_API_ITEM='ic';var IP_API_ITEM=exports.IP_API_ITEM='ip';var IQ_API_ITEM=exports.IQ_API_ITEM='iq';var IV_API_ITEM=exports.IV_API_ITEM='iv';var S_API_ITEM=exports.S_API_ITEM='s';var EVENT_CATEGORY_API_ITEM=exports.EVENT_CATEGORY_API_ITEM='ec';var EVENT_ACTION_API_ITEM=exports.EVENT_ACTION_API_ITEM='ea';var EVENT_LABEL_API_ITEM=exports.EVENT_LABEL_API_ITEM='el';var EVENT_VALUE_API_ITEM=exports.EVENT_VALUE_API_ITEM='ev';var USER_IP_API_ITEM=exports.USER_IP_API_ITEM='uip';var SCREEN_RESOLUTION_API_ITEM=exports.SCREEN_RESOLUTION_API_ITEM='sr';var USER_LANGUAGE=exports.USER_LANGUAGE='ul';var SESSION_NUMBER=exports.SESSION_NUMBER='sn';var HEADER_X_API_KEY=exports.HEADER_X_API_KEY='x-api-key';var HEADER_X_ENV_ID=exports.HEADER_X_ENV_ID='x-env-id';var HEADER_CONTENT_TYPE=exports.HEADER_CONTENT_TYPE='Content-Type';var HEADER_X_SDK_CLIENT=exports.HEADER_X_SDK_CLIENT='x-sdk-client';var HEADER_X_SDK_VERSION=exports.HEADER_X_SDK_VERSION='x-sdk-version';var HEADER_APPLICATION_JSON=exports.HEADER_APPLICATION_JSON='application/json';var INITIALIZATION_STARTING=exports.INITIALIZATION_STARTING='Flagship SDK version {0} is starting in {1} mode with config {2}';var BUCKETING_POOLING_STARTED=exports.BUCKETING_POOLING_STARTED='Bucketing polling process has been started';var BUCKETING_POOLING_STOPPED=exports.BUCKETING_POOLING_STOPPED='Bucketing polling process has been stopped';var PROCESS_BUCKETING=exports.PROCESS_BUCKETING='BUCKETING';var POLLING_EVENT_200=exports.POLLING_EVENT_200='Polling event with code status 200 : {0}';var POLLING_EVENT_300=exports.POLLING_EVENT_300='Polling event with code status 304';var POLLING_EVENT_FAILED=exports.POLLING_EVENT_FAILED='Polling event failed with error';var PROCESS_SDK_STATUS=exports.PROCESS_SDK_STATUS='SDK STATUS';var SDK_STATUS_CHANGED=exports.SDK_STATUS_CHANGED='SDK status has changed:  {0}';var SAVE_VISITOR_INSTANCE=exports.SAVE_VISITOR_INSTANCE='Visitor {0} has been saved in SDK instance';var VISITOR_CREATED=exports.VISITOR_CREATED='Visitor {0} has been created with context {1}, isAuthenticated:{2} and hasConsented {3}';var VISITOR_PROFILE_LOADED=exports.VISITOR_PROFILE_LOADED='Visitor profile has been loaded {0}';var VISITOR_ID_FROM_AB_TASTY_TAG=exports.VISITOR_ID_FROM_AB_TASTY_TAG="The visitor ID '{0}' has been retrieved from ABTasty tag";var VISITOR_ID_GENERATED=exports.VISITOR_ID_GENERATED='Visitor identifier is empty. A UUID {0} has been generated.';var PREDEFINED_CONTEXT_LOADED=exports.PREDEFINED_CONTEXT_LOADED='Predefined Context have been loaded {0}';var CONTEXT_KEY_ERROR=exports.CONTEXT_KEY_ERROR=`Visitor {0}, the key '{1}' must be a non null String.
Learn more: ${JS_DOC_URL}#updating-the-visitor-context`;var CONTEXT_VALUE_ERROR=exports.CONTEXT_VALUE_ERROR=`Visitor {0}, 'value' for key '{1}[], must be one of the following types : String, Number, Boolean
Learn more: ${JS_DOC_URL}#updating-the-visitor-context`;var PREDEFINED_CONTEXT_TYPE_ERROR=exports.PREDEFINED_CONTEXT_TYPE_ERROR=`visitor {0}, Predefined Context {0} must be of type {1}
Learn more: ${JS_DOC_URL}#predefined-user-context-keys-`;var CONTEXT_KEY_VALUE_UPDATE=exports.CONTEXT_KEY_VALUE_UPDATE='visitor `{0}`, context have been updated: key {1}, value {2}, Context {3}';var CONTEXT_OBJET_PARAM_UPDATE=exports.CONTEXT_OBJET_PARAM_UPDATE='visitor `{0}`, context have been updated: key/value {1}, Context {2}';var CLEAR_CONTEXT=exports.CLEAR_CONTEXT='visitor `{0}`, context has been cleared cleared `{1}`';var PROCESS_CLEAR_CONTEXT=exports.PROCESS_CLEAR_CONTEXT='CLEAR_CONTEXT';var CONSENT_CHANGED=exports.CONSENT_CHANGED='Visitor `{0}` consent has been changed : {1}';var PROCESS_SET_CONSENT=exports.PROCESS_SET_CONSENT='SET_CONSENT';var FETCH_CAMPAIGNS_SUCCESS=exports.FETCH_CAMPAIGNS_SUCCESS='Visitor {0}, anonymousId {1} with context {2} has just fetched campaigns {3} in {4} ms';var FETCH_CAMPAIGNS_FROM_CACHE=exports.FETCH_CAMPAIGNS_FROM_CACHE='Visitor {0}, anonymousId {1} with context {2} has just fetched campaigns from cache {3} in {4} ms';var FETCH_FLAGS_FROM_CAMPAIGNS=exports.FETCH_FLAGS_FROM_CAMPAIGNS='Visitor {0}, anonymousId {1} with context {2} has just fetched flags {3} from Campaigns';var FETCH_FLAGS_STARTED=exports.FETCH_FLAGS_STARTED='visitor `{0}` fetchFlags process is started';var FETCH_FLAGS_PANIC_MODE=exports.FETCH_FLAGS_PANIC_MODE='Panic mode is enabled : all feature are disabled except fetchFlags.';var PROCESS_FETCHING_FLAGS=exports.PROCESS_FETCHING_FLAGS='FETCH_FLAGS';var GET_FLAG_MISSING_ERROR=exports.GET_FLAG_MISSING_ERROR='For the visitor "{0}", no flags were found with the key "{1}". Therefore, the default value "{2}" has been returned.';var GET_FLAG_NOT_FOUND=exports.GET_FLAG_NOT_FOUND='For the visitor "{0}", no flags were found with the key "{1}". Therefore, an empty flag has been returned.';var FETCH_FLAGS_MISSING=exports.FETCH_FLAGS_MISSING='Visitor {0} has {1} without calling fetchFlags method, ';var FLAG_VALUE=exports.FLAG_VALUE='FLAG_VALUE';var GET_FLAG=exports.GET_FLAG='GET_FLAG';var GET_FLAG_CAST_ERROR=exports.GET_FLAG_CAST_ERROR='For the visitor "{0}", the flag with key "{1}" has a different type compared to the default value. Therefore, the default value "{2}" has been returned.';var GET_FLAG_VALUE=exports.GET_FLAG_VALUE='Visitor {0}, Flag for key {1} returns value {2}';var USER_EXPOSED_FLAG_ERROR=exports.USER_EXPOSED_FLAG_ERROR='For the visitor "{0}", no flags were found with the key "{1}". As a result, user exposure will not be sent.';var VISITOR_EXPOSED_VALUE_NOT_CALLED=exports.VISITOR_EXPOSED_VALUE_NOT_CALLED='For the visitor `{0}`,assuming the getValue() method has not previously been invoked for the flag `{0}`. Therefore, the exposure is canceled';var FLAG_VISITOR_EXPOSED=exports.FLAG_VISITOR_EXPOSED='FLAG_VISITOR_EXPOSED';var USER_EXPOSED_CAST_ERROR=exports.USER_EXPOSED_CAST_ERROR='For the visitor `{0}, the flag with the key `{0}` has a different type compared to the default value. Therefore, the exposure is interrupted';var GET_METADATA_CAST_ERROR=exports.GET_METADATA_CAST_ERROR='Visitor {0}, Flag for key {1} has a different type with default value: Empty metadata object is returned {2}';var FLAG_METADATA=exports.FLAG_METADATA='FLAG_METADATA';var NO_FLAG_METADATA=exports.NO_FLAG_METADATA='Visitor {0}, No Flags found for key {1}:  Empty metadata object is returned';var METADATA_SDK_NOT_READY=exports.METADATA_SDK_NOT_READY=`Visitor {0}, Flag for key {1} Method Flag.metadata is deactivated while SDK status is NOT_READY: Empty metadata object is returned {2}
Learn more: ${JS_DOC_URL}#getting-flags-campaigns-metadata`;var METADATA_PANIC_MODE=exports.METADATA_PANIC_MODE=`Visitor {0}, Flag for key {1} Method Flag.metadata is deactivated while SDK status is PANIC: Empty metadata object is returned {2}
Learn more: ${PANIC_MODE_DOC_URL}`;var AUTHENTICATE=exports.AUTHENTICATE='AUTHENTICATE';var VISITOR_AUTHENTICATE=exports.VISITOR_AUTHENTICATE='The visitor is authenticated with new visitor ID {0} anonymous ID {1}';var VISITOR_ALREADY_AUTHENTICATE=exports.VISITOR_ALREADY_AUTHENTICATE='The visitor is already authenticated with visitor ID {0}';var METHOD_DEACTIVATED_BUCKETING_ERROR=exports.METHOD_DEACTIVATED_BUCKETING_ERROR='Visitor {0}, Method {1} is deactivated on Bucketing mode';var VISITOR_AUTHENTICATE_VISITOR_ID_ERROR=exports.VISITOR_AUTHENTICATE_VISITOR_ID_ERROR=`Visitor {0}, visitorId must not be null or empty
Learn more: ${JS_DOC_URL}#authenticate`;var VISITOR_UNAUTHENTICATE=exports.VISITOR_UNAUTHENTICATE='The visitor is unauthenticated with visitor ID {0}';var UNAUTHENTICATE=exports.UNAUTHENTICATE='UNAUTHENTICATE';var FLAGSHIP_VISITOR_NOT_AUTHENTICATE=exports.FLAGSHIP_VISITOR_NOT_AUTHENTICATE='Visitor {0} is not authenticated yet';var ALLOCATION=exports.ALLOCATION='ALLOCATION';var BUCKETING_VARIATION_CACHE=exports.BUCKETING_VARIATION_CACHE='Visitor {0}, Variation {1} selected from cache.';var BUCKETING_NEW_ALLOCATION=exports.BUCKETING_NEW_ALLOCATION='Visitor {0}, Variation {1} selected with allocation {2}.';var LOOKUP_VISITOR_JSON_OBJECT_ERROR=exports.LOOKUP_VISITOR_JSON_OBJECT_ERROR=`lookupVisitor method has loaded a bad format version ({0}) for visitor {1}.
Learn more: ${JS_DOC_URL}#managing-visitor-cache`;var PROCESS_CACHE=exports.PROCESS_CACHE='CACHE';var VISITOR_CACHE_ERROR=exports.VISITOR_CACHE_ERROR='visitor {0}. {1} threw an exception {2}';var HIT_CACHE_ERROR=exports.HIT_CACHE_ERROR='{0} threw an exception {1}';var VISITOR_CACHE_LOADED=exports.VISITOR_CACHE_LOADED='Visitor {0}, visitor cache has been loaded from database: {1}';var VISITOR_CACHE_SAVED=exports.VISITOR_CACHE_SAVED='Visitor {0}, visitor cache has been saved into database : {0}';var VISITOR_CACHE_FLUSHED=exports.VISITOR_CACHE_FLUSHED='Visitor {0}, visitor cache has been flushed from database.';var HIT_CACHE_LOADED=exports.HIT_CACHE_LOADED='Hits cache has been loaded from database: {0}';var HIT_CACHE_SAVED=exports.HIT_CACHE_SAVED='Hit cache has been saved into database : {0}';var HIT_DATA_FLUSHED=exports.HIT_DATA_FLUSHED='The following hit keys have been flushed from database : {0}';var ALL_HITS_FLUSHED=exports.ALL_HITS_FLUSHED='All hits cache has been flushed from database';var BATCH_LOOP_STARTED=exports.BATCH_LOOP_STARTED='The Batch Loop has been started with a time interval of {0} ms';var TRACKING_MANAGER=exports.TRACKING_MANAGER='TRACKING_MANAGER';var BATCH_LOOP_STOPPED=exports.BATCH_LOOP_STOPPED='The Batch Loop has been stopped';var TRACKING_MANAGER_ERROR=exports.TRACKING_MANAGER_ERROR='{0} Unexpected Error occurred {1}';var HIT_SENT_SUCCESS=exports.HIT_SENT_SUCCESS='{0} has been sent : {1}';var ACTIVATE_HIT=exports.ACTIVATE_HIT='ACTIVATE HIT';var BATCH_HIT=exports.BATCH_HIT='BATCH HIT';var DIRECT_HIT=exports.DIRECT_HIT='HIT';var GET_THIRD_PARTY_SEGMENT=exports.GET_THIRD_PARTY_SEGMENT='GET_THIRD_PARTY_SEGMENT';var CONSENT_NOT_SPECIFY_WARNING=exports.CONSENT_NOT_SPECIFY_WARNING='Consent has not been specified. By default, consent is set to false, which may result in some features being deactivated.';var ACTION_TRACKING=exports.ACTION_TRACKING='Action Tracking';var ACTION_TRACKING_HIT_RECEIVED=exports.ACTION_TRACKING_HIT_RECEIVED='Hit received: {0}';var ACTION_TRACKING_INVALID_HIT=exports.ACTION_TRACKING_INVALID_HIT='Invalid hit data: {0}';var ACTION_TRACKING_INVALID_NONCE=exports.ACTION_TRACKING_INVALID_NONCE='Invalid nonce: {0}';var ACTION_TRACKING_SENDING_HIT=exports.ACTION_TRACKING_SENDING_HIT='Sending hit: {0}';var ACTION_TRACKING_SENDING_HIT_ERROR=exports.ACTION_TRACKING_SENDING_HIT_ERROR='Failed to send hit: {0}';var ACTION_TRACKING_DISPATCHED=exports.ACTION_TRACKING_DISPATCHED='action tracking hits have been dispatched {0}';var TRUSTED_QA_ORIGINS=exports.TRUSTED_QA_ORIGINS=['https://local-qa-assistant.abtasty.com:5000','https://staging-qa-assistant.abtasty.com','https://qa-assistant.abtasty.com','https://qa-assistant.flagship.io','https://local-qa-assistant.flagship.io:5000','https://staging-qa-assistant.flagship.io'];

/***/ }),

/***/ 2223:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Segment=exports.ERROR_MESSAGE=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var ERROR_MESSAGE=exports.ERROR_MESSAGE='data property is required';var Segment=exports.Segment=function(_HitAbstract){function Segment(param){var _this;(0,_classCallCheck2.default)(this,Segment);_this=_callSuper(this,Segment,[{type:'SEGMENT',userIp:param.userIp,screenResolution:param.screenResolution,locale:param.locale,sessionNumber:param.sessionNumber,visitorId:param.visitorId,anonymousId:param.anonymousId,qaMode:param.qaMode,isActionTrackingHit:param.isActionTrackingHit}]);_this.context=param.context;return _this;}(0,_inherits2.default)(Segment,_HitAbstract);return(0,_createClass2.default)(Segment,[{key:"context",get:function get(){return this._context;},set:function set(v){this._context=v;}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!((!checkParent||_superPropGet(Segment,"isReady",this,3)([]))&&this.context);}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys=_superPropGet(Segment,"toApiKeys",this,3)([]);apiKeys[_index.S_API_ITEM]=this.context;return apiKeys;}},{key:"toObject",value:function toObject(){return Object.assign({},_superPropGet(Segment,"toObject",this,3)([]),{context:this.context});}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 2305:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.FSFlagStatus=void 0;var FSFlagStatus=exports.FSFlagStatus=function(FSFlagStatus){FSFlagStatus["FETCHED"]="FETCHED";FSFlagStatus["FETCH_REQUIRED"]="FETCH_REQUIRED";FSFlagStatus["NOT_FOUND"]="NOT_FOUND";FSFlagStatus["PANIC"]="PANIC";return FSFlagStatus;}({});

/***/ }),

/***/ 2422:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.VALUE_FIELD_ERROR=exports.Event=exports.ERROR_MESSAGE=exports.CATEGORY_ERROR=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _HitType=__webpack_require__(1197);var _utils=__webpack_require__(9647);var _EventCategory=__webpack_require__(8010);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var ERROR_MESSAGE=exports.ERROR_MESSAGE='event category and event action are required';var CATEGORY_ERROR=exports.CATEGORY_ERROR='The category value must be either EventCategory::ACTION_TRACKING or EventCategory::ACTION_TRACKING';var VALUE_FIELD_ERROR=exports.VALUE_FIELD_ERROR='value must be an integer and be >= 0';var Event=exports.Event=function(_HitAbstract){function Event(param){var _this;(0,_classCallCheck2.default)(this,Event);_this=_callSuper(this,Event,[{type:_HitType.HitType.EVENT,userIp:param.userIp,screenResolution:param.screenResolution,locale:param.locale,sessionNumber:param.sessionNumber,visitorId:param.visitorId,anonymousId:param.anonymousId,qaMode:param.qaMode,isActionTrackingHit:param.isActionTrackingHit}]);var category=param.category,action=param.action,label=param.label,value=param.value;_this.category=category;_this.action=action;if(label){_this.label=label;}if(value){_this.value=value;}return _this;}(0,_inherits2.default)(Event,_HitAbstract);return(0,_createClass2.default)(Event,[{key:"category",get:function get(){return this._category;},set:function set(v){if(!Object.values(_EventCategory.EventCategory).includes(v)){(0,_utils.logError)(this.config,CATEGORY_ERROR,'category');return;}this._category=v;}},{key:"action",get:function get(){return this._action;},set:function set(v){if(!this.isNotEmptyString(v,'action')){return;}this._action=v;}},{key:"label",get:function get(){return this._label;},set:function set(v){if(!this.isNotEmptyString(v,'label')){return;}this._label=v;}},{key:"value",get:function get(){return this._value;},set:function set(v){if(!Number.isInteger(v)||v<0){(0,_utils.logError)(this.config,VALUE_FIELD_ERROR,'value');return;}this._value=v;}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys=_superPropGet(Event,"toApiKeys",this,3)([]);apiKeys[_FlagshipConstant.EVENT_CATEGORY_API_ITEM]=this.category;apiKeys[_FlagshipConstant.EVENT_ACTION_API_ITEM]=this.action;if(this.label){apiKeys[_FlagshipConstant.EVENT_LABEL_API_ITEM]=this.label;}if(this.value){apiKeys[_FlagshipConstant.EVENT_VALUE_API_ITEM]=this.value;}return apiKeys;}},{key:"toObject",value:function toObject(){return Object.assign({},_superPropGet(Event,"toObject",this,3)([]),{category:this.category,action:this.action,label:this.label,value:this.value});}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!((!checkParent||_superPropGet(Event,"isReady",this,3)([]))&&this.category&&this.action);}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 2462:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/objectWithoutProperties");

/***/ }),

/***/ 2659:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.forceVariation=forceVariation;var _utils=__webpack_require__(9647);function forceVariation(_ref){var flagDTO=_ref.flagDTO,config=_ref.config,visitorVariationState=_ref.visitorVariationState;if(false){ var value, campaignId, campaignName, variationGroupId, variationGroupName, campaignType, CampaignSlug, variation, forcedVariation; }return undefined;}

/***/ }),

/***/ 2716:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.VisitorDelegate=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _VisitorAbstract2=__webpack_require__(5321);var _FsFlags=__webpack_require__(8405);var _utils=__webpack_require__(9647);var _FlagshipConstant=__webpack_require__(1786);var _FSFetchStatus=__webpack_require__(9807);var _FSFlagCollection=__webpack_require__(2966);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var VisitorDelegate=exports.VisitorDelegate=function(_VisitorAbstract){function VisitorDelegate(){(0,_classCallCheck2.default)(this,VisitorDelegate);return _callSuper(this,VisitorDelegate,arguments);}(0,_inherits2.default)(VisitorDelegate,_VisitorAbstract);return(0,_createClass2.default)(VisitorDelegate,[{key:"updateContext",value:function updateContext(context,value){this.getStrategy().updateContext(context,value);this.loadPredefinedContext();}},{key:"clearContext",value:function clearContext(){this.getStrategy().clearContext();}},{key:"getFlag",value:function getFlag(key){if(this.flagsStatus.status!==_FSFetchStatus.FSFetchStatus.FETCHED&&this.flagsStatus.status!==_FSFetchStatus.FSFetchStatus.FETCHING&&this.flagsStatus.status!==_FSFetchStatus.FSFetchStatus.INITIAL_DATA){(0,_utils.logWarningSprintf)(this.config,_FlagshipConstant.GET_FLAG,(0,_utils.visitorFlagSyncStatusMessage)(this.flagsStatus.reason),this.visitorId,key);}return new _FsFlags.FSFlag({key:key,visitor:this});}},{key:"getFlags",value:function getFlags(){return new _FSFlagCollection.FSFlagCollection({visitor:this});}},{key:"sendHit",value:function sendHit(hit){return this.getStrategy().sendHit(hit);}},{key:"sendHits",value:function sendHits(hits){return this.getStrategy().sendHits(hits);}},{key:"authenticate",value:function authenticate(visitorId){this.getStrategy().authenticate(visitorId);this.updateCache();}},{key:"unauthenticate",value:function unauthenticate(){this.getStrategy().unauthenticate();this.updateCache();}},{key:"fetchFlags",value:function(){var _fetchFlags=(0,_asyncToGenerator2.default)(function*(){yield this.getStrategy().fetchFlags();});function fetchFlags(){return _fetchFlags.apply(this,arguments);}return fetchFlags;}()},{key:"visitorExposed",value:function visitorExposed(param){return this.getStrategy().visitorExposed(param);}},{key:"getFlagValue",value:function getFlagValue(param){return this.getStrategy().getFlagValue(param);}},{key:"getFlagMetadata",value:function getFlagMetadata(param){return this.getStrategy().getFlagMetadata(param);}}]);}(_VisitorAbstract2.VisitorAbstract);

/***/ }),

/***/ 2750:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/inherits");

/***/ }),

/***/ 2877:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));

/***/ }),

/***/ 2966:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.FSFlagCollection=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _utils=__webpack_require__(9647);var _FsFlags=__webpack_require__(8405);var _FlagshipConstant=__webpack_require__(1786);var FSFlagCollection=exports.FSFlagCollection=function(){function FSFlagCollection(param){var _this=this;(0,_classCallCheck2.default)(this,FSFlagCollection);this._keys=new Set();var visitor=param.visitor,flags=param.flags;this._visitor=visitor;this._flags=flags||new Map();if(this._flags.size===0){this._keys=new Set(visitor==null?void 0:visitor.flagsData.keys());this._keys.forEach(function(key){_this._flags.set(key,new _FsFlags.FSFlag({key:key,visitor:visitor}));});}else{this._keys=new Set(this._flags.keys());}}return(0,_createClass2.default)(FSFlagCollection,[{key:"size",get:function get(){return this._keys.size;}},{key:"get",value:function get(key){var flag=this._flags.get(key);if(!flag){var _this$_visitor;if((_this$_visitor=this._visitor)!=null&&_this$_visitor.config){(0,_utils.logWarningSprintf)(this._visitor.config,_FlagshipConstant.GET_FLAG,_FlagshipConstant.GET_FLAG_NOT_FOUND,this._visitor.visitorId,key);}return new _FsFlags.FSFlag({key:key});}return flag;}},{key:"has",value:function has(key){return this._keys.has(key);}},{key:"keys",value:function keys(){return this._keys;}},{key:Symbol.iterator,value:function value(){var _this2=this;var index=0;var keysArray=Array.from(this._keys);return{next:function next(){if(index<keysArray.length){var key=keysArray[index++];return{value:[key,_this2._flags.get(key)],done:false};}else{return{value:null,done:true};}}};}},{key:"filter",value:function filter(predicate){var _this3=this;var flags=new Map();this._flags.forEach(function(flag,key){if(predicate(flag,key,_this3)){flags.set(key,flag);}});return new FSFlagCollection({visitor:this._visitor,flags:flags});}},{key:"exposeAll",value:(function(){var _exposeAll=(0,_asyncToGenerator2.default)(function*(){yield Promise.all(Array.from(this._flags.values(),function(flag){return flag.visitorExposed();}));});function exposeAll(){return _exposeAll.apply(this,arguments);}return exposeAll;}())},{key:"getMetadata",value:function getMetadata(){var metadata=new Map();this._flags.forEach(function(flag,key){metadata.set(key,flag.metadata);});return metadata;}},{key:"toJSON",value:function toJSON(){var serializedData=[];this._flags.forEach(function(flag,key){var metadata=flag.metadata;serializedData.push({key:key,campaignId:metadata.campaignId,campaignName:metadata.campaignName,variationGroupId:metadata.variationGroupId,variationGroupName:metadata.variationGroupName,variationId:metadata.variationId,variationName:metadata.variationName,isReference:metadata.isReference,campaignType:metadata.campaignType,slug:metadata.slug,hex:(0,_utils.valueToHex)({v:flag.getValue(null,false)})});});return serializedData;}},{key:"forEach",value:function forEach(callbackfn){var _this4=this;this._flags.forEach(function(flag,key){callbackfn(flag,key,_this4);});}}]);}();

/***/ }),

/***/ 3046:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Flagship=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _Visitor=__webpack_require__(987);var _FSSdkStatus=__webpack_require__(6691);var _index=__webpack_require__(8747);var _ConfigManager=__webpack_require__(3998);var _ApiManager=__webpack_require__(736);var _TrackingManager=__webpack_require__(5235);var _FlagshipLogManager=__webpack_require__(8929);var _utils=__webpack_require__(9647);var _index2=__webpack_require__(3664);var _VisitorDelegate=__webpack_require__(2716);var _BucketingManager=__webpack_require__(7118);var _MurmurHash=__webpack_require__(6572);var _HttpClient=__webpack_require__(751);var _types=__webpack_require__(3957);var _EdgeManager=__webpack_require__(5119);var _EdgeConfig=__webpack_require__(796);var _VisitorAbstract=__webpack_require__(5321);var _BucketingSdkManager=__webpack_require__(17);var _EdgeSdkManager=__webpack_require__(8868);var _ApiSdkManager=__webpack_require__(6623);var _EmotionAI=__webpack_require__(6724);var _VisitorProfileCache=__webpack_require__(9635);var _DefaultVisitorCache=__webpack_require__(6228);var _DefaultHitCache=__webpack_require__(517);var _SharedActionTracking=__webpack_require__(4122);var _SdkApi=__webpack_require__(4267);var Flagship=exports.Flagship=function(){function Flagship(){(0,_classCallCheck2.default)(this,Flagship);this.instanceId=(0,_utils.uuidV4)();this._status=_FSSdkStatus.FSSdkStatus.SDK_NOT_INITIALIZED;var extendedFlagship=Flagship;extendedFlagship.setVisitorProfile=function(value){Flagship.visitorProfile=value;};extendedFlagship.getVisitorProfile=function(){return Flagship.visitorProfile;};extendedFlagship.setOnSaveVisitorProfile=function(value){Flagship.onSaveVisitorProfile=value;};extendedFlagship.getOnSaveVisitorProfile=function(){return Flagship.onSaveVisitorProfile;};this._visitorVariationState={};}return(0,_createClass2.default)(Flagship,[{key:"configManager",get:function get(){return this._configManager;},set:function set(value){this._configManager=value;}},{key:"setStatus",value:function setStatus(status){var _this$getConfig;if(this._status===status){return;}this._status=status;_VisitorAbstract.VisitorAbstract.SdkStatus=status;var statusChanged=(_this$getConfig=this.getConfig())==null?void 0:_this$getConfig.onSdkStatusChanged;(0,_utils.logInfoSprintf)(this._config,_index2.PROCESS_SDK_STATUS,_index2.SDK_STATUS_CHANGED,_FSSdkStatus.FSSdkStatus[status]);if(this.getConfig().decisionMode!==_index.DecisionMode.BUCKETING_EDGE){if(status===_FSSdkStatus.FSSdkStatus.SDK_INITIALIZED){var _this$configManager;(_this$configManager=this.configManager)==null||(_this$configManager=_this$configManager.trackingManager)==null||_this$configManager.startBatchingLoop();}if(status===_FSSdkStatus.FSSdkStatus.SDK_NOT_INITIALIZED){var _this$configManager2;(_this$configManager2=this.configManager)==null||(_this$configManager2=_this$configManager2.trackingManager)==null||_this$configManager2.stopBatchingLoop();}}if(statusChanged){statusChanged(status);}}},{key:"getStatus",value:function getStatus(){return this._status;}},{key:"getConfig",value:function getConfig(){return this._config;}},{key:"getVisitor",value:function getVisitor(){return this._visitorInstance;}},{key:"buildConfig",value:function buildConfig(config){var newConfig;switch(config==null?void 0:config.decisionMode){case _index.DecisionMode.BUCKETING:newConfig=new _index.BucketingConfig(config);break;case _index.DecisionMode.BUCKETING_EDGE:newConfig=new _EdgeConfig.EdgeConfig(config);break;default:newConfig=new _index.DecisionApiConfig(config);break;}return newConfig;}},{key:"createManagers",value:function createManagers(httpClient,sdkConfig,trackingManager){var sdkManager;switch(sdkConfig.decisionMode){case _index.DecisionMode.BUCKETING:sdkManager=new _BucketingSdkManager.BucketingSdkManager({httpClient:httpClient,sdkConfig:sdkConfig,trackingManager:trackingManager,flagshipInstanceId:this.instanceId});return{sdkManager:sdkManager,decisionManager:new _BucketingManager.BucketingManager({httpClient:httpClient,config:sdkConfig,murmurHash:new _MurmurHash.MurmurHash(),sdkManager:sdkManager,trackingManager:trackingManager,flagshipInstanceId:this.instanceId})};case _index.DecisionMode.BUCKETING_EDGE:sdkManager=new _EdgeSdkManager.EdgeSdkManager({httpClient:httpClient,sdkConfig:sdkConfig,trackingManager:trackingManager,flagshipInstanceId:this.instanceId});return{sdkManager:sdkManager,decisionManager:new _EdgeManager.EdgeManager({httpClient:httpClient,config:sdkConfig,murmurHash:new _MurmurHash.MurmurHash(),sdkManager:sdkManager,trackingManager:trackingManager,flagshipInstanceId:this.instanceId})};default:sdkManager=new _ApiSdkManager.ApiSdkManager({httpClient:httpClient,sdkConfig:sdkConfig,trackingManager:trackingManager,flagshipInstanceId:this.instanceId});return{sdkManager:sdkManager,decisionManager:new _ApiManager.ApiManager({trackingManager:trackingManager,httpClient:httpClient,config:sdkConfig,flagshipInstanceId:this.instanceId})};}}},{key:"buildSdkApi",value:function buildSdkApi(sharedActionTracking,sdkConfig){if(false){}}},{key:"sendInitializedPostMessage",value:function sendInitializedPostMessage(){if(false){}}},{key:"initializeSdk",value:function(){var _initializeSdk=(0,_asyncToGenerator2.default)(function*(sdkConfig){var _this$_sdkManager,_this$configManager3,_this$configManager4,_this$_sdkManager2;this.setStatus(_FSSdkStatus.FSSdkStatus.SDK_INITIALIZING);(_this$_sdkManager=this._sdkManager)==null||_this$_sdkManager.resetSdk();var sharedActionTracking=(_this$configManager3=this.configManager)==null?void 0:_this$configManager3.sharedActionTracking;if(false){}var httpClient=new _HttpClient.HttpClient();var trackingManager=((_this$configManager4=this.configManager)==null?void 0:_this$configManager4.trackingManager)||new _TrackingManager.TrackingManager(httpClient,sdkConfig,this.instanceId,sharedActionTracking);var _this$createManagers=this.createManagers(httpClient,sdkConfig,trackingManager),sdkManager=_this$createManagers.sdkManager,decisionManager=_this$createManagers.decisionManager;this._sdkManager=sdkManager;decisionManager.statusChangedCallback(this.setStatus.bind(this));decisionManager.flagshipInstanceId=this.instanceId;this.configManager=new _ConfigManager.ConfigManager(sdkConfig,decisionManager,trackingManager,sharedActionTracking);yield(_this$_sdkManager2=this._sdkManager)==null?void 0:_this$_sdkManager2.initSdk();this.setStatus(_FSSdkStatus.FSSdkStatus.SDK_INITIALIZED);});function initializeSdk(_x){return _initializeSdk.apply(this,arguments);}return initializeSdk;}()},{key:"close",value:(function(){var _close=(0,_asyncToGenerator2.default)(function*(){yield Flagship.close();});function close(){return _close.apply(this,arguments);}return close;}())},{key:"newVisitor",value:function newVisitor(params){return Flagship.newVisitor(params);}},{key:"initializeConfigManager",value:function initializeConfigManager(){var config=new _index.DecisionApiConfig();config.logManager=new _FlagshipLogManager.FlagshipLogManager();var httpClient=new _HttpClient.HttpClient();var trackingManager=new _TrackingManager.TrackingManager(httpClient,config);var decisionManager=new _ApiManager.ApiManager({httpClient:httpClient,config:config,trackingManager:trackingManager});this._config=config;this.configManager=new _ConfigManager.ConfigManager(config,decisionManager,trackingManager);}}],[{key:"getInstance",value:function getInstance(){if(false){ var globalScope; }else{if(!this._instance){this._instance=new this();}return this._instance;}}},{key:"getStatus",value:function getStatus(){return this.getInstance()._status;}},{key:"getConfig",value:function getConfig(){return this.getInstance()._config;}},{key:"getVisitor",value:function getVisitor(){return this.getInstance().getVisitor();}},{key:"start",value:(function(){var _start=(0,_asyncToGenerator2.default)(function*(envId,apiKey,config){var flagship=this.getInstance();var localConfig=flagship.buildConfig(config);localConfig.envId=envId;localConfig.apiKey=apiKey;flagship._config=localConfig;if(!localConfig.onLog&&!localConfig.logManager){localConfig.logManager=new _FlagshipLogManager.FlagshipLogManager();}if(!envId||!apiKey){flagship.setStatus(_FSSdkStatus.FSSdkStatus.SDK_NOT_INITIALIZED);(0,_utils.logError)(localConfig,_index2.INITIALIZATION_PARAM_ERROR,_index2.PROCESS_INITIALIZATION);return flagship;}(0,_utils.logDebugSprintf)(localConfig,_index2.PROCESS_INITIALIZATION,_index2.INITIALIZATION_STARTING,_index2.SDK_INFO.version,localConfig.decisionMode,localConfig);if(false){}yield flagship.initializeSdk(localConfig);(0,_utils.logInfo)(localConfig,(0,_utils.sprintf)(_index2.SDK_STARTED_INFO,_index2.SDK_INFO.version,_FSSdkStatus.FSSdkStatus[flagship._status],localConfig.decisionMode),_index2.PROCESS_INITIALIZATION);if(false){}flagship.lastInitializationTimestamp=new Date().toISOString();flagship.sendInitializedPostMessage();return flagship;});function start(_x2,_x3,_x4){return _start.apply(this,arguments);}return start;}())},{key:"close",value:(function(){var _close2=(0,_asyncToGenerator2.default)(function*(){var _this$_instance;yield(_this$_instance=this._instance)==null||(_this$_instance=_this$_instance.configManager)==null||(_this$_instance=_this$_instance.trackingManager)==null?void 0:_this$_instance.sendBatch();});function close(){return _close2.apply(this,arguments);}return close;}())},{key:"newVisitor",value:function newVisitor(_ref){var _flagship$_sdkManager;var visitorId=_ref.visitorId,context=_ref.context,isAuthenticated=_ref.isAuthenticated,hasConsented=_ref.hasConsented,initialCampaigns=_ref.initialCampaigns,initialFlagsData=_ref.initialFlagsData,shouldSaveInstance=_ref.shouldSaveInstance,onFlagsStatusChanged=_ref.onFlagsStatusChanged;var saveInstance=shouldSaveInstance!=null?shouldSaveInstance:(0,_utils.isBrowser)();var flagship=this.getInstance();if(!flagship.configManager){flagship.initializeConfigManager();(0,_utils.logError)(flagship.getConfig(),_index2.NEW_VISITOR_NOT_READY,_index2.PROCESS_NEW_VISITOR);}var sdkConfig=flagship.getConfig();var configManager=flagship.configManager;if(hasConsented===undefined){(0,_utils.logWarning)(sdkConfig,_index2.CONSENT_NOT_SPECIFY_WARNING,_index2.PROCESS_NEW_VISITOR);}var emotionAi=new _EmotionAI.EmotionAI({sdkConfig:sdkConfig,httpClient:new _HttpClient.HttpClient(),eAIConfig:(_flagship$_sdkManager=flagship._sdkManager)==null?void 0:_flagship$_sdkManager.getEAIConfig()});var visitorProfileCache=new _VisitorProfileCache.VisitorProfileCache(sdkConfig);_VisitorAbstract.VisitorAbstract.SdkStatus=flagship.getStatus();var visitorDelegate=new _VisitorDelegate.VisitorDelegate({visitorId:visitorId,context:context||{},isAuthenticated:isAuthenticated!=null?isAuthenticated:false,hasConsented:hasConsented!=null?hasConsented:false,configManager:configManager,initialCampaigns:initialCampaigns,initialFlagsData:initialFlagsData,onFlagsStatusChanged:onFlagsStatusChanged,emotionAi:emotionAi,visitorProfileCache:visitorProfileCache,monitoringData:{instanceId:this.getInstance().instanceId,lastInitializationTimestamp:this.getInstance().lastInitializationTimestamp,initialCampaigns:initialCampaigns,initialFlagsData:initialFlagsData},murmurHash:new _MurmurHash.MurmurHash(),visitorVariationState:flagship._visitorVariationState});if(false){}var visitor=new _Visitor.Visitor(visitorDelegate);this.getInstance()._visitorInstance=saveInstance?visitor:undefined;if(saveInstance){(0,_utils.logDebugSprintf)(sdkConfig,_index2.PROCESS_NEW_VISITOR,_index2.SAVE_VISITOR_INSTANCE,visitor.visitorId);}if(sdkConfig.fetchNow&&sdkConfig.decisionMode!==_index.DecisionMode.BUCKETING_EDGE){visitor.fetchFlags();}return visitor;}}]);}();

/***/ }),

/***/ 3401:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.ActivateBatch=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(3664);var ActivateBatch=exports.ActivateBatch=function(){function ActivateBatch(hits,config){(0,_classCallCheck2.default)(this,ActivateBatch);this._config=config;this._hits=hits;}return(0,_createClass2.default)(ActivateBatch,[{key:"hits",get:function get(){return this._hits;}},{key:"config",get:function get(){return this._config;}},{key:"toApiKeys",value:function toApiKeys(){var _this$config;return(0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.CUSTOMER_ENV_ID_API_ITEM,`${(_this$config=this.config)==null?void 0:_this$config.envId}`),_index.BATCH,this.hits.map(function(x){var apiKeys=x.toApiKeys();delete apiKeys[_index.CUSTOMER_ENV_ID_API_ITEM];return apiKeys;}));}}]);}();

/***/ }),

/***/ 3664:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));var _LogLevel=__webpack_require__(8490);Object.keys(_LogLevel).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_LogLevel[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _LogLevel[key];}});});var _FlagshipConstant=__webpack_require__(1786);Object.keys(_FlagshipConstant).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FlagshipConstant[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FlagshipConstant[key];}});});var _FSSdkStatus=__webpack_require__(6691);Object.keys(_FSSdkStatus).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FSSdkStatus[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FSSdkStatus[key];}});});var _HitType=__webpack_require__(1197);Object.keys(_HitType).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_HitType[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _HitType[key];}});});var _CacheStrategy=__webpack_require__(6707);Object.keys(_CacheStrategy).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_CacheStrategy[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _CacheStrategy[key];}});});var _FSFetchReasons=__webpack_require__(8672);Object.keys(_FSFetchReasons).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FSFetchReasons[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FSFetchReasons[key];}});});var _FSFetchStatus=__webpack_require__(9807);Object.keys(_FSFetchStatus).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FSFetchStatus[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FSFetchStatus[key];}});});var _FSFlagStatus=__webpack_require__(2305);Object.keys(_FSFlagStatus).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FSFlagStatus[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FSFlagStatus[key];}});});

/***/ }),

/***/ 3674:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.version=void 0;var version=exports.version='5.1.6';

/***/ }),

/***/ 3751:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/interopRequireDefault");

/***/ }),

/***/ 3906:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.VisitorEvent=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var VisitorEvent=exports.VisitorEvent=function(){function VisitorEvent(_ref){var customerAccountId=_ref.customerAccountId,visitorId=_ref.visitorId,currentUrl=_ref.currentUrl,clickPath=_ref.clickPath,clickPosition=_ref.clickPosition,screenSize=_ref.screenSize,scrollPosition=_ref.scrollPosition;(0,_classCallCheck2.default)(this,VisitorEvent);this._customerAccountId=customerAccountId;this._visitorId=visitorId;this._currentUrl=currentUrl;this._clickPath=clickPath;this._clickPosition=clickPosition;this._screenSize=screenSize;this._scrollPosition=scrollPosition;}return(0,_createClass2.default)(VisitorEvent,[{key:"customerAccountId",get:function get(){return this._customerAccountId;}},{key:"visitorId",get:function get(){return this._visitorId;}},{key:"currentUrl",get:function get(){return this._currentUrl;}},{key:"clickPath",get:function get(){return this._clickPath;}},{key:"clickPosition",get:function get(){return this._clickPosition;}},{key:"screenSize",get:function get(){return this._screenSize;}},{key:"scrollPosition",get:function get(){return this._scrollPosition;}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys={cid:this._customerAccountId,vid:this._visitorId,dl:this._currentUrl,sr:this._screenSize,t:'VISITOREVENT'};if(this._clickPath){apiKeys.cp=this._clickPath;}if(this._clickPosition){apiKeys.cpo=this._clickPosition;}if(this._scrollPosition){apiKeys.sp=this._scrollPosition;}return apiKeys;}}]);}();

/***/ }),

/***/ 3957:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.VisitorCacheStatus=exports.TroubleshootingLabel=exports.ABTastyWebSDKPostMessageType=void 0;var TroubleshootingLabel=exports.TroubleshootingLabel=function(TroubleshootingLabel){TroubleshootingLabel["VISITOR_SEND_HIT"]="VISITOR_SEND_HIT";TroubleshootingLabel["VISITOR_FETCH_CAMPAIGNS_ERROR"]="VISITOR_FETCH_CAMPAIGNS_ERROR";TroubleshootingLabel["VISITOR_FETCH_CAMPAIGNS"]="VISITOR_FETCH_CAMPAIGNS";TroubleshootingLabel["VISITOR_AUTHENTICATE"]="VISITOR_AUTHENTICATE";TroubleshootingLabel["VISITOR_UNAUTHENTICATE"]="VISITOR_UNAUTHENTICATE";TroubleshootingLabel["VISITOR_EXPOSED_FLAG_NOT_FOUND"]="VISITOR_EXPOSED_FLAG_NOT_FOUND";TroubleshootingLabel["FLAG_VALUE_NOT_CALLED"]="FLAG_VALUE_NOT_CALLED";TroubleshootingLabel["GET_FLAG_VALUE_FLAG_NOT_FOUND"]="GET_FLAG_VALUE_FLAG_NOT_FOUND";TroubleshootingLabel["GET_FLAG_METADATA_TYPE_WARNING"]="GET_FLAG_METADATA_TYPE_WARNING";TroubleshootingLabel["GET_FLAG_VALUE_TYPE_WARNING"]="GET_FLAG_VALUE_TYPE_WARNING";TroubleshootingLabel["VISITOR_EXPOSED_TYPE_WARNING"]="VISITOR_EXPOSED_TYPE_WARNING";TroubleshootingLabel["VISITOR_SEND_ACTIVATE"]="VISITOR_SEND_ACTIVATE";TroubleshootingLabel["GET_CAMPAIGNS_ROUTE_RESPONSE_ERROR"]="GET_CAMPAIGNS_ROUTE_RESPONSE_ERROR";TroubleshootingLabel["GET_CAMPAIGNS_ROUTE_RESPONSE"]="GET_CAMPAIGNS_ROUTE_RESPONSE";TroubleshootingLabel["SDK_BUCKETING_FILE"]="SDK_BUCKETING_FILE";TroubleshootingLabel["SEND_ACTIVATE_HIT_ROUTE_ERROR"]="SEND_ACTIVATE_HIT_ROUTE_ERROR";TroubleshootingLabel["SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR"]="SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR";TroubleshootingLabel["SEND_HIT_ROUTE_ERROR"]="SEND_HIT_ROUTE_ERROR";TroubleshootingLabel["SDK_BUCKETING_FILE_ERROR"]="SDK_BUCKETING_FILE_ERROR";TroubleshootingLabel["SDK_CONFIG"]="SDK_CONFIG";TroubleshootingLabel["ACCOUNT_SETTINGS"]="ACCOUNT_SETTINGS";TroubleshootingLabel["ACCOUNT_SETTINGS_ERROR"]="ACCOUNT_SETTINGS_ERROR";TroubleshootingLabel["EMOTION_AI_SCORE"]="EMOTION_EAI_SCORE";TroubleshootingLabel["EMOTION_AI_SCORE_FROM_LOCAL_CACHE"]="EMOTION_AI_SCORE_FROM_LOCAL_CACHE";TroubleshootingLabel["EMOTION_AI_SCORE_ERROR"]="EMOTION_EAI_SCORE_ERROR";TroubleshootingLabel["EMOTION_AI_VISITOR_EVENT"]="EMOTION_AI_VISITOR_EVENT";TroubleshootingLabel["EMOTION_AI_VISITOR_EVENT_ERROR"]="EMOTION_AI_VISITOR_EVENT_ERROR";TroubleshootingLabel["EMOTION_AI_PAGE_VIEW"]="EMOTION_AI_PAGE_VIEW";TroubleshootingLabel["EMOTION_AI_PAGE_VIEW_ERROR"]="EMOTION_AI_PAGE_VIEW_ERROR";TroubleshootingLabel["EMOTION_AI_START_COLLECTING"]="EMOTION_AI_START_COLLECTING";TroubleshootingLabel["EMOTION_AI_STOP_COLLECTING"]="EMOTION_AI_STOP_COLLECTING";TroubleshootingLabel["EMOTION_AI_START_SCORING"]="EMOTION_AI_START_SCORING";TroubleshootingLabel["EMOTION_AI_SCORING_FAILED"]="EMOTION_AI_SCORING_FAILED";TroubleshootingLabel["EMOTION_AI_SCORING_SUCCESS"]="EMOTION_AI_SCORING_SUCCESS";return TroubleshootingLabel;}({});var VisitorCacheStatus=exports.VisitorCacheStatus=function(VisitorCacheStatus){VisitorCacheStatus["NONE"]="NONE";VisitorCacheStatus["ANONYMOUS_ID_CACHE"]="ANONYMOUS_ID_CACHE";VisitorCacheStatus["VISITOR_ID_CACHE"]="VISITOR_ID_CACHE";VisitorCacheStatus["VISITOR_ID_CACHE_WITH_ANONYMOUS_ID_CACHE"]="VISITOR_ID_CACHE_WITH_ANONYMOUS_ID_CACHE";return VisitorCacheStatus;}({});var ABTastyWebSDKPostMessageType=exports.ABTastyWebSDKPostMessageType=function(ABTastyWebSDKPostMessageType){ABTastyWebSDKPostMessageType["AB_TASTY_WEB_SDK_INITIALIZED"]="AB_TASTY_WEB_SDK_INITIALIZED";return ABTastyWebSDKPostMessageType;}({});

/***/ }),

/***/ 3998:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.ConfigManager=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var ConfigManager=exports.ConfigManager=function(){function ConfigManager(config,decisionManager,trackingManager,sharedActionTracking){(0,_classCallCheck2.default)(this,ConfigManager);this._config=config;this._decisionManager=decisionManager;this._trackingManager=trackingManager;this._sharedActionTracking=sharedActionTracking;}return(0,_createClass2.default)(ConfigManager,[{key:"config",get:function get(){return this._config;},set:function set(value){this._config=value;}},{key:"decisionManager",get:function get(){return this._decisionManager;},set:function set(value){this._decisionManager=value;}},{key:"trackingManager",get:function get(){return this._trackingManager;},set:function set(value){this._trackingManager=value;}},{key:"sharedActionTracking",get:function get(){return this._sharedActionTracking;}}]);}();

/***/ }),

/***/ 4122:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.SharedActionTracking=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _FlagshipConstant=__webpack_require__(1786);var _index=__webpack_require__(6770);var _type=__webpack_require__(9851);var _utils=__webpack_require__(9647);var _Event=__webpack_require__(2422);var SharedActionTracking=exports.SharedActionTracking=function(){function SharedActionTracking(_ref){var sdkConfig=_ref.sdkConfig;(0,_classCallCheck2.default)(this,SharedActionTracking);this.visitor=null;this.trustedNonces={};this.sdkConfig=sdkConfig;}return(0,_createClass2.default)(SharedActionTracking,[{key:"generateNonce",value:function generateNonce(){if(!(0,_utils.isBrowser)()||!this.visitor||!this.visitor.hasConsented){return undefined;}var nonce=Math.random().toString(36).substring(2)+Date.now().toString(36);this.trustedNonces[nonce]=false;return nonce;}},{key:"initialize",value:function initialize(visitor){var _this=this,_window2;this.visitor=visitor;this.initTimestamp=Date.now();if(!(0,_utils.isBrowser)()){return;}if(this.onMessageReceived){var _window;(_window=window)==null||_window.removeEventListener('message',this.onMessageReceived);}this.onMessageReceived=function(event){_this.handleMessage(event);};(_window2=window)==null||_window2.addEventListener('message',this.onMessageReceived);}},{key:"processHit",value:function(){var _processHit=(0,_asyncToGenerator2.default)(function*(hit){var _this$visitor,_this$visitor2,_this$visitor3;if((hit==null?void 0:hit.ec)!==_index.EventCategory.ACTION_TRACKING||!hit.ea){(0,_utils.logDebugSprintf)(this.sdkConfig,_FlagshipConstant.ACTION_TRACKING,_FlagshipConstant.ACTION_TRACKING_INVALID_HIT,hit);return;}var eventHit=new _Event.Event({category:hit.ec,action:hit.ea,label:hit.el,value:hit.ev,visitorId:(_this$visitor=this.visitor)==null?void 0:_this$visitor.visitorId,anonymousId:(_this$visitor2=this.visitor)==null?void 0:_this$visitor2.anonymousId,isActionTrackingHit:true});(_this$visitor3=this.visitor)==null||_this$visitor3.addInTrackingManager(eventHit);(0,_utils.logDebugSprintf)(this.sdkConfig,_FlagshipConstant.ACTION_TRACKING,_FlagshipConstant.ACTION_TRACKING_HIT_RECEIVED,hit);});function processHit(_x){return _processHit.apply(this,arguments);}return processHit;}()},{key:"handleMessage",value:function handleMessage(event){var _this$visitor4;if(!(event!=null&&event.data)||(event==null?void 0:event.origin)!==window.location.origin||!((_this$visitor4=this.visitor)!=null&&_this$visitor4.hasConsented)){return;}var payload=event.data;if(payload.action!==_type.SharedActionSource.ABT_TAG_TRACK_ACTION||!payload.nonce){return;}var nonce=payload.nonce;if(this.trustedNonces[nonce]===undefined||this.trustedNonces[nonce]){(0,_utils.logDebugSprintf)(this.sdkConfig,_FlagshipConstant.ACTION_TRACKING,_FlagshipConstant.ACTION_TRACKING_INVALID_NONCE,nonce);return;}this.trustedNonces[nonce]=true;var hits=payload.data;if(!hits||!hits.length){return;}for(var hit of hits){this.processHit(hit);}}},{key:"dispatchEventHits",value:function dispatchEventHits(hits){if(!this.shouldProcessHits(hits)){return;}var nonce=this.getNonce();if(!nonce){return;}var hitsToDispatch=this.filterHitsToDispatch(hits);if(!hitsToDispatch.length){return;}this.postHits(hitsToDispatch,nonce);}},{key:"shouldProcessHits",value:function shouldProcessHits(hits){return(0,_utils.isBrowser)()&&!!this.visitor&&!!hits&&hits.length>0;}},{key:"getNonce",value:function getNonce(){var _window$ABTasty;return(_window$ABTasty=window.ABTasty)==null||(_window$ABTasty=_window$ABTasty.api)==null||(_window$ABTasty=_window$ABTasty.internal)==null||_window$ABTasty._getActionTrackingNonce==null?void 0:_window$ABTasty._getActionTrackingNonce();}},{key:"filterHitsToDispatch",value:function filterHitsToDispatch(hits){var _this2=this;return hits.filter(function(hit){var _this2$visitor,_this2$visitor2;var isHitPostInit=_this2.initTimestamp&&hit.createdAt>=_this2.initTimestamp;var isHitForVisitor=hit.visitorId===((_this2$visitor=_this2.visitor)==null?void 0:_this2$visitor.visitorId)||hit.visitorId===((_this2$visitor2=_this2.visitor)==null?void 0:_this2$visitor2.anonymousId);return hit.data.ec===_index.EventCategory.ACTION_TRACKING&&isHitPostInit&&isHitForVisitor;}).map(function(hit){return hit.data;});}},{key:"postHits",value:function postHits(hitsToDispatch,nonce){var _window3;var payload={action:_type.SharedActionSource.ABT_WEB_SDK_TRACK_ACTION,data:hitsToDispatch,nonce:nonce,timestamp:Date.now()};(_window3=window)==null||_window3.postMessage(payload,window.location.origin);(0,_utils.logDebugSprintf)(this.sdkConfig,_FlagshipConstant.ACTION_TRACKING,_FlagshipConstant.ACTION_TRACKING_DISPATCHED,hitsToDispatch);}}]);}();

/***/ }),

/***/ 4210:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.VISITOR_ID_MISMATCH_ERROR=exports.StrategyAbstract=exports.LOOKUP_HITS_JSON_OBJECT_ERROR=exports.LOOKUP_HITS_JSON_ERROR=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(6770);var _types=__webpack_require__(3957);var _index2=__webpack_require__(8747);var _utils=__webpack_require__(9647);var _index3=__webpack_require__(3664);var _Troubleshooting=__webpack_require__(6360);var _UsageHit=__webpack_require__(1460);var _DefaultHitCache=__webpack_require__(517);var _DefaultVisitorCache=__webpack_require__(6228);var _Event=__webpack_require__(2422);var LOOKUP_HITS_JSON_ERROR=exports.LOOKUP_HITS_JSON_ERROR='JSON DATA must be an array of object';var LOOKUP_HITS_JSON_OBJECT_ERROR=exports.LOOKUP_HITS_JSON_OBJECT_ERROR='JSON DATA must fit the type HitCacheDTO';var VISITOR_ID_MISMATCH_ERROR=exports.VISITOR_ID_MISMATCH_ERROR='Visitor ID mismatch: {0} vs {1}';var StrategyAbstract=exports.StrategyAbstract=function(){function StrategyAbstract(param){(0,_classCallCheck2.default)(this,StrategyAbstract);var visitor=param.visitor,murmurHash=param.murmurHash;this.visitor=visitor;this._murmurHash=murmurHash;}return(0,_createClass2.default)(StrategyAbstract,[{key:"configManager",get:function get(){return this.visitor.configManager;}},{key:"trackingManager",get:function get(){return this.configManager.trackingManager;}},{key:"decisionManager",get:function get(){return this.configManager.decisionManager;}},{key:"config",get:function get(){return this.visitor.config;}},{key:"collectEAIEventsAsync",value:function collectEAIEventsAsync(currentPage){return this.visitor.emotionAi.collectEAIEventsAsync(currentPage);}},{key:"reportEaiVisitorEvent",value:function reportEaiVisitorEvent(event){var _this=this;if(true){Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 3906)).then(function(_ref){var VisitorEvent=_ref.VisitorEvent;_this.visitor.emotionAi.reportVisitorEvent(new VisitorEvent(event));});}}},{key:"reportEaiPageView",value:function reportEaiPageView(pageView){var _this2=this;if(true){Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 7518)).then(function(_ref2){var PageView=_ref2.PageView;_this2.visitor.emotionAi.reportPageView(new PageView(pageView));});}}},{key:"onEAICollectStatusChange",value:function onEAICollectStatusChange(callback){this.visitor.emotionAi.onEAICollectStatusChange(callback);}},{key:"cleanup",value:function cleanup(){this.visitor.emotionAi.cleanup();}},{key:"updateCampaigns",value:function updateCampaigns(campaigns){try{this.visitor.campaigns=campaigns;this.visitor.flagsData=this.decisionManager.getModifications(campaigns);}catch(error){(0,_utils.logError)(this.config,error.message||error,'updateCampaigns');}}},{key:"hasTrackingManager",value:function hasTrackingManager(process){var check=this.trackingManager;if(!check){(0,_utils.logError)(this.config,(0,_utils.sprintf)(_index3.TRACKER_MANAGER_MISSING_ERROR),process);}return!!check;}},{key:"setConsent",value:function setConsent(hasConsented){var _this$visitor$sdkInit;var method='setConsent';this.visitor.hasConsented=hasConsented;if(!hasConsented){this.flushVisitor();}if(!this.hasTrackingManager(method)){return;}var consentHit=new _Event.Event({visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,label:`${_index3.SDK_INFO.name}:${this.visitor.hasConsented}`,action:_index3.FS_CONSENT,category:_index.EventCategory.USER_ENGAGEMENT});consentHit.qaMode=this.config.isQAModeEnabled;consentHit.ds=_index3.SDK_APP;consentHit.config=this.config;this.trackingManager.addHit(consentHit);var hitTroubleshooting=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_SEND_HIT,logLevel:_index3.LogLevel.INFO,traffic:this.visitor.traffic||0,visitorId:this.visitor.visitorId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:(_this$visitor$sdkInit=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit.instanceId,anonymousId:this.visitor.anonymousId,config:this.config,hitContent:consentHit.toApiKeys()});if(this.decisionManager.troubleshooting){this.trackingManager.sendTroubleshootingHit(hitTroubleshooting);return;}this.visitor.consentHitTroubleshooting=hitTroubleshooting;(0,_utils.logDebugSprintf)(this.config,_index3.PROCESS_SET_CONSENT,_index3.CONSENT_CHANGED,this.visitor.visitorId,hasConsented);}},{key:"checKLookupVisitorDataV1",value:function checKLookupVisitorDataV1(item){if(!item||!item.data||!item.data.visitorId){return false;}var campaigns=item.data.campaigns;if(!campaigns){return true;}if(!Array.isArray(campaigns)){return false;}if((this.visitor.visitorCacheStatus===_types.VisitorCacheStatus.VISITOR_ID_CACHE||this.visitor.visitorCacheStatus===_types.VisitorCacheStatus.VISITOR_ID_CACHE_WITH_ANONYMOUS_ID_CACHE)&&item.data.visitorId!==this.visitor.visitorId){(0,_utils.logInfoSprintf)(this.config,_index3.PROCESS_CACHE,VISITOR_ID_MISMATCH_ERROR,item.data.visitorId,this.visitor.visitorId);return false;}if(this.visitor.visitorCacheStatus===_types.VisitorCacheStatus.ANONYMOUS_ID_CACHE&&item.data.visitorId!==this.visitor.anonymousId){(0,_utils.logInfoSprintf)(this.config,_index3.PROCESS_CACHE,VISITOR_ID_MISMATCH_ERROR,item.data.visitorId,this.visitor.anonymousId);return false;}return campaigns.every(function(x){return x.campaignId&&x.type&&x.variationGroupId&&x.variationId;});}},{key:"checKLookupVisitorData",value:function checKLookupVisitorData(item){if(item.version===1){return this.checKLookupVisitorDataV1(item);}return false;}},{key:"tryLookupCache",value:function(){var _tryLookupCache=(0,_asyncToGenerator2.default)(function*(id){var visitorCacheInstance=this.config.visitorCacheImplementation;if(!visitorCacheInstance||typeof visitorCacheInstance.lookupVisitor!=='function'){return null;}return yield visitorCacheInstance.lookupVisitor(id);});function tryLookupCache(_x){return _tryLookupCache.apply(this,arguments);}return tryLookupCache;}()},{key:"processValidCache",value:function processValidCache(visitorCache){if(!this.checKLookupVisitorData(visitorCache)){(0,_utils.logErrorSprintf)(this.config,_index3.PROCESS_CACHE,_index3.LOOKUP_VISITOR_JSON_OBJECT_ERROR,_index3.VISITOR_CACHE_VERSION,this.visitor.visitorId);return false;}this.visitor.visitorCache=visitorCache;return true;}},{key:"lookupVisitor",value:function(){var _lookupVisitor=(0,_asyncToGenerator2.default)(function*(){try{if(this.config.disableCache||this.visitor.visitorCache){return;}this.visitor.visitorCacheStatus=_types.VisitorCacheStatus.NONE;var visitorCache=yield this.tryLookupCache(this.visitor.visitorId);if(visitorCache){this.visitor.visitorCacheStatus=_types.VisitorCacheStatus.VISITOR_ID_CACHE;}else if(this.visitor.anonymousId){visitorCache=yield this.tryLookupCache(this.visitor.anonymousId);if(visitorCache){this.visitor.visitorCacheStatus=_types.VisitorCacheStatus.ANONYMOUS_ID_CACHE;}}(0,_utils.logDebugSprintf)(this.config,_index3.PROCESS_CACHE,_index3.VISITOR_CACHE_LOADED,this.visitor.visitorId,visitorCache);if(!visitorCache||!this.processValidCache(visitorCache)){return;}if(this.visitor.visitorCacheStatus===_types.VisitorCacheStatus.VISITOR_ID_CACHE&&this.visitor.anonymousId){var anonymousVisitorCache=yield this.tryLookupCache(this.visitor.anonymousId);if(anonymousVisitorCache){this.visitor.visitorCacheStatus=_types.VisitorCacheStatus.VISITOR_ID_CACHE_WITH_ANONYMOUS_ID_CACHE;}}}catch(error){(0,_utils.logErrorSprintf)(this.config,_index3.PROCESS_CACHE,_index3.VISITOR_CACHE_ERROR,this.visitor.visitorId,'lookupVisitor',error.message||error);}});function lookupVisitor(){return _lookupVisitor.apply(this,arguments);}return lookupVisitor;}()},{key:"createVisitorCacheDTO",value:function createVisitorCacheDTO(eAIScore,isEAIDataCollected){var _this$visitor$visitor,_this$visitor$visitor2,_this$visitor$visitor3;var assignmentsHistory={};var visitorCacheDTO={version:_index3.VISITOR_CACHE_VERSION,data:{visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,consent:this.visitor.hasConsented,context:this.visitor.context,eAIScore:((_this$visitor$visitor=this.visitor.visitorCache)==null||(_this$visitor$visitor=_this$visitor$visitor.data)==null?void 0:_this$visitor$visitor.eAIScore)||eAIScore,isEAIDataCollected:((_this$visitor$visitor2=this.visitor.visitorCache)==null||(_this$visitor$visitor2=_this$visitor$visitor2.data)==null?void 0:_this$visitor$visitor2.isEAIDataCollected)||isEAIDataCollected,campaigns:this.visitor.campaigns.map(function(campaign){assignmentsHistory[campaign.variationGroupId]=campaign.variation.id;return{campaignId:campaign.id,slug:campaign.slug,variationGroupId:campaign.variationGroupId,variationId:campaign.variation.id,isReference:campaign.variation.reference,type:campaign.variation.modifications.type,activated:false,flags:campaign.variation.modifications.value};})}};visitorCacheDTO.data.assignmentsHistory=Object.assign({},(_this$visitor$visitor3=this.visitor.visitorCache)==null||(_this$visitor$visitor3=_this$visitor$visitor3.data)==null?void 0:_this$visitor$visitor3.assignmentsHistory,assignmentsHistory);return visitorCacheDTO;}},{key:"cacheAnonymousVisitor",value:function(){var _cacheAnonymousVisitor=(0,_asyncToGenerator2.default)(function*(visitorCacheInstance,visitorCacheDTO){var visitorCacheStatus=this.visitor.visitorCacheStatus;if(this.visitor.anonymousId&&(visitorCacheStatus===_types.VisitorCacheStatus.NONE||visitorCacheStatus===_types.VisitorCacheStatus.VISITOR_ID_CACHE)){var anonymousVisitorCacheDTO=Object.assign({},visitorCacheDTO,{data:Object.assign({},visitorCacheDTO.data,{visitorId:this.visitor.anonymousId,anonymousId:null})});yield visitorCacheInstance.cacheVisitor(this.visitor.anonymousId,anonymousVisitorCacheDTO);}});function cacheAnonymousVisitor(_x2,_x3){return _cacheAnonymousVisitor.apply(this,arguments);}return cacheAnonymousVisitor;}()},{key:"cacheVisitor",value:function(){var _cacheVisitor=(0,_asyncToGenerator2.default)(function*(eAIScore,isEAIDataCollected){try{var visitorCacheInstance=this.config.visitorCacheImplementation;if(this.config.disableCache||!visitorCacheInstance||typeof visitorCacheInstance.cacheVisitor!=='function'){return;}var visitorCacheDTO=this.createVisitorCacheDTO(eAIScore,isEAIDataCollected);yield visitorCacheInstance.cacheVisitor(this.visitor.visitorId,visitorCacheDTO);yield this.cacheAnonymousVisitor(visitorCacheInstance,visitorCacheDTO);(0,_utils.logDebugSprintf)(this.config,_index3.PROCESS_CACHE,_index3.VISITOR_CACHE_SAVED,this.visitor.visitorId,visitorCacheDTO);this.visitor.visitorCache=visitorCacheDTO;}catch(error){(0,_utils.logErrorSprintf)(this.config,_index3.PROCESS_CACHE,_index3.VISITOR_CACHE_ERROR,this.visitor.visitorId,'cacheVisitor',error.message||error);}});function cacheVisitor(_x4,_x5){return _cacheVisitor.apply(this,arguments);}return cacheVisitor;}()},{key:"flushVisitor",value:function(){var _flushVisitor=(0,_asyncToGenerator2.default)(function*(){try{var visitorCacheInstance=this.config.visitorCacheImplementation;if(this.config.disableCache||!visitorCacheInstance||typeof visitorCacheInstance.flushVisitor!=='function'){return;}yield visitorCacheInstance.flushVisitor(this.visitor.visitorId);(0,_utils.logDebugSprintf)(this.config,_index3.PROCESS_CACHE,_index3.VISITOR_CACHE_FLUSHED,this.visitor.visitorId);}catch(error){(0,_utils.logErrorSprintf)(this.config,_index3.PROCESS_CACHE,_index3.VISITOR_CACHE_ERROR,this.visitor.visitorId,'flushVisitor',error.message||error);}});function flushVisitor(){return _flushVisitor.apply(this,arguments);}return flushVisitor;}()},{key:"addInTrackingManager",value:function addInTrackingManager(hit){return this.trackingManager.addHit(hit);}},{key:"sendTroubleshootingHit",value:function(){var _sendTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(hit){yield this.trackingManager.sendTroubleshootingHit(hit);});function sendTroubleshootingHit(_x6){return _sendTroubleshootingHit.apply(this,arguments);}return sendTroubleshootingHit;}()},{key:"sendUsageHit",value:function(){var _sendUsageHit=(0,_asyncToGenerator2.default)(function*(hit){if(this.config.disableDeveloperUsageTracking){return;}var traffic=this.visitor.analyticTraffic;if(traffic>_index3.ANALYTIC_HIT_ALLOCATION){return;}return this.trackingManager.sendUsageHit(hit);});function sendUsageHit(_x7){return _sendUsageHit.apply(this,arguments);}return sendUsageHit;}()},{key:"getCurrentDateTime",value:function getCurrentDateTime(){return new Date();}},{key:"getSdkConfigDecisionMode",value:function getSdkConfigDecisionMode(){return this.config.decisionMode===_index2.DecisionMode.DECISION_API?'DECISION_API':this.config.decisionMode;}},{key:"sendSdkConfigAnalyticHit",value:function(){var _sendSdkConfigAnalyticHit=(0,_asyncToGenerator2.default)(function*(){var _this$visitor$sdkInit2,_this$visitor$sdkInit3,_this$visitor$sdkInit4,_this$config$tracking,_this$config$tracking2,_this$config$tracking3;if(this.config.disableDeveloperUsageTracking){return;}var hitCacheImplementation=this.config.hitCacheImplementation;var visitorCacheImplementation=this.config.visitorCacheImplementation;var sdkConfigUsingCustomHitCache=false;var sdkConfigUsingCustomVisitorCache=false;if(false){}var analyticData=new _UsageHit.UsageHit({label:_types.TroubleshootingLabel.SDK_CONFIG,logLevel:_index3.LogLevel.INFO,visitorId:(_this$visitor$sdkInit2=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit2.instanceId,flagshipInstanceId:(_this$visitor$sdkInit3=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit3.instanceId,config:this.config,sdkStatus:this.visitor.getSdkStatus(),lastBucketingTimestamp:this.configManager.decisionManager.lastBucketingTimestamp,lastInitializationTimestamp:(_this$visitor$sdkInit4=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit4.lastInitializationTimestamp,sdkConfigMode:this.getSdkConfigDecisionMode(),sdkConfigLogLevel:this.config.logLevel,sdkConfigTimeout:this.config.timeout,sdkConfigPollingInterval:this.config.pollingInterval,sdkConfigTrackingManagerStrategy:(_this$config$tracking=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking.cacheStrategy,sdkConfigTrackingManagerBatchIntervals:(_this$config$tracking2=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking2.batchIntervals,sdkConfigTrackingManagerPoolMaxSize:(_this$config$tracking3=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking3.poolMaxSize,sdkConfigFetchNow:this.config.fetchNow,sdkConfigReuseVisitorIds:this.config.reuseVisitorIds,sdkConfigInitialBucketing:this.config.initialBucketing,sdkConfigDecisionApiUrl:this.config.decisionApiUrl,sdkConfigHitDeduplicationTime:this.config.hitDeduplicationTime,sdkConfigUsingOnVisitorExposed:!!this.config.onVisitorExposed,sdkConfigUsingCustomHitCache:!!sdkConfigUsingCustomHitCache,sdkConfigUsingCustomVisitorCache:!!sdkConfigUsingCustomVisitorCache,sdkConfigFetchThirdPartyData:this.config.fetchThirdPartyData,sdkConfigFetchFlagsBufferingTime:this.config.fetchFlagsBufferingTime,sdkConfigDisableDeveloperUsageTracking:this.config.disableDeveloperUsageTracking,sdkConfigNextFetchConfig:this.config.nextFetchConfig,sdkConfigDisableCache:this.config.disableCache});this.sendUsageHit(analyticData);});function sendSdkConfigAnalyticHit(){return _sendSdkConfigAnalyticHit.apply(this,arguments);}return sendSdkConfigAnalyticHit;}()},{key:"sendFetchFlagsTroubleshooting",value:function(){var _sendFetchFlagsTroubleshooting=(0,_asyncToGenerator2.default)(function*(_ref3){var _this$decisionManager,_this$visitor$sdkInit5,_this$visitor$sdkInit6,_this$visitor$sdkInit7,_this$visitor$sdkInit8,_this$config$tracking4,_this$config$tracking5,_this$config$tracking6;var isFromCache=_ref3.isFromCache,campaigns=_ref3.campaigns,now=_ref3.now;var assignmentHistory={};this.visitor.flagsData.forEach(function(item){assignmentHistory[item.variationGroupId]=item.variationId;});var uniqueId=this.visitor.visitorId+((_this$decisionManager=this.decisionManager.troubleshooting)==null?void 0:_this$decisionManager.endDate.toUTCString());var hash=this._murmurHash.murmurHash3Int32(uniqueId);var traffic=hash%100;this.visitor.traffic=traffic;var hitCacheImplementation=this.config.hitCacheImplementation;var visitorCacheImplementation=this.config.visitorCacheImplementation;var sdkConfigUsingCustomHitCache=false;var sdkConfigUsingCustomVisitorCache=false;if(false){}var fetchFlagTroubleshooting=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_FETCH_CAMPAIGNS,logLevel:_index3.LogLevel.INFO,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:(_this$visitor$sdkInit5=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit5.instanceId,traffic:traffic,config:this.config,sdkStatus:this.visitor.getSdkStatus(),visitorContext:this.visitor.context,visitorCampaigns:campaigns,visitorCampaignFromCache:isFromCache?campaigns:undefined,visitorConsent:this.visitor.hasConsented,visitorIsAuthenticated:!!this.visitor.anonymousId,visitorFlags:this.visitor.flagsData,visitorAssignmentHistory:assignmentHistory,visitorInitialCampaigns:(_this$visitor$sdkInit6=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit6.initialCampaigns,visitorInitialFlagsData:(_this$visitor$sdkInit7=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit7.initialFlagsData,lastBucketingTimestamp:this.configManager.decisionManager.lastBucketingTimestamp,lastInitializationTimestamp:(_this$visitor$sdkInit8=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit8.lastInitializationTimestamp,httpResponseTime:Date.now()-now,sdkConfigLogLevel:this.config.logLevel,sdkConfigMode:this.getSdkConfigDecisionMode(),sdkConfigTimeout:this.config.timeout,sdkConfigPollingInterval:this.config.pollingInterval,sdkConfigTrackingManagerStrategy:(_this$config$tracking4=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking4.cacheStrategy,sdkConfigTrackingManagerBatchIntervals:(_this$config$tracking5=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking5.batchIntervals,sdkConfigTrackingManagerPoolMaxSize:(_this$config$tracking6=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking6.poolMaxSize,sdkConfigFetchNow:this.config.fetchNow,sdkConfigReuseVisitorIds:this.config.reuseVisitorIds,sdkConfigInitialBucketing:this.config.initialBucketing,sdkConfigDecisionApiUrl:this.config.decisionApiUrl,sdkConfigHitDeduplicationTime:this.config.hitDeduplicationTime,sdkConfigUsingOnVisitorExposed:!!this.config.onVisitorExposed,sdkConfigUsingCustomHitCache:!!sdkConfigUsingCustomHitCache,sdkConfigUsingCustomVisitorCache:!!sdkConfigUsingCustomVisitorCache,sdkConfigFetchThirdPartyData:this.config.fetchThirdPartyData,sdkConfigFetchFlagsBufferingTime:this.config.fetchFlagsBufferingTime,sdkConfigDisableDeveloperUsageTracking:this.config.disableDeveloperUsageTracking,sdkConfigNextFetchConfig:this.config.nextFetchConfig,sdkConfigDisableCache:this.config.disableCache});yield this.sendTroubleshootingHit(fetchFlagTroubleshooting);});function sendFetchFlagsTroubleshooting(_x8){return _sendFetchFlagsTroubleshooting.apply(this,arguments);}return sendFetchFlagsTroubleshooting;}()},{key:"sendConsentHitTroubleshooting",value:function sendConsentHitTroubleshooting(){var consentHitTroubleshooting=this.visitor.consentHitTroubleshooting;if(!consentHitTroubleshooting){return;}consentHitTroubleshooting.traffic=this.visitor.traffic;this.trackingManager.sendTroubleshootingHit(consentHitTroubleshooting);this.visitor.consentHitTroubleshooting=undefined;}},{key:"sendSegmentHitTroubleshooting",value:function sendSegmentHitTroubleshooting(){var segmentHitTroubleshooting=this.visitor.segmentHitTroubleshooting;if(!segmentHitTroubleshooting){return;}segmentHitTroubleshooting.traffic=this.visitor.traffic;this.trackingManager.sendTroubleshootingHit(segmentHitTroubleshooting);this.visitor.segmentHitTroubleshooting=undefined;}}]);}();

/***/ }),

/***/ 4267:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.SdkApi=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var SdkApi=exports.SdkApi=function(){function SdkApi(_ref){var sharedActionTracking=_ref.sharedActionTracking;(0,_classCallCheck2.default)(this,SdkApi);this.sharedActionTracking=sharedActionTracking;}return(0,_createClass2.default)(SdkApi,[{key:"setVisitor",value:function setVisitor(visitor){this.visitor=visitor;}},{key:"getApiV1",value:function getApiV1(){var _this=this;return{_getActionTrackingNonce:function _getActionTrackingNonce(){var _this$sharedActionTra;return(_this$sharedActionTra=_this.sharedActionTracking)==null?void 0:_this$sharedActionTra.generateNonce();},_getVisitorId:function _getVisitorId(){var _this$visitor,_this$visitor2;return((_this$visitor=_this.visitor)==null?void 0:_this$visitor.isClientSuppliedID)!==true?(_this$visitor2=_this.visitor)==null?void 0:_this$visitor2.visitorId:undefined;}};}}]);}();

/***/ }),

/***/ 4356:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));var _exportNames={Flagship:true,DecisionApiConfig:true,DecisionMode:true,EventCategory:true,FSSdkStatus:true,LogLevel:true,HitType:true,CacheStrategy:true,FSFetchReasons:true,FSFetchStatus:true,FSFlagStatus:true,Visitor:true};Object.defineProperty(exports, "CacheStrategy", ({enumerable:true,get:function get(){return _index3.CacheStrategy;}}));Object.defineProperty(exports, "DecisionApiConfig", ({enumerable:true,get:function get(){return _index.DecisionApiConfig;}}));Object.defineProperty(exports, "DecisionMode", ({enumerable:true,get:function get(){return _index.DecisionMode;}}));Object.defineProperty(exports, "EventCategory", ({enumerable:true,get:function get(){return _index2.EventCategory;}}));Object.defineProperty(exports, "FSFetchReasons", ({enumerable:true,get:function get(){return _index3.FSFetchReasons;}}));Object.defineProperty(exports, "FSFetchStatus", ({enumerable:true,get:function get(){return _index3.FSFetchStatus;}}));Object.defineProperty(exports, "FSFlagStatus", ({enumerable:true,get:function get(){return _index3.FSFlagStatus;}}));Object.defineProperty(exports, "FSSdkStatus", ({enumerable:true,get:function get(){return _index3.FSSdkStatus;}}));Object.defineProperty(exports, "Flagship", ({enumerable:true,get:function get(){return _Flagship.Flagship;}}));Object.defineProperty(exports, "HitType", ({enumerable:true,get:function get(){return _index3.HitType;}}));Object.defineProperty(exports, "LogLevel", ({enumerable:true,get:function get(){return _index3.LogLevel;}}));Object.defineProperty(exports, "Visitor", ({enumerable:true,get:function get(){return _index4.Visitor;}}));exports["default"]=void 0;var _Flagship=__webpack_require__(3046);var _index=__webpack_require__(8747);var _index2=__webpack_require__(6770);var _index3=__webpack_require__(3664);var _FlagshipContext=__webpack_require__(1431);Object.keys(_FlagshipContext).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;if(key in exports&&exports[key]===_FlagshipContext[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FlagshipContext[key];}});});var _types=__webpack_require__(3957);Object.keys(_types).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;if(key in exports&&exports[key]===_types[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key];}});});var _index4=__webpack_require__(4405);var _index5=__webpack_require__(8831);Object.keys(_index5).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;if(key in exports&&exports[key]===_index5[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index5[key];}});});var _default=exports["default"]=_Flagship.Flagship;

/***/ }),

/***/ 4405:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));Object.defineProperty(exports, "DefaultStrategy", ({enumerable:true,get:function get(){return _DefaultStrategy.DefaultStrategy;}}));Object.defineProperty(exports, "NoConsentStrategy", ({enumerable:true,get:function get(){return _NoConsentStrategy.NoConsentStrategy;}}));Object.defineProperty(exports, "NotReadyStrategy", ({enumerable:true,get:function get(){return _NotReadyStrategy.NotReadyStrategy;}}));Object.defineProperty(exports, "PanicStrategy", ({enumerable:true,get:function get(){return _PanicStrategy.PanicStrategy;}}));Object.defineProperty(exports, "Visitor", ({enumerable:true,get:function get(){return _Visitor.Visitor;}}));Object.defineProperty(exports, "VisitorDelegate", ({enumerable:true,get:function get(){return _VisitorDelegate.VisitorDelegate;}}));var _NoConsentStrategy=__webpack_require__(4411);var _NotReadyStrategy=__webpack_require__(7564);var _DefaultStrategy=__webpack_require__(8981);var _PanicStrategy=__webpack_require__(5151);var _Visitor=__webpack_require__(987);var _VisitorDelegate=__webpack_require__(2716);

/***/ }),

/***/ 4411:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.NoConsentStrategy=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var _DefaultStrategy2=__webpack_require__(8981);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var NoConsentStrategy=exports.NoConsentStrategy=function(_DefaultStrategy){function NoConsentStrategy(){(0,_classCallCheck2.default)(this,NoConsentStrategy);return _callSuper(this,NoConsentStrategy,arguments);}(0,_inherits2.default)(NoConsentStrategy,_DefaultStrategy);return(0,_createClass2.default)(NoConsentStrategy,[{key:"lookupHits",value:function(){var _lookupHits=(0,_asyncToGenerator2.default)(function*(){});function lookupHits(){return _lookupHits.apply(this,arguments);}return lookupHits;}()},{key:"lookupVisitor",value:function(){var _lookupVisitor=(0,_asyncToGenerator2.default)(function*(){});function lookupVisitor(){return _lookupVisitor.apply(this,arguments);}return lookupVisitor;}()},{key:"cacheVisitor",value:function(){var _cacheVisitor=(0,_asyncToGenerator2.default)(function*(){});function cacheVisitor(){return _cacheVisitor.apply(this,arguments);}return cacheVisitor;}()},{key:"cacheHit",value:function(){var _cacheHit=(0,_asyncToGenerator2.default)(function*(){});function cacheHit(){return _cacheHit.apply(this,arguments);}return cacheHit;}()},{key:"collectEAIEventsAsync",value:function(){var _collectEAIEventsAsync=(0,_asyncToGenerator2.default)(function*(){this.log('collectEAIData');});function collectEAIEventsAsync(){return _collectEAIEventsAsync.apply(this,arguments);}return collectEAIEventsAsync;}()},{key:"reportEaiPageView",value:function reportEaiPageView(){}},{key:"reportEaiVisitorEvent",value:function reportEaiVisitorEvent(){}},{key:"onEAICollectStatusChange",value:function onEAICollectStatusChange(){}},{key:"fetchCampaignsFromCache",value:function fetchCampaignsFromCache(){return[];}},{key:"sendHit",value:function(){var _sendHit=(0,_asyncToGenerator2.default)(function*(_hit){this.log('sendHit');});function sendHit(_x){return _sendHit.apply(this,arguments);}return sendHit;}()},{key:"sendHits",value:function(){var _sendHits=(0,_asyncToGenerator2.default)(function*(_hits){this.log('sendHits');});function sendHits(_x2){return _sendHits.apply(this,arguments);}return sendHits;}()},{key:"sendActivate",value:function(){var _sendActivate=(0,_asyncToGenerator2.default)(function*(_flagDto,_defaultValue){});function sendActivate(_x3,_x4){return _sendActivate.apply(this,arguments);}return sendActivate;}()},{key:"visitorExposed",value:function(){var _visitorExposed=(0,_asyncToGenerator2.default)(function*(){this.log(_index.FLAG_VISITOR_EXPOSED);});function visitorExposed(){return _visitorExposed.apply(this,arguments);}return visitorExposed;}()},{key:"sendTroubleshootingHit",value:function(){var _sendTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(){});function sendTroubleshootingHit(){return _sendTroubleshootingHit.apply(this,arguments);}return sendTroubleshootingHit;}()},{key:"addInTrackingManager",value:function(){var _addInTrackingManager=(0,_asyncToGenerator2.default)(function*(){});function addInTrackingManager(){return _addInTrackingManager.apply(this,arguments);}return addInTrackingManager;}()},{key:"log",value:function log(methodName){(0,_utils.logInfo)(this.config,(0,_utils.sprintf)(_index.METHOD_DEACTIVATED_CONSENT_ERROR,methodName,this.visitor.visitorId),methodName);}}]);}(_DefaultStrategy2.DefaultStrategy);

/***/ }),

/***/ 4479:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Page=exports.ERROR_MESSAGE=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _HitType=__webpack_require__(1197);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var ERROR_MESSAGE=exports.ERROR_MESSAGE='documentLocation url is required';var Page=exports.Page=function(_HitAbstract){function Page(page){var _this;(0,_classCallCheck2.default)(this,Page);_this=_callSuper(this,Page,[{type:_HitType.HitType.PAGE_VIEW,userIp:page.userIp,screenResolution:page.screenResolution,locale:page.locale,sessionNumber:page.sessionNumber,visitorId:page.visitorId,anonymousId:page.anonymousId,qaMode:page.qaMode,isActionTrackingHit:page.isActionTrackingHit}]);_this.documentLocation=page.documentLocation;return _this;}(0,_inherits2.default)(Page,_HitAbstract);return(0,_createClass2.default)(Page,[{key:"documentLocation",get:function get(){return this._documentLocation;},set:function set(v){if(!this.isNotEmptyString(v,'documentLocation')){return;}this._documentLocation=v;}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!((!checkParent||_superPropGet(Page,"isReady",this,3)([]))&&this.documentLocation);}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys=_superPropGet(Page,"toApiKeys",this,3)([]);apiKeys[_FlagshipConstant.DL_API_ITEM]=this.documentLocation;return apiKeys;}},{key:"toObject",value:function toObject(){return Object.assign({},_superPropGet(Page,"toObject",this,3)([]),{documentLocation:this.documentLocation});}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 4634:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Transaction=exports.ERROR_MESSAGE=exports.CURRENCY_ERROR=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _HitType=__webpack_require__(1197);var _utils=__webpack_require__(9647);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var CURRENCY_ERROR=exports.CURRENCY_ERROR='{0} must be a string and have exactly 3 letters';var ERROR_MESSAGE=exports.ERROR_MESSAGE='Transaction Id and Transaction affiliation are required';var Transaction=exports.Transaction=function(_HitAbstract){function Transaction(param){var _this;(0,_classCallCheck2.default)(this,Transaction);_this=_callSuper(this,Transaction,[{type:_HitType.HitType.TRANSACTION,userIp:param.userIp,screenResolution:param.screenResolution,locale:param.locale,sessionNumber:param.sessionNumber,visitorId:param.visitorId,anonymousId:param.anonymousId,qaMode:param.qaMode,isActionTrackingHit:param.isActionTrackingHit}]);var transactionId=param.transactionId,affiliation=param.affiliation,taxes=param.taxes,currency=param.currency,couponCode=param.couponCode,itemCount=param.itemCount,shippingMethod=param.shippingMethod,paymentMethod=param.paymentMethod,totalRevenue=param.totalRevenue,shippingCosts=param.shippingCosts;_this.transactionId=transactionId;_this.affiliation=affiliation;if(taxes){_this.taxes=taxes;}if(currency){_this.currency=currency;}if(couponCode){_this.couponCode=couponCode;}if(itemCount){_this.itemCount=itemCount;}if(shippingMethod){_this.shippingMethod=shippingMethod;}if(paymentMethod){_this.paymentMethod=paymentMethod;}if(totalRevenue){_this.totalRevenue=totalRevenue;}if(shippingCosts){_this.shippingCosts=shippingCosts;}return _this;}(0,_inherits2.default)(Transaction,_HitAbstract);return(0,_createClass2.default)(Transaction,[{key:"transactionId",get:function get(){return this._transactionId;},set:function set(v){if(!this.isNotEmptyString(v,'transactionId')){return;}this._transactionId=v;}},{key:"affiliation",get:function get(){return this._affiliation;},set:function set(v){if(!this.isNotEmptyString(v,'affiliation')){return;}this._affiliation=v;}},{key:"taxes",get:function get(){return this._taxes;},set:function set(v){if(!this.isNumeric(v,'taxes')){return;}this._taxes=v;}},{key:"currency",get:function get(){return this._currency;},set:function set(v){if(!v||typeof v!=='string'||v.length!==3){(0,_utils.logError)(this.config,(0,_utils.sprintf)(CURRENCY_ERROR,'currency'),'currency');return;}this._currency=v;}},{key:"couponCode",get:function get(){return this._couponCode;},set:function set(v){if(!this.isNotEmptyString(v,'couponCode')){return;}this._couponCode=v;}},{key:"itemCount",get:function get(){return this._itemCount;},set:function set(v){if(!this.isInteger(v,'itemCount')){return;}this._itemCount=Math.trunc(v);}},{key:"shippingMethod",get:function get(){return this._shippingMethod;},set:function set(v){if(!this.isNotEmptyString(v,'shippingMethod')){return;}this._shippingMethod=v;}},{key:"paymentMethod",get:function get(){return this._paymentMethod;},set:function set(v){if(!this.isNotEmptyString(v,'paymentMethod')){return;}this._paymentMethod=v;}},{key:"totalRevenue",get:function get(){return this._totalRevenue;},set:function set(v){if(!this.isNumeric(v,'totalRevenue')){return;}this._totalRevenue=v;}},{key:"shippingCosts",get:function get(){return this._shippingCosts;},set:function set(v){if(!this.isNumeric(v,'shippingCosts')){return;}this._shippingCosts=v;}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!((!checkParent||_superPropGet(Transaction,"isReady",this,3)([]))&&this.transactionId&&this.affiliation);}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys=_superPropGet(Transaction,"toApiKeys",this,3)([]);apiKeys[_FlagshipConstant.TID_API_ITEM]=this.transactionId;apiKeys[_FlagshipConstant.TA_API_ITEM]=this.affiliation;if(this.taxes){apiKeys[_FlagshipConstant.TT_API_ITEM]=this.taxes;}if(this.currency){apiKeys[_FlagshipConstant.TC_API_ITEM]=this.currency;}if(this.couponCode){apiKeys[_FlagshipConstant.TCC_API_ITEM]=this.couponCode;}if(this.itemCount){apiKeys[_FlagshipConstant.ICN_API_ITEM]=this.itemCount;}if(this.shippingMethod){apiKeys[_FlagshipConstant.SM_API_ITEM]=this.shippingMethod;}if(this.paymentMethod){apiKeys[_FlagshipConstant.PM_API_ITEM]=this.paymentMethod;}if(this.totalRevenue){apiKeys[_FlagshipConstant.TR_API_ITEM]=this.totalRevenue;}if(this.shippingCosts){apiKeys[_FlagshipConstant.TS_API_ITEM]=this.shippingCosts;}return apiKeys;}},{key:"toObject",value:function toObject(){return Object.assign({},_superPropGet(Transaction,"toObject",this,3)([]),{transactionId:this.transactionId,affiliation:this.affiliation,taxes:this.taxes,currency:this.currency,couponCode:this.couponCode,itemCount:this.itemCount,shippingMethod:this.shippingMethod,paymentMethod:this.paymentMethod,totalRevenue:this.totalRevenue,shippingCosts:this.shippingCosts});}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 4639:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Item=exports.ERROR_MESSAGE=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _HitType=__webpack_require__(1197);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var ERROR_MESSAGE=exports.ERROR_MESSAGE='Transaction Id, Item name and item code are required';var Item=exports.Item=function(_HitAbstract){function Item(param){var _this;(0,_classCallCheck2.default)(this,Item);_this=_callSuper(this,Item,[{type:_HitType.HitType.ITEM,userIp:param.userIp,screenResolution:param.screenResolution,locale:param.locale,sessionNumber:param.sessionNumber,visitorId:param.visitorId,anonymousId:param.anonymousId,qaMode:param.qaMode,isActionTrackingHit:param.isActionTrackingHit}]);var transactionId=param.transactionId,productName=param.productName,productSku=param.productSku,itemCategory=param.itemCategory,itemPrice=param.itemPrice,itemQuantity=param.itemQuantity;_this.transactionId=transactionId;_this.productName=productName;_this.productSku=productSku;if(itemCategory){_this.itemCategory=itemCategory;}if(itemPrice){_this.itemPrice=itemPrice;}if(itemQuantity){_this.itemQuantity=itemQuantity;}return _this;}(0,_inherits2.default)(Item,_HitAbstract);return(0,_createClass2.default)(Item,[{key:"transactionId",get:function get(){return this._transactionId;},set:function set(v){if(!this.isNotEmptyString(v,'transactionId')){return;}this._transactionId=v;}},{key:"productName",get:function get(){return this._productName;},set:function set(v){if(!this.isNotEmptyString(v,'productName')){return;}this._productName=v;}},{key:"productSku",get:function get(){return this._productSku;},set:function set(v){if(!this.isNotEmptyString(v,'productSku')){return;}this._productSku=v;}},{key:"itemPrice",get:function get(){return this._itemPrice;},set:function set(v){if(!this.isNumeric(v,'itemPrice')){return;}this._itemPrice=v;}},{key:"itemQuantity",get:function get(){return this._itemQuantity;},set:function set(v){if(!this.isInteger(v,'itemQuantity')){return;}this._itemQuantity=Math.trunc(v);}},{key:"itemCategory",get:function get(){return this._itemCategory;},set:function set(v){if(!this.isNotEmptyString(v,'itemCategory')){return;}this._itemCategory=v;}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!((!checkParent||_superPropGet(Item,"isReady",this,3)([]))&&this.transactionId&&this.productName&&this.productSku);}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys=_superPropGet(Item,"toApiKeys",this,3)([]);apiKeys[_FlagshipConstant.TID_API_ITEM]=this.transactionId;apiKeys[_FlagshipConstant.IN_API_ITEM]=this.productName;apiKeys[_FlagshipConstant.IC_API_ITEM]=this.productSku;if(this.itemPrice){apiKeys[_FlagshipConstant.IP_API_ITEM]=this.itemPrice;}if(this.itemQuantity){apiKeys[_FlagshipConstant.IQ_API_ITEM]=this.itemQuantity;}if(this.itemCategory){apiKeys[_FlagshipConstant.IV_API_ITEM]=this.itemCategory;}return apiKeys;}},{key:"toObject",value:function toObject(){return Object.assign({},_superPropGet(Item,"toObject",this,3)([]),{transactionId:this.transactionId,productName:this.productName,productSku:this.productSku,itemPrice:this.itemPrice,itemQuantity:this.itemQuantity,itemCategory:this.itemCategory});}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 4740:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.BatchingPeriodicCachingStrategy=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__(505));var _slicedToArray2=_interopRequireDefault(__webpack_require__(7826));var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _BatchTriggeredBy=__webpack_require__(594);var _index=__webpack_require__(3664);var _ActivateBatch=__webpack_require__(3401);var _Batch=__webpack_require__(210);var _Troubleshooting=__webpack_require__(6360);var _types=__webpack_require__(3957);var _utils=__webpack_require__(9647);var _BatchingCachingStrategyAbstract=__webpack_require__(7001);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var BatchingPeriodicCachingStrategy=exports.BatchingPeriodicCachingStrategy=function(_BatchingCachingStrat){function BatchingPeriodicCachingStrategy(){(0,_classCallCheck2.default)(this,BatchingPeriodicCachingStrategy);return _callSuper(this,BatchingPeriodicCachingStrategy,arguments);}(0,_inherits2.default)(BatchingPeriodicCachingStrategy,_BatchingCachingStrat);return(0,_createClass2.default)(BatchingPeriodicCachingStrategy,[{key:"addHitInPoolQueue",value:function(){var _addHitInPoolQueue=(0,_asyncToGenerator2.default)(function*(hit){this._hitsPoolQueue.set(hit.key,hit);});function addHitInPoolQueue(_x){return _addHitInPoolQueue.apply(this,arguments);}return addHitInPoolQueue;}()},{key:"sendActivate",value:function(){var _sendActivate=(0,_asyncToGenerator2.default)(function*(_ref){var _this=this;var activateHitsPool=_ref.activateHitsPool,currentActivate=_ref.currentActivate,batchTriggeredBy=_ref.batchTriggeredBy;var headers=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.HEADER_X_API_KEY,this.config.apiKey),_index.HEADER_X_SDK_CLIENT,_index.SDK_INFO.name),_index.HEADER_X_SDK_VERSION,_index.SDK_INFO.version),_index.HEADER_CONTENT_TYPE,_index.HEADER_APPLICATION_JSON);var activateBatch=new _ActivateBatch.ActivateBatch(Array.from(activateHitsPool.filter(function(item){return Date.now()-item.createdAt<_index.DEFAULT_HIT_CACHE_TIME_MS;})),this.config);if(currentActivate){activateBatch.hits.push(currentActivate);}var requestBody=activateBatch.toApiKeys();var url=_index.BASE_API_URL+_index.URL_ACTIVATE_MODIFICATION;var now=Date.now();try{yield this._httpClient.postAsync(url,{headers:headers,body:requestBody,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});(0,_utils.logDebugSprintf)(this.config,_index.TRACKING_MANAGER,_index.HIT_SENT_SUCCESS,_index.ACTIVATE_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});activateBatch.hits.forEach(function(item){_this.onVisitorExposed(item);});this.sendHitsToFsQa(activateBatch.hits);}catch(error){activateBatch.hits.forEach(function(item){_this._activatePoolQueue.set(item.key,item);});(0,_utils.logErrorSprintf)(this.config,_index.TRACKING_MANAGER,_index.TRACKING_MANAGER_ERROR,_index.ACTIVATE_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});var monitoringHttpResponse=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.SEND_ACTIVATE_HIT_ROUTE_ERROR,logLevel:_index.LogLevel.ERROR,visitorId:`${this._flagshipInstanceId}`,traffic:0,config:this.config,httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now,batchTriggeredBy:batchTriggeredBy});this.sendTroubleshootingHit(monitoringHttpResponse);}});function sendActivate(_x2){return _sendActivate.apply(this,arguments);}return sendActivate;}()},{key:"sendBatch",value:function(){var _sendBatch=(0,_asyncToGenerator2.default)(function*(){var _this2=this;var batchTriggeredBy=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_BatchTriggeredBy.BatchTriggeredBy.BatchLength;var hasActivateHit=false;if(this._activatePoolQueue.size){var activateHits=Array.from(this._activatePoolQueue.values());this._activatePoolQueue.clear();yield this.sendActivate({activateHitsPool:activateHits,batchTriggeredBy:batchTriggeredBy});hasActivateHit=true;}var headers=(0,_defineProperty2.default)({},_index.HEADER_CONTENT_TYPE,_index.HEADER_APPLICATION_JSON);var batch=new _Batch.Batch({hits:[]});batch.config=this.config;var batchSize=0;var hitKeysToRemove=[];for(var _ref2 of this._hitsPoolQueue){var _ref3=(0,_slicedToArray2.default)(_ref2,2);var key=_ref3[0];var item=_ref3[1];if(Date.now()-item.createdAt>=_index.DEFAULT_HIT_CACHE_TIME_MS){hitKeysToRemove.push(key);continue;}batchSize=JSON.stringify(batch).length;if(batchSize>_index.BATCH_MAX_SIZE){break;}batch.hits.push(item);hitKeysToRemove.push(key);}hitKeysToRemove.forEach(function(key){_this2._hitsPoolQueue.delete(key);});if(!batch.hits.length){if(hasActivateHit){yield this.cacheHit(this._activatePoolQueue);}return;}var requestBody=batch.toApiKeys();var now=Date.now();try{yield this._httpClient.postAsync(_index.HIT_EVENT_URL,{headers:headers,body:requestBody,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});(0,_utils.logDebugSprintf)(this.config,_index.TRACKING_MANAGER,_index.HIT_SENT_SUCCESS,_index.BATCH_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:_index.HIT_EVENT_URL,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});this.sendHitsToFsQa(batch.hits);this.dispatchHitsToTag(batch.hits);}catch(error){batch.hits.forEach(function(hit){_this2._hitsPoolQueue.set(hit.key,hit);});(0,_utils.logErrorSprintf)(this.config,_index.TRACKING_MANAGER,_index.TRACKING_MANAGER_ERROR,_index.BATCH_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:_index.HIT_EVENT_URL,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});var monitoringHttpResponse=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR,logLevel:_index.LogLevel.ERROR,visitorId:`${this._flagshipInstanceId}`,traffic:0,config:this.config,httpRequestBody:requestBody,httpRequestHeaders:headers,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseMethod:'POST',httpResponseUrl:_index.HIT_EVENT_URL,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now});this.addTroubleshootingHit(monitoringHttpResponse);}var mergedQueue=new Map([].concat((0,_toConsumableArray2.default)(this._hitsPoolQueue),(0,_toConsumableArray2.default)(this._activatePoolQueue)));yield this.flushAllHits();yield this.cacheHit(mergedQueue);});function sendBatch(){return _sendBatch.apply(this,arguments);}return sendBatch;}()}]);}(_BatchingCachingStrategyAbstract.BatchingCachingStrategyAbstract);

/***/ }),

/***/ 4743:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.BucketingConfig=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _DecisionMode=__webpack_require__(7086);var _FlagshipConfig2=__webpack_require__(4869);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var BucketingConfig=exports.BucketingConfig=function(_FlagshipConfig){function BucketingConfig(param){var _param$pollingInterva;var _this;(0,_classCallCheck2.default)(this,BucketingConfig);_this=_callSuper(this,BucketingConfig,[Object.assign({},param,{decisionMode:_DecisionMode.DecisionMode.BUCKETING})]);_this.pollingInterval=(_param$pollingInterva=param==null?void 0:param.pollingInterval)!=null?_param$pollingInterva:_index.DEFAULT_POLLING_INTERVAL;_this.onBucketingUpdated=param==null?void 0:param.onBucketingUpdated;_this.fetchThirdPartyData=param==null?void 0:param.fetchThirdPartyData;return _this;}(0,_inherits2.default)(BucketingConfig,_FlagshipConfig);return(0,_createClass2.default)(BucketingConfig);}(_FlagshipConfig2.FlagshipConfig);

/***/ }),

/***/ 4869:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.statusChangeError=exports.FlagshipConfig=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var _TrackingManagerConfig=__webpack_require__(861);var _sdkVersion=__webpack_require__(3674);var _DecisionMode=__webpack_require__(7086);var statusChangeError=exports.statusChangeError='statusChangedCallback must be a function';var FlagshipConfig=exports.FlagshipConfig=function(){function FlagshipConfig(param){(0,_classCallCheck2.default)(this,FlagshipConfig);this._batchActivateHits=false;var envId=param.envId,apiKey=param.apiKey,timeout=param.timeout,logLevel=param.logLevel,logManager=param.logManager,onSdkStatusChanged=param.onSdkStatusChanged,fetchNow=param.fetchNow,decisionMode=param.decisionMode,reuseVisitorIds=param.reuseVisitorIds,initialBucketing=param.initialBucketing,decisionApiUrl=param.decisionApiUrl,hitDeduplicationTime=param.hitDeduplicationTime,visitorCacheImplementation=param.visitorCacheImplementation,hitCacheImplementation=param.hitCacheImplementation,disableCache=param.disableCache,language=param.language,sdkVersion=param.sdkVersion,trackingManagerConfig=param.trackingManagerConfig,onLog=param.onLog,onVisitorExposed=param.onVisitorExposed,nextFetchConfig=param.nextFetchConfig,fetchFlagsBufferingTime=param.fetchFlagsBufferingTime,disableDeveloperUsageTracking=param.disableDeveloperUsageTracking,batchActivateHits=param.batchActivateHits;this.initQaMode();this.initSDKInfo(language,sdkVersion);if(logManager){this.logManager=logManager;}this._batchActivateHits=batchActivateHits;this.fetchFlagsBufferingTime=fetchFlagsBufferingTime!=null?fetchFlagsBufferingTime:_index.FETCH_FLAG_BUFFERING_DEFAULT_TIME;this.nextFetchConfig=nextFetchConfig||{revalidate:20};this._trackingManagerConfig=new _TrackingManagerConfig.TrackingManagerConfig(trackingManagerConfig||{});this.onLog=onLog;this.decisionApiUrl=decisionApiUrl||_index.BASE_API_URL;this._envId=envId;this._apiKey=apiKey;this.logLevel=logLevel!=null?logLevel:_index.LogLevel.INFO;this.timeout=timeout||_index.REQUEST_TIME_OUT;this.setFetchNow(fetchNow);this.reuseVisitorIds=typeof reuseVisitorIds==='undefined'||reuseVisitorIds;this._decisionMode=decisionMode||_DecisionMode.DecisionMode.DECISION_API;this._initialBucketing=initialBucketing;this.hitDeduplicationTime=hitDeduplicationTime!=null?hitDeduplicationTime:_index.DEFAULT_DEDUPLICATION_TIME;this.disableCache=!!disableCache;this.disableDeveloperUsageTracking=disableDeveloperUsageTracking||false;if(visitorCacheImplementation){this.visitorCacheImplementation=visitorCacheImplementation;}if(hitCacheImplementation){this.hitCacheImplementation=hitCacheImplementation;}this.onSdkStatusChanged=onSdkStatusChanged;this._onVisitorExposed=onVisitorExposed;}return(0,_createClass2.default)(FlagshipConfig,[{key:"batchActivateHits",get:function get(){return this._batchActivateHits;},set:function set(v){this._batchActivateHits=v;}},{key:"isQAModeEnabled",get:function get(){return this._isQAModeEnabled;},set:function set(v){this._isQAModeEnabled=v;}},{key:"disableDeveloperUsageTracking",get:function get(){return this._disableDeveloperUsageTracking;},set:function set(v){this._disableDeveloperUsageTracking=v;}},{key:"fetchFlagsBufferingTime",get:function get(){return this._fetchFlagsBufferingTime;},set:function set(v){this._fetchFlagsBufferingTime=v;}},{key:"nextFetchConfig",get:function get(){return this._nextFetchConfig;},set:function set(v){this._nextFetchConfig=v;}},{key:"fetchThirdPartyData",get:function get(){return this._fetchThirdPartyData;},set:function set(v){this._fetchThirdPartyData=v;}},{key:"trackingManagerConfig",get:function get(){return this._trackingManagerConfig;}},{key:"onLog",get:function get(){return this._onLog;},set:function set(v){this._onLog=v;}},{key:"onVisitorExposed",get:function get(){return this._onVisitorExposed;}},{key:"setFetchNow",value:function setFetchNow(fetchNow){if(true){this.fetchNow=typeof fetchNow==='undefined'?true:fetchNow;}else{}}},{key:"initQaMode",value:function initQaMode(){if(false){ var isQAModeEnabled; }}},{key:"initSDKInfo",value:function initSDKInfo(language,sdkVersion){switch(language){case 1:_index.SDK_INFO.name='ReactJS';_index.SDK_INFO.version=sdkVersion!=null?sdkVersion:_sdkVersion.version;break;case 2:_index.SDK_INFO.name='React-Native';_index.SDK_INFO.version=sdkVersion!=null?sdkVersion:_sdkVersion.version;break;default:_index.SDK_INFO.name=typeof window!=='undefined'&&'Deno'in window?'Deno':'TypeScript';_index.SDK_INFO.version=_sdkVersion.version;break;}}},{key:"initialBucketing",get:function get(){return this._initialBucketing;},set:function set(v){this._initialBucketing=v;}},{key:"reuseVisitorIds",get:function get(){return this._reuseVisitorIds;},set:function set(v){this._reuseVisitorIds=v;}},{key:"onBucketingUpdated",get:function get(){return this._onBucketingUpdated;},set:function set(v){this._onBucketingUpdated=v;}},{key:"envId",get:function get(){return this._envId;},set:function set(value){this._envId=value;}},{key:"apiKey",get:function get(){return this._apiKey;},set:function set(value){this._apiKey=value;}},{key:"decisionMode",get:function get(){return this._decisionMode;}},{key:"timeout",get:function get(){return this._timeout;},set:function set(value){this._timeout=value;}},{key:"logLevel",get:function get(){return this._logLevel;},set:function set(value){this._logLevel=value;}},{key:"fetchNow",get:function get(){return this._fetchNow;},set:function set(v){this._fetchNow=v;}},{key:"pollingInterval",get:function get(){return this._pollingInterval;},set:function set(v){this._pollingInterval=v;}},{key:"hitDeduplicationTime",get:function get(){return this._hitDeduplicationTime;},set:function set(v){if(typeof v!=='number'){(0,_utils.logError)(this,(0,_utils.sprintf)(_index.TYPE_ERROR,'hitDeduplicationTime','number'),'hitDeduplicationTime');return;}this._hitDeduplicationTime=v;}},{key:"visitorCacheImplementation",get:function get(){return this._visitorCacheImplementation;},set:function set(v){this._visitorCacheImplementation=v;}},{key:"hitCacheImplementation",get:function get(){return this._hitCacheImplementation;},set:function set(v){this._hitCacheImplementation=v;}},{key:"disableCache",get:function get(){return this._disableCache;},set:function set(v){this._disableCache=v;}},{key:"onSdkStatusChanged",get:function get(){return this._onSdkStatusChanged;},set:function set(fn){if(fn&&typeof fn!=='function'){(0,_utils.logError)(this,statusChangeError,'onSdkStatusChanged');return;}this._onSdkStatusChanged=fn;}},{key:"logManager",get:function get(){return this._logManager;},set:function set(value){this._logManager=value;}},{key:"decisionApiUrl",get:function get(){return this._decisionApiUrl;},set:function set(v){if(typeof v!=='string'){(0,_utils.logError)(this,(0,_utils.sprintf)(_index.TYPE_ERROR,'decisionApiUrl','string'),'decisionApiUrl');return;}this._decisionApiUrl=v;}}]);}();

/***/ }),

/***/ 5119:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.EdgeManager=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _BucketingManager2=__webpack_require__(7118);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var EdgeManager=exports.EdgeManager=function(_BucketingManager){function EdgeManager(){(0,_classCallCheck2.default)(this,EdgeManager);return _callSuper(this,EdgeManager,arguments);}(0,_inherits2.default)(EdgeManager,_BucketingManager);return(0,_createClass2.default)(EdgeManager,[{key:"getCampaignsAsync",value:function getCampaignsAsync(visitor){return _superPropGet(EdgeManager,"getCampaignsAsync",this,3)([visitor]);}}]);}(_BucketingManager2.BucketingManager);

/***/ }),

/***/ 5151:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.PanicStrategy=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var _DefaultStrategy2=__webpack_require__(8981);var _FSFlagMetadata=__webpack_require__(8955);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var PanicStrategy=exports.PanicStrategy=function(_DefaultStrategy){function PanicStrategy(){(0,_classCallCheck2.default)(this,PanicStrategy);return _callSuper(this,PanicStrategy,arguments);}(0,_inherits2.default)(PanicStrategy,_DefaultStrategy);return(0,_createClass2.default)(PanicStrategy,[{key:"setConsent",value:function setConsent(hasConsented){this.visitor.hasConsented=hasConsented;}},{key:"updateContext",value:function updateContext(){this.log('updateContext');}},{key:"clearContext",value:function clearContext(){this.log('clearContext');}},{key:"lookupHits",value:function(){var _lookupHits=(0,_asyncToGenerator2.default)(function*(){});function lookupHits(){return _lookupHits.apply(this,arguments);}return lookupHits;}()},{key:"lookupVisitor",value:function(){var _lookupVisitor=(0,_asyncToGenerator2.default)(function*(){});function lookupVisitor(){return _lookupVisitor.apply(this,arguments);}return lookupVisitor;}()},{key:"cacheVisitor",value:function(){var _cacheVisitor=(0,_asyncToGenerator2.default)(function*(){});function cacheVisitor(){return _cacheVisitor.apply(this,arguments);}return cacheVisitor;}()},{key:"cacheHit",value:function(){var _cacheHit=(0,_asyncToGenerator2.default)(function*(){});function cacheHit(){return _cacheHit.apply(this,arguments);}return cacheHit;}()},{key:"fetchCampaignsFromCache",value:function fetchCampaignsFromCache(){return[];}},{key:"sendVisitorAllocatedVariations",value:function sendVisitorAllocatedVariations(){}},{key:"sendHit",value:function(){var _sendHit=(0,_asyncToGenerator2.default)(function*(_hit){this.log('sendHit');});function sendHit(_x){return _sendHit.apply(this,arguments);}return sendHit;}()},{key:"sendHits",value:function(){var _sendHits=(0,_asyncToGenerator2.default)(function*(_hits){this.log('sendHits');});function sendHits(_x2){return _sendHits.apply(this,arguments);}return sendHits;}()},{key:"getFlagValue",value:function getFlagValue(param){this.log('Flag.value');return param.defaultValue;}},{key:"visitorExposed",value:function(){var _visitorExposed=(0,_asyncToGenerator2.default)(function*(){this.log(_index.FLAG_VISITOR_EXPOSED);});function visitorExposed(){return _visitorExposed.apply(this,arguments);}return visitorExposed;}()},{key:"getFlagMetadata",value:function getFlagMetadata(param){var emptyMetaData=_FSFlagMetadata.FSFlagMetadata.Empty();(0,_utils.logInfoSprintf)(this.config,_index.FLAG_METADATA,_index.METADATA_PANIC_MODE,this.visitor.visitorId,param.key,emptyMetaData);return emptyMetaData;}},{key:"sendTroubleshootingHit",value:function(){var _sendTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(){});function sendTroubleshootingHit(){return _sendTroubleshootingHit.apply(this,arguments);}return sendTroubleshootingHit;}()},{key:"sendSdkConfigAnalyticHit",value:function(){var _sendSdkConfigAnalyticHit=(0,_asyncToGenerator2.default)(function*(){});function sendSdkConfigAnalyticHit(){return _sendSdkConfigAnalyticHit.apply(this,arguments);}return sendSdkConfigAnalyticHit;}()},{key:"sendActivate",value:function(){var _sendActivate=(0,_asyncToGenerator2.default)(function*(_flagDto,_defaultValue){});function sendActivate(_x3,_x4){return _sendActivate.apply(this,arguments);}return sendActivate;}()},{key:"collectEAIEventsAsync",value:function(){var _collectEAIEventsAsync=(0,_asyncToGenerator2.default)(function*(){this.log('collectEAIData');});function collectEAIEventsAsync(){return _collectEAIEventsAsync.apply(this,arguments);}return collectEAIEventsAsync;}()},{key:"reportEaiPageView",value:function reportEaiPageView(){}},{key:"reportEaiVisitorEvent",value:function reportEaiVisitorEvent(){}},{key:"onEAICollectStatusChange",value:function onEAICollectStatusChange(){}},{key:"addInTrackingManager",value:function(){var _addInTrackingManager=(0,_asyncToGenerator2.default)(function*(){});function addInTrackingManager(){return _addInTrackingManager.apply(this,arguments);}return addInTrackingManager;}()},{key:"log",value:function log(methodName){(0,_utils.logInfoSprintf)(this.config,methodName,_index.METHOD_DEACTIVATED_ERROR,this.visitor.visitorId,methodName,_index.FSSdkStatus[_index.FSSdkStatus.SDK_PANIC]);}}]);}(_DefaultStrategy2.DefaultStrategy);

/***/ }),

/***/ 5233:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.ERROR_MESSAGE=exports.Activate=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _get2=_interopRequireDefault(__webpack_require__(9226));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _HitAbstract2=__webpack_require__(8033);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _superPropGet(t,o,e,r){var p=(0,_get2.default)((0,_getPrototypeOf2.default)(1&r?t.prototype:t),o,e);return 2&r&&"function"==typeof p?function(t){return p.apply(e,t);}:p;}var ERROR_MESSAGE=exports.ERROR_MESSAGE='variationGroupId and variationId are required';var Activate=exports.Activate=function(_HitAbstract){function Activate(param){var _this;(0,_classCallCheck2.default)(this,Activate);_this=_callSuper(this,Activate,[{type:'ACTIVATE',userIp:param.userIp,screenResolution:param.screenResolution,locale:param.locale,sessionNumber:param.sessionNumber,visitorId:param.visitorId,anonymousId:param.anonymousId,qaMode:param.qaMode}]);var variationGroupId=param.variationGroupId,variationId=param.variationId,flagKey=param.flagKey,flagValue=param.flagValue,flagDefaultValue=param.flagDefaultValue,flagMetadata=param.flagMetadata,visitorContext=param.visitorContext;_this.variationGroupId=variationGroupId;_this.variationId=variationId;_this.flagKey=flagKey;_this.flagValue=flagValue;_this.flagDefaultValue=flagDefaultValue;_this.flagMetadata=flagMetadata;_this.visitorContext=visitorContext;return _this;}(0,_inherits2.default)(Activate,_HitAbstract);return(0,_createClass2.default)(Activate,[{key:"variationGroupId",get:function get(){return this._variationGroupId;},set:function set(v){this._variationGroupId=v;}},{key:"variationId",get:function get(){return this._variationId;},set:function set(v){this._variationId=v;}},{key:"flagKey",get:function get(){return this._flagKey;},set:function set(v){this._flagKey=v;}},{key:"flagValue",get:function get(){return this._flagValue;},set:function set(v){this._flagValue=v;}},{key:"flagDefaultValue",get:function get(){return this._flagDefaultValue;},set:function set(v){this._flagDefaultValue=v;}},{key:"flagMetadata",get:function get(){return this._flagMetadata;},set:function set(v){this._flagMetadata=v;}},{key:"visitorContext",get:function get(){return this._visitorContext;},set:function set(v){this._visitorContext=v;}},{key:"isReady",value:function isReady(){var checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!((!checkParent||_superPropGet(Activate,"isReady",this,3)([]))&&this.variationGroupId&&this.variationId);}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.VISITOR_ID_API_ITEM,this.anonymousId||this.visitorId),_index.VARIATION_ID_API_ITEM,this.variationId),_index.VARIATION_GROUP_ID_API_ITEM_ACTIVATE,this.variationGroupId),_index.CUSTOMER_ENV_ID_API_ACTIVATE,this.config.envId),_index.ANONYMOUS_ID,null),_index.QT_API_ITEM,Date.now()-this.createdAt);if(this.visitorId&&this.anonymousId){apiKeys[_index.VISITOR_ID_API_ITEM]=this.visitorId;apiKeys[_index.ANONYMOUS_ID]=this.anonymousId;}if(this.qaMode){apiKeys[_index.QA_MODE_API_ITEM]=this.qaMode;}return apiKeys;}},{key:"toObject",value:function toObject(){return Object.assign({},_superPropGet(Activate,"toObject",this,3)([]),{variationGroupId:this.variationGroupId,variationId:this.variationId});}},{key:"getErrorMessage",value:function getErrorMessage(){return ERROR_MESSAGE;}}]);}(_HitAbstract2.HitAbstract);

/***/ }),

/***/ 5235:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.TrackingManager=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _BatchTriggeredBy=__webpack_require__(594);var _TrackingManagerAbstract=__webpack_require__(8577);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var TrackingManager=exports.TrackingManager=function(_TrackingManagerAbstr){function TrackingManager(){(0,_classCallCheck2.default)(this,TrackingManager);return _callSuper(this,TrackingManager,arguments);}(0,_inherits2.default)(TrackingManager,_TrackingManagerAbstr);return(0,_createClass2.default)(TrackingManager,[{key:"activateFlag",value:function(){var _activateFlag=(0,_asyncToGenerator2.default)(function*(hit){yield this.strategy.activateFlag(hit);});function activateFlag(_x){return _activateFlag.apply(this,arguments);}return activateFlag;}()},{key:"addHit",value:function(){var _addHit=(0,_asyncToGenerator2.default)(function*(hit){yield this.strategy.addHit(hit);});function addHit(_x2){return _addHit.apply(this,arguments);}return addHit;}()},{key:"sendBatch",value:function(){var _sendBatch=(0,_asyncToGenerator2.default)(function*(){yield this.strategy.sendBatch(_BatchTriggeredBy.BatchTriggeredBy.Flush);});function sendBatch(){return _sendBatch.apply(this,arguments);}return sendBatch;}()}]);}(_TrackingManagerAbstract.TrackingManagerAbstract);

/***/ }),

/***/ 5321:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.VisitorAbstract=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _slicedToArray2=_interopRequireDefault(__webpack_require__(7826));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var _DefaultStrategy=__webpack_require__(8981);var _depsNode=__webpack_require__(7471);var _NotReadyStrategy=__webpack_require__(7564);var _PanicStrategy=__webpack_require__(5151);var _NoConsentStrategy=__webpack_require__(4411);var _MurmurHash=__webpack_require__(6572);var _FSFetchStatus=__webpack_require__(9807);var _FSFetchReasons=__webpack_require__(8672);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var VisitorAbstract=exports.VisitorAbstract=function(_EventEmitter){function VisitorAbstract(param){var _this;(0,_classCallCheck2.default)(this,VisitorAbstract);var visitorId=param.visitorId,context=param.context,isAuthenticated=param.isAuthenticated,hasConsented=param.hasConsented,initialFlagsData=param.initialFlagsData,initialCampaigns=param.initialCampaigns,onFetchFlagsStatusChanged=param.onFlagsStatusChanged;_this=_callSuper(this,VisitorAbstract);_this.lastFetchFlagsTimestamp=0;_this._visitorVariationState=param.visitorVariationState||{};_this.initBaseProperties(param);_this.initVisitorId(visitorId,isAuthenticated,hasConsented);_this.initAnalyticTraffic();_this.setConsent(hasConsented||false);_this.updateContext(context);_this.loadPredefinedContext();(0,_utils.logDebugSprintf)(_this.config,_FlagshipConstant.PROCESS_NEW_VISITOR,_FlagshipConstant.PREDEFINED_CONTEXT_LOADED,{fs_client:_index.SDK_INFO.name,fs_version:_index.SDK_INFO.version,fs_users:_this.visitorId});_this.updateCache();var strategy=_this.getStrategy();_this.setInitialFlags(initialFlagsData,strategy);_this.setInitializeCampaigns(initialCampaigns,!!initialFlagsData,strategy);_this.onFetchFlagsStatusChanged=onFetchFlagsStatusChanged;_this.updateFlagsStatus();_this._emotionAi.init(_this);(0,_utils.logDebugSprintf)(_this.config,_FlagshipConstant.PROCESS_NEW_VISITOR,_FlagshipConstant.VISITOR_CREATED,_this.visitorId,_this.context,!!isAuthenticated,!!_this.hasConsented);return _this;}(0,_inherits2.default)(VisitorAbstract,_EventEmitter);return(0,_createClass2.default)(VisitorAbstract,[{key:"visitorVariationState",get:function get(){return this._visitorVariationState;}},{key:"isClientSuppliedID",get:function get(){return this._isClientSuppliedID;}},{key:"hasContextBeenUpdated",get:function get(){return this._hasContextBeenUpdated;},set:function set(v){this._hasContextBeenUpdated=v;}},{key:"getCampaignsPromise",get:function get(){return this._getCampaignsPromise;},set:function set(v){this._getCampaignsPromise=v;}},{key:"onFetchFlagsStatusChanged",get:function get(){return this._onFetchFlagsStatusChanged;},set:function set(v){this._onFetchFlagsStatusChanged=v;}},{key:"flagsStatus",get:function get(){return this._fetchStatus;},set:function set(v){this._fetchStatus=v;if(this.onFetchFlagsStatusChanged){this.onFetchFlagsStatusChanged(v);}}},{key:"segmentHitTroubleshooting",get:function get(){return this._segmentHitTroubleshooting;},set:function set(v){this._segmentHitTroubleshooting=v;}},{key:"consentHitTroubleshooting",get:function get(){return this._consentHitTroubleshooting;},set:function set(v){this._consentHitTroubleshooting=v;}},{key:"sdkInitialData",get:function get(){return this._sdkInitialData;}},{key:"getSdkStatus",value:function getSdkStatus(){return VisitorAbstract.SdkStatus;}},{key:"visitorCacheStatus",get:function get(){return this._visitorCacheStatus;},set:function set(v){this._visitorCacheStatus=v;}},{key:"emotionAi",get:function get(){return this._emotionAi;}},{key:"analyticTraffic",get:function get(){return this._analyticTraffic;}},{key:"initBaseProperties",value:function initBaseProperties(param){var configManager=param.configManager,emotionAi=param.emotionAi,monitoringData=param.monitoringData,visitorProfileCache=param.visitorProfileCache;this._murmurHash=param.murmurHash||new _MurmurHash.MurmurHash();this._emotionAi=emotionAi;this._hasContextBeenUpdated=true;this._exposedVariations={};this._sdkInitialData=monitoringData;this._instanceId=(0,_utils.uuidV4)();this._isCleaningDeDuplicationCache=false;this.deDuplicationCache={};this._context={};this._configManager=configManager;this.campaigns=[];this._visitorProfileCache=visitorProfileCache;}},{key:"getVisitorIdFromTag",value:function getVisitorIdFromTag(){if(false){ var _visitorId, isClientSuppliedID, _window$ABTasty, _window$ABTasty2; }return undefined;}},{key:"hasVisitorProfileClientSuppliedId",value:function hasVisitorProfileClientSuppliedId(visitorProfileCache){return visitorProfileCache.isClientSuppliedId===undefined?true:visitorProfileCache.isClientSuppliedId;}},{key:"initVisitorId",value:function initVisitorId(visitorId,isAuthenticated,hasConsented){var _this$_visitorProfile;var shouldUseCache=this.config.reuseVisitorIds&&hasConsented===true;var visitorCache=shouldUseCache?(_this$_visitorProfile=this._visitorProfileCache)==null?void 0:_this$_visitorProfile.loadVisitorProfile():null;if(visitorCache){(0,_utils.logDebugSprintf)(this.config,_FlagshipConstant.PROCESS_NEW_VISITOR,_FlagshipConstant.VISITOR_PROFILE_LOADED,visitorCache);}this._isClientSuppliedID=false;if(visitorId){this.visitorId=visitorId;this._isClientSuppliedID=true;}else if(!isAuthenticated&&visitorCache!=null&&visitorCache.anonymousId){this.visitorId=visitorCache.anonymousId;this._isClientSuppliedID=this.hasVisitorProfileClientSuppliedId(visitorCache);}else if(visitorCache!=null&&visitorCache.visitorId){this.visitorId=visitorCache.visitorId;this._isClientSuppliedID=this.hasVisitorProfileClientSuppliedId(visitorCache);}else{this.visitorId=this.getVisitorIdFromTag()||this.generateVisitorId();}this._anonymousId=null;if(isAuthenticated){this._anonymousId=(visitorCache==null?void 0:visitorCache.anonymousId)||(0,_utils.uuidV4)();}}},{key:"updateFlagsStatus",value:function updateFlagsStatus(){if(this._flags.size>0){this.flagsStatus={status:_FSFetchStatus.FSFetchStatus.INITIAL_DATA,reason:_FSFetchReasons.FSFetchReasons.NONE};return;}this.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.FLAGS_NEVER_FETCHED};}},{key:"updateCache",value:function updateCache(){var _this$_visitorProfile2;var visitorProfile=this.hasConsented?{visitorId:this.visitorId,anonymousId:this.anonymousId,isClientSuppliedId:this.isClientSuppliedID}:undefined;(_this$_visitorProfile2=this._visitorProfileCache)==null||_this$_visitorProfile2.saveVisitorProfile(visitorProfile);}},{key:"traffic",get:function get(){return this._traffic;},set:function set(v){this._traffic=v;}},{key:"instanceId",get:function get(){return this._instanceId;}},{key:"getCurrentDateTime",value:function getCurrentDateTime(){return new Date();}},{key:"initAnalyticTraffic",value:function initAnalyticTraffic(){var uniqueId=this.visitorId+this.getCurrentDateTime().toDateString();var hash=this._murmurHash.murmurHash3Int32(uniqueId);this._analyticTraffic=hash%1000;}},{key:"generateVisitorId",value:function generateVisitorId(){var visitorId=(0,_utils.uuidV4)();(0,_utils.logDebugSprintf)(this.config,_FlagshipConstant.PROCESS_NEW_VISITOR,_FlagshipConstant.VISITOR_ID_GENERATED,visitorId);return visitorId;}},{key:"clearDeDuplicationCache",value:function clearDeDuplicationCache(deDuplicationTime){if(this._isCleaningDeDuplicationCache){return;}this._isCleaningDeDuplicationCache=true;var entries=Object.entries(this.deDuplicationCache);for(var _ref of entries){var _ref2=(0,_slicedToArray2.default)(_ref,2);var _key=_ref2[0];var _value=_ref2[1];if(Date.now()-_value>deDuplicationTime*1000){delete this.deDuplicationCache[_key];}}this._isCleaningDeDuplicationCache=false;}},{key:"setInitialFlags",value:function setInitialFlags(flags,strategy){var _this2=this;this._flags=new Map();if(!Array.isArray(flags)){return;}flags.forEach(function(item){var _hexToValue;_this2._flags.set(item.key,{key:item.key,campaignId:item.campaignId,campaignName:item.campaignName,variationGroupId:item.variationGroupId,variationGroupName:item.variationGroupName,variationId:item.variationId,variationName:item.variationName,isReference:item.isReference,value:(_hexToValue=(0,_utils.hexToValue)(item.hex,_this2.config))==null?void 0:_hexToValue.v,slug:item.slug,campaignType:item.campaignType});});strategy==null||strategy.sendVisitorAllocatedVariations();}},{key:"setInitializeCampaigns",value:function setInitializeCampaigns(campaigns,hasInitialFlags,strategy){if(campaigns&&Array.isArray(campaigns)&&!hasInitialFlags){strategy==null||strategy.updateCampaigns(campaigns);strategy==null||strategy.sendVisitorAllocatedVariations();}}},{key:"loadPredefinedContext",value:function loadPredefinedContext(){this.context.fs_client=_index.SDK_INFO.name;this.context.fs_version=_index.SDK_INFO.version;this.context.fs_users=this.visitorId;}},{key:"visitorId",get:function get(){return this._visitorId;},set:function set(v){if(!v||typeof v!=='string'){(0,_utils.logError)(this.config,_index.VISITOR_ID_ERROR,'VISITOR ID');return;}this._visitorId=v;this.loadPredefinedContext();this.visitorCache=undefined;}},{key:"hasConsented",get:function get(){return this._hasConsented;},set:function set(v){this._hasConsented=v;}},{key:"setConsent",value:function setConsent(hasConsented){this.hasConsented=hasConsented;this.getStrategy().setConsent(hasConsented);}},{key:"context",get:function get(){return this._context;},set:function set(v){this._context={};this.updateContext(v);}},{key:"flagsData",get:function get(){return this._flags;},set:function set(v){this._flags=v;}},{key:"configManager",get:function get(){return this._configManager;}},{key:"config",get:function get(){return this.configManager.config;}},{key:"campaigns",get:function get(){return this._campaigns;},set:function set(v){this._campaigns=v;}},{key:"anonymousId",get:function get(){return this._anonymousId;},set:function set(v){this._anonymousId=v;}},{key:"getStrategy",value:function getStrategy(){var strategy;var params={visitor:this,murmurHash:new _MurmurHash.MurmurHash()};var status=this.getSdkStatus();if(status===undefined||status===_index.FSSdkStatus.SDK_NOT_INITIALIZED){strategy=new _NotReadyStrategy.NotReadyStrategy(params);}else if(status===_index.FSSdkStatus.SDK_PANIC){strategy=new _PanicStrategy.PanicStrategy(params);}else if(!this.hasConsented){strategy=new _NoConsentStrategy.NoConsentStrategy(params);}else{strategy=new _DefaultStrategy.DefaultStrategy(params);}return strategy;}},{key:"sendExposedVariation",value:function(){var _sendExposedVariation=(0,_asyncToGenerator2.default)(function*(flag){var _this3=this;if(false){ var message, DELAY, BATCH_SIZE; }});function sendExposedVariation(_x){return _sendExposedVariation.apply(this,arguments);}return sendExposedVariation;}()},{key:"collectEAIEventsAsync",value:function collectEAIEventsAsync(currentPage){return this.getStrategy().collectEAIEventsAsync(currentPage);}},{key:"sendEaiVisitorEvent",value:function sendEaiVisitorEvent(event){this.getStrategy().reportEaiVisitorEvent(event);}},{key:"sendEaiPageView",value:function sendEaiPageView(pageView){this.getStrategy().reportEaiPageView(pageView);}},{key:"onEAICollectStatusChange",value:function onEAICollectStatusChange(callback){this.getStrategy().onEAICollectStatusChange(callback);}},{key:"cleanup",value:function cleanup(){this.getStrategy().cleanup();}},{key:"getCachedEAIScore",value:function(){var _getCachedEAIScore=(0,_asyncToGenerator2.default)(function*(){var _this$visitorCache;if(!this.visitorCache){yield this.getStrategy().lookupVisitor();}return(_this$visitorCache=this.visitorCache)==null||(_this$visitorCache=_this$visitorCache.data)==null?void 0:_this$visitorCache.eAIScore;});function getCachedEAIScore(){return _getCachedEAIScore.apply(this,arguments);}return getCachedEAIScore;}()},{key:"isEAIDataCollected",value:function(){var _isEAIDataCollected=(0,_asyncToGenerator2.default)(function*(){var _this$visitorCache2;if(!this.visitorCache){yield this.getStrategy().lookupVisitor();}return((_this$visitorCache2=this.visitorCache)==null||(_this$visitorCache2=_this$visitorCache2.data)==null?void 0:_this$visitorCache2.isEAIDataCollected)||false;});function isEAIDataCollected(){return _isEAIDataCollected.apply(this,arguments);}return isEAIDataCollected;}()},{key:"setCachedEAIScore",value:function(){var _setCachedEAIScore=(0,_asyncToGenerator2.default)(function*(eAIScore){this.getStrategy().cacheVisitor(eAIScore);});function setCachedEAIScore(_x2){return _setCachedEAIScore.apply(this,arguments);}return setCachedEAIScore;}()},{key:"setIsEAIDataCollected",value:function(){var _setIsEAIDataCollected=(0,_asyncToGenerator2.default)(function*(isEAIDataCollected){this.getStrategy().cacheVisitor(undefined,isEAIDataCollected);});function setIsEAIDataCollected(_x3){return _setIsEAIDataCollected.apply(this,arguments);}return setIsEAIDataCollected;}()},{key:"sendTroubleshooting",value:function sendTroubleshooting(hit){return this.getStrategy().sendTroubleshootingHit(hit);}},{key:"sendUsageHit",value:function sendUsageHit(hit){return this.getStrategy().sendUsageHit(hit);}},{key:"addInTrackingManager",value:function addInTrackingManager(hit){return this.getStrategy().addInTrackingManager(hit);}}]);}(_depsNode.EventEmitter);

/***/ }),

/***/ 5564:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/asyncToGenerator");

/***/ }),

/***/ 5884:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/wrapNativeSuper");

/***/ }),

/***/ 5998:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/classCallCheck");

/***/ }),

/***/ 6090:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.DecisionManager=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(3664);var _types=__webpack_require__(3957);var _utils=__webpack_require__(9647);var _Troubleshooting=__webpack_require__(6360);var DecisionManager=exports.DecisionManager=function(){function DecisionManager(_ref){var httpClient=_ref.httpClient,config=_ref.config,trackingManager=_ref.trackingManager,flagshipInstanceId=_ref.flagshipInstanceId;(0,_classCallCheck2.default)(this,DecisionManager);this._panic=false;this._config=config;this._httpClient=httpClient;this._trackingManager=trackingManager;this._flagshipInstanceId=flagshipInstanceId||'';}return(0,_createClass2.default)(DecisionManager,[{key:"trackingManager",get:function get(){return this._trackingManager;},set:function set(v){this._trackingManager=v;}},{key:"flagshipInstanceId",get:function get(){return this._flagshipInstanceId;},set:function set(v){this._flagshipInstanceId=v;}},{key:"lastBucketingTimestamp",get:function get(){return this._lastBucketingTimestamp;}},{key:"troubleshooting",get:function get(){return this._troubleshooting;},set:function set(v){this._troubleshooting=v;}},{key:"config",get:function get(){return this._config;}},{key:"panic",set:function set(v){this.updateFlagshipStatus(v?_index.FSSdkStatus.SDK_PANIC:_index.FSSdkStatus.SDK_INITIALIZED);this._panic=v;if(v){(0,_utils.logDebug)(this.config,_index.FETCH_FLAGS_PANIC_MODE,_index.PROCESS_FETCHING_FLAGS);}}},{key:"statusChangedCallback",value:function statusChangedCallback(v){this._statusChangedCallback=v;}},{key:"updateFlagshipStatus",value:function updateFlagshipStatus(v){if(typeof this._statusChangedCallback==='function'&&this._statusChangedCallback){this._statusChangedCallback(v);}}},{key:"getModifications",value:function getModifications(campaigns){var modifications=new Map();campaigns.forEach(function(campaign){var object=campaign.variation.modifications.value;for(var key in object){var value=object[key];modifications.set(key,{key:key,campaignId:campaign.id,campaignName:campaign.name||'',variationGroupId:campaign.variationGroupId,variationGroupName:campaign.variationGroupName||'',variationId:campaign.variation.id,variationName:campaign.variation.name||'',isReference:!!campaign.variation.reference,campaignType:campaign.type,slug:campaign.slug,value:value});}});return modifications;}},{key:"isPanic",value:function isPanic(){return this._panic;}},{key:"handleTroubleshootingError",value:function handleTroubleshootingError(params){var _this$trackingManager;var error=params.error,visitor=params.visitor,requestBody=params.requestBody,headers=params.headers,url=params.url,now=params.now;var troubleshooting=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.GET_CAMPAIGNS_ROUTE_RESPONSE_ERROR,logLevel:_index.LogLevel.ERROR,visitorId:visitor.visitorId,flagshipInstanceId:this.flagshipInstanceId,anonymousId:visitor.anonymousId,visitorSessionId:visitor.instanceId,traffic:100,config:this.config,visitorContext:visitor.context,httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now});(_this$trackingManager=this.trackingManager)==null||_this$trackingManager.addTroubleshootingHit(troubleshooting);var errorMessage=(0,_utils.errorFormat)(error.message||error,{url:url,headers:headers,body:requestBody,duration:Date.now()-now});throw new Error(errorMessage);}},{key:"getDecisionApiCampaignsAsync",value:function(){var _getDecisionApiCampaignsAsync=(0,_asyncToGenerator2.default)(function*(visitor){var headers=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.HEADER_X_API_KEY,`${this.config.apiKey}`),_index.HEADER_X_SDK_CLIENT,_index.SDK_INFO.name),_index.HEADER_X_SDK_VERSION,_index.SDK_INFO.version),_index.HEADER_CONTENT_TYPE,_index.HEADER_APPLICATION_JSON);var requestBody={visitorId:visitor.visitorId,anonymousId:visitor.anonymousId,trigger_hit:false,context:visitor.context,visitor_consent:visitor.hasConsented};var url=`${this.config.decisionApiUrl||_index.BASE_API_URL}${this.config.envId}${_index.URL_CAMPAIGNS}?${_index.EXPOSE_ALL_KEYS}=true&extras[]=accountSettings`;var now=Date.now();try{var _response$body,_response$body2,_response$body3;var response=yield this._httpClient.postAsync(url,{headers:headers,timeout:this.config.timeout,body:requestBody,nextFetchConfig:this.config.nextFetchConfig});this.panic=!!(response!=null&&(_response$body=response.body)!=null&&_response$body.panic);var campaigns=null;if(response!=null&&(_response$body2=response.body)!=null&&_response$body2.campaigns){campaigns=response.body.campaigns;}var troubleshooting=response==null||(_response$body3=response.body)==null||(_response$body3=_response$body3.extras)==null||(_response$body3=_response$body3.accountSettings)==null?void 0:_response$body3.troubleshooting;if(troubleshooting){this.troubleshooting={startDate:new Date(troubleshooting.startDate),endDate:new Date(troubleshooting.endDate),timezone:troubleshooting.timezone,traffic:troubleshooting.traffic};}return campaigns;}catch(error){this.handleTroubleshootingError({error:error,visitor:visitor,requestBody:requestBody,headers:headers,url:url,now:now});}});function getDecisionApiCampaignsAsync(_x){return _getDecisionApiCampaignsAsync.apply(this,arguments);}return getDecisionApiCampaignsAsync;}()}]);}();

/***/ }),

/***/ 6228:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.VISITOR_PREFIX=exports.DefaultVisitorCache=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var VISITOR_PREFIX=exports.VISITOR_PREFIX='FS_VISITOR_CACHE_';var DefaultVisitorCache=exports.DefaultVisitorCache=function(){function DefaultVisitorCache(){(0,_classCallCheck2.default)(this,DefaultVisitorCache);}return(0,_createClass2.default)(DefaultVisitorCache,[{key:"cacheVisitor",value:function cacheVisitor(visitorId,data){localStorage.setItem(VISITOR_PREFIX+visitorId,JSON.stringify(data));return Promise.resolve();}},{key:"lookupVisitor",value:function lookupVisitor(visitorId){var data=localStorage.getItem(VISITOR_PREFIX+visitorId);return Promise.resolve(data?JSON.parse(data):null);}},{key:"flushVisitor",value:function flushVisitor(visitorId){localStorage.removeItem(VISITOR_PREFIX+visitorId);return Promise.resolve();}}]);}();

/***/ }),

/***/ 6261:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 6320:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.HttpError=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _wrapNativeSuper2=_interopRequireDefault(__webpack_require__(5884));function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var HttpError=exports.HttpError=function(_Error){function HttpError(statusCode,message,headers){var _this;(0,_classCallCheck2.default)(this,HttpError);_this=_callSuper(this,HttpError,[message]);_this._statusCode=statusCode;_this._headers=headers;return _this;}(0,_inherits2.default)(HttpError,_Error);return(0,_createClass2.default)(HttpError,[{key:"headers",get:function get(){return this._headers;}},{key:"statusCode",get:function get(){return this._statusCode;}}]);}((0,_wrapNativeSuper2.default)(Error));

/***/ }),

/***/ 6360:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.Troubleshooting=void 0;var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _Diagnostic2=__webpack_require__(1111);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var Troubleshooting=exports.Troubleshooting=function(_Diagnostic){function Troubleshooting(param){(0,_classCallCheck2.default)(this,Troubleshooting);return _callSuper(this,Troubleshooting,[Object.assign({},param,{type:'TROUBLESHOOTING'})]);}(0,_inherits2.default)(Troubleshooting,_Diagnostic);return(0,_createClass2.default)(Troubleshooting);}(_Diagnostic2.Diagnostic);

/***/ }),

/***/ 6572:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.MurmurHash=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var MurmurHash=exports.MurmurHash=function(){function MurmurHash(){(0,_classCallCheck2.default)(this,MurmurHash);}return(0,_createClass2.default)(MurmurHash,[{key:"murmurHash3Int32",value:function murmurHash3Int32(key){var seed=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var h1,h1b,k1,i;var remainder=key.length&3;var bytes=key.length-remainder;h1=seed;var c1=0xcc9e2d51;var c2=0x1b873593;i=0;while(i<bytes){k1=key.charCodeAt(i)&0xff|(key.charCodeAt(++i)&0xff)<<8|(key.charCodeAt(++i)&0xff)<<16|(key.charCodeAt(++i)&0xff)<<24;++i;k1=(k1&0xffff)*c1+(((k1>>>16)*c1&0xffff)<<16)&0xffffffff;k1=k1<<15|k1>>>17;k1=(k1&0xffff)*c2+(((k1>>>16)*c2&0xffff)<<16)&0xffffffff;h1^=k1;h1=h1<<13|h1>>>19;h1b=(h1&0xffff)*5+(((h1>>>16)*5&0xffff)<<16)&0xffffffff;h1=(h1b&0xffff)+0x6b64+(((h1b>>>16)+0xe654&0xffff)<<16);}k1=0;switch(remainder){case 3:k1^=(key.charCodeAt(i+2)&0xff)<<16;case 2:k1^=(key.charCodeAt(i+1)&0xff)<<8;case 1:k1^=key.charCodeAt(i)&0xff;k1=(k1&0xffff)*c1+(((k1>>>16)*c1&0xffff)<<16)&0xffffffff;k1=k1<<15|k1>>>17;k1=(k1&0xffff)*c2+(((k1>>>16)*c2&0xffff)<<16)&0xffffffff;h1^=k1;}h1^=key.length;h1^=h1>>>16;h1=(h1&0xffff)*0x85ebca6b+(((h1>>>16)*0x85ebca6b&0xffff)<<16)&0xffffffff;h1^=h1>>>13;h1=(h1&0xffff)*0xc2b2ae35+(((h1>>>16)*0xc2b2ae35&0xffff)<<16)&0xffffffff;h1^=h1>>>16;return h1>>>0;}}]);}();

/***/ }),

/***/ 6609:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/possibleConstructorReturn");

/***/ }),

/***/ 6623:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.ApiSdkManager=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _types=__webpack_require__(3957);var _FlagshipConstant=__webpack_require__(1786);var _utils=__webpack_require__(9647);var _LogLevel=__webpack_require__(8490);var _Troubleshooting=__webpack_require__(6360);var ApiSdkManager=exports.ApiSdkManager=function(){function ApiSdkManager(_ref){var httpClient=_ref.httpClient,sdkConfig=_ref.sdkConfig,trackingManager=_ref.trackingManager,flagshipInstanceId=_ref.flagshipInstanceId;(0,_classCallCheck2.default)(this,ApiSdkManager);this._httpClient=httpClient;this._config=sdkConfig;this._trackingManager=trackingManager;this._flagshipInstanceId=flagshipInstanceId;}return(0,_createClass2.default)(ApiSdkManager,[{key:"resetSdk",value:function resetSdk(){this._EAIConfig=undefined;}},{key:"getBucketingContent",value:function getBucketingContent(){return undefined;}},{key:"sendTroubleshooting",value:function sendTroubleshooting(accountSettings,url,response,now){var troubleshooting=new _Troubleshooting.Troubleshooting({flagshipInstanceId:this._flagshipInstanceId,label:_types.TroubleshootingLabel.ACCOUNT_SETTINGS,logLevel:_LogLevel.LogLevel.DEBUG,visitorId:this._flagshipInstanceId,config:this._config,accountSettings:accountSettings,traffic:0,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseHeaders:response==null?void 0:response.headers,httpResponseCode:response==null?void 0:response.status,httpResponseTime:Date.now()-now});this._trackingManager.initTroubleshootingHit=troubleshooting;}},{key:"sendErrorTroubleshooting",value:function sendErrorTroubleshooting(url,error,now){var troubleshootingHit=new _Troubleshooting.Troubleshooting({visitorId:this._flagshipInstanceId,flagshipInstanceId:this._flagshipInstanceId,label:_types.TroubleshootingLabel.ACCOUNT_SETTINGS_ERROR,traffic:0,logLevel:_LogLevel.LogLevel.ERROR,config:this._config,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.status,httpResponseTime:Date.now()-now});this._trackingManager.initTroubleshootingHit=troubleshootingHit;}},{key:"initSdk",value:function(){var _initSdk=(0,_asyncToGenerator2.default)(function*(){var now=Date.now();var url=(0,_utils.sprintf)(_FlagshipConstant.CDN_ACCOUNT_SETTINGS_URL,this._config.envId);try{var response=yield this._httpClient.getAsync(url);this._EAIConfig=response.body.accountSettings;this.sendTroubleshooting(response.body.accountSettings,url,response,now);}catch(error){(0,_utils.logErrorSprintf)(this._config,'Error while fetching EAI config: {0}',(error==null?void 0:error.message)||error);this.sendErrorTroubleshooting(url,error,now);}});function initSdk(){return _initSdk.apply(this,arguments);}return initSdk;}()},{key:"getEAIConfig",value:function getEAIConfig(){return this._EAIConfig;}}]);}();

/***/ }),

/***/ 6691:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.FSSdkStatus=void 0;var FSSdkStatus=exports.FSSdkStatus=function(FSSdkStatus){FSSdkStatus[FSSdkStatus["SDK_NOT_INITIALIZED"]=0]="SDK_NOT_INITIALIZED";FSSdkStatus[FSSdkStatus["SDK_INITIALIZING"]=1]="SDK_INITIALIZING";FSSdkStatus[FSSdkStatus["SDK_PANIC"]=2]="SDK_PANIC";FSSdkStatus[FSSdkStatus["SDK_INITIALIZED"]=3]="SDK_INITIALIZED";return FSSdkStatus;}({});

/***/ }),

/***/ 6707:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.CacheStrategy=void 0;var CacheStrategy=exports.CacheStrategy=function(CacheStrategy){CacheStrategy[CacheStrategy["CONTINUOUS_CACHING"]=0]="CONTINUOUS_CACHING";CacheStrategy[CacheStrategy["PERIODIC_CACHING"]=1]="PERIODIC_CACHING";return CacheStrategy;}({});

/***/ }),

/***/ 6724:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.EmotionAI=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _types=__webpack_require__(3957);var _CommonEmotionAI2=__webpack_require__(7100);var _PageView=__webpack_require__(7518);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var EmotionAI=exports.EmotionAI=function(_CommonEmotionAI){function EmotionAI(){(0,_classCallCheck2.default)(this,EmotionAI);return _callSuper(this,EmotionAI,arguments);}(0,_inherits2.default)(EmotionAI,_CommonEmotionAI);return(0,_createClass2.default)(EmotionAI,[{key:"cleanup",value:function cleanup(){this._isEAIDataCollecting=false;}},{key:"processPageView",value:function(){var _processPageView=(0,_asyncToGenerator2.default)(function*(currentPage){var pageView=new _PageView.PageView(currentPage);yield this.reportPageView(pageView);});function processPageView(_x){return _processPageView.apply(this,arguments);}return processPageView;}()},{key:"startCollectingEAIData",value:function(){var _startCollectingEAIData=(0,_asyncToGenerator2.default)(function*(visitorId,currentPage){var _this$_onEAICollectSt;this._isEAIDataCollecting=true;this._startCollectingEAIDataTimestamp=Date.now();(_this$_onEAICollectSt=this._onEAICollectStatusChange)==null||_this$_onEAICollectSt.call(this,true);if(currentPage){yield this.processPageView(currentPage);}this.sendCollectingTroubleshooting(this._startCollectingEAIDataTimestamp,_types.TroubleshootingLabel.EMOTION_AI_STOP_COLLECTING);this.sendCollectingUsageHit(_types.TroubleshootingLabel.EMOTION_AI_START_COLLECTING);});function startCollectingEAIData(_x2,_x3){return _startCollectingEAIData.apply(this,arguments);}return startCollectingEAIData;}()},{key:"removeListeners",value:function removeListeners(){var _this$_onEAICollectSt2;(_this$_onEAICollectSt2=this._onEAICollectStatusChange)==null||_this$_onEAICollectSt2.call(this,false);}}]);}(_CommonEmotionAI2.CommonEmotionAI);

/***/ }),

/***/ 6770:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));Object.defineProperty(exports, "EventCategory", ({enumerable:true,get:function get(){return _EventCategory.EventCategory;}}));var _EventCategory=__webpack_require__(8010);

/***/ }),

/***/ 7001:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.BatchingCachingStrategyAbstract=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _slicedToArray2=_interopRequireDefault(__webpack_require__(7826));var _readOnlyError2=_interopRequireDefault(__webpack_require__(614));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _toConsumableArray2=_interopRequireDefault(__webpack_require__(505));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(8747);var _BatchTriggeredBy=__webpack_require__(594);var _index2=__webpack_require__(3664);var _Activate=__webpack_require__(5233);var _Troubleshooting=__webpack_require__(6360);var _index3=__webpack_require__(6770);var _types=__webpack_require__(3957);var _utils=__webpack_require__(9647);var _Batch=__webpack_require__(210);var BatchingCachingStrategyAbstract=exports.BatchingCachingStrategyAbstract=function(){function BatchingCachingStrategyAbstract(param){(0,_classCallCheck2.default)(this,BatchingCachingStrategyAbstract);var config=param.config,hitsPoolQueue=param.hitsPoolQueue,httpClient=param.httpClient,activatePoolQueue=param.activatePoolQueue,troubleshootingQueue=param.troubleshootingQueue,flagshipInstanceId=param.flagshipInstanceId,analyticHitQueue=param.analyticHitQueue,initTroubleshootingHi=param.initTroubleshootingHit,sharedActionTracking=param.sharedActionTracking;this._HitsToFsQa=[];this._hasInitTroubleshootingHitSent=false;this._config=config;this._hitsPoolQueue=hitsPoolQueue;this._httpClient=httpClient;this._activatePoolQueue=activatePoolQueue;this._troubleshootingQueue=troubleshootingQueue;this._flagshipInstanceId=flagshipInstanceId;this._usageHitQueue=analyticHitQueue;this._isUsageHitQueueSending=false;this._isTroubleshootingQueueSending=false;this._initTroubleshootingHit=initTroubleshootingHi;this._sharedActionTracking=sharedActionTracking;}return(0,_createClass2.default)(BatchingCachingStrategyAbstract,[{key:"flagshipInstanceId",get:function get(){return this._flagshipInstanceId;}},{key:"troubleshootingData",get:function get(){return this._troubleshootingData;},set:function set(v){this._troubleshootingData=v;}},{key:"config",get:function get(){return this._config;}},{key:"initTroubleshootingHit",get:function get(){return this._initTroubleshootingHit;},set:function set(v){this._initTroubleshootingHit=v;}},{key:"dispatchHitsToTag",value:function dispatchHitsToTag(hits){if(false){ var _this$_sharedActionTr, eventHit, _hit, actionTrackingHits; }}},{key:"sendHitsToFsQa",value:function sendHitsToFsQa(hits){var _this=this;if(false){}}},{key:"addHit",value:function(){var _addHit=(0,_asyncToGenerator2.default)(function*(hit){var _this$config$tracking;var hitKey=`${hit.visitorId}:${(0,_utils.uuidV4)()}`;hit.key=hitKey;yield this.addHitInPoolQueue(hit);if(hit.type===_index2.HitType.EVENT&&hit.action===_index2.FS_CONSENT&&hit.label===`${_index2.SDK_INFO.name}:false`){yield this.notConsent(hit.visitorId);}(0,_utils.logDebugSprintf)(this.config,_index2.TRACKING_MANAGER,_index2.HIT_ADDED_IN_QUEUE,hit.toApiKeys());if((_this$config$tracking=this.config.trackingManagerConfig)!=null&&_this$config$tracking.poolMaxSize&&this._hitsPoolQueue.size>=this.config.trackingManagerConfig.poolMaxSize&&this.config.decisionMode!==_index.DecisionMode.BUCKETING_EDGE){this.sendBatch();}});function addHit(_x){return _addHit.apply(this,arguments);}return addHit;}()},{key:"activateFlag",value:function(){var _activateFlag=(0,_asyncToGenerator2.default)(function*(paramHit){var hit=new _Activate.Activate(paramHit);hit.config=this.config;var hitKey=`${hit.visitorId}:${(0,_utils.uuidV4)()}`;hit.key=hitKey;if(this.config.decisionMode===_index.DecisionMode.BUCKETING_EDGE||this.config.batchActivateHits){yield this.activateFlagEdgeMode(hit);(0,_utils.logDebug)(this.config,(0,_utils.sprintf)(_index2.ACTIVATE_ADDED_IN_QUEUE,JSON.stringify(hit.toApiKeys())),_index2.ADD_ACTIVATE);return;}var activateHitsPool=[];if(this._activatePoolQueue.size){activateHitsPool=Array.from(this._activatePoolQueue.values());}this._activatePoolQueue.clear();yield this.sendActivate({activateHitsPool:activateHitsPool,currentActivate:hit,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy.ActivateLength});});function activateFlag(_x2){return _activateFlag.apply(this,arguments);}return activateFlag;}()},{key:"activateFlagEdgeMode",value:function(){var _activateFlagEdgeMode=(0,_asyncToGenerator2.default)(function*(hit){this._activatePoolQueue.set(hit.key,hit);yield this.cacheHit(new Map([[hit.key,hit]]));});function activateFlagEdgeMode(_x3){return _activateFlagEdgeMode.apply(this,arguments);}return activateFlagEdgeMode;}()},{key:"onVisitorExposed",value:function onVisitorExposed(activate){var onVisitorExposed=this.config.onVisitorExposed;if(typeof onVisitorExposed!=='function'){return;}var fromFlag={key:activate.flagKey,value:activate.flagValue,defaultValue:activate.flagDefaultValue,metadata:activate.flagMetadata};var exposedVisitor={id:activate.visitorId,anonymousId:activate.anonymousId,context:activate.visitorContext};onVisitorExposed({exposedVisitor:exposedVisitor,fromFlag:fromFlag});}},{key:"sendBatch",value:function(){var _sendBatch=(0,_asyncToGenerator2.default)(function*(){var _this2=this;var batchTriggeredBy=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_BatchTriggeredBy.BatchTriggeredBy.BatchLength;if(this._activatePoolQueue.size){var activateHits=Array.from(this._activatePoolQueue.values());this._activatePoolQueue.clear();yield this.sendActivate({activateHitsPool:activateHits,batchTriggeredBy:batchTriggeredBy});}var batch=new _Batch.Batch({hits:[],ds:_index2.SDK_APP});batch.config=this.config;var hitKeysToRemove=[];for(var _ref of this._hitsPoolQueue){var _ref2=(0,_slicedToArray2.default)(_ref,2);var key=_ref2[0];var item=_ref2[1];if(Date.now()-item.createdAt>=_index2.DEFAULT_HIT_CACHE_TIME_MS){hitKeysToRemove.push(key);continue;}var batchSize=JSON.stringify(batch).length;if(batchSize>_index2.BATCH_MAX_SIZE){break;}batch.hits.push(item);hitKeysToRemove.push(key);}hitKeysToRemove.forEach(function(key){_this2._hitsPoolQueue.delete(key);});if(!batch.hits.length){return;}var headers=(0,_defineProperty2.default)({},_index2.HEADER_CONTENT_TYPE,_index2.HEADER_APPLICATION_JSON);var requestBody=batch.toApiKeys();var now=Date.now();try{yield this._httpClient.postAsync(_index2.HIT_EVENT_URL,{headers:headers,body:requestBody,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});(0,_utils.logDebugSprintf)(this.config,_index2.TRACKING_MANAGER,_index2.HIT_SENT_SUCCESS,_index2.BATCH_HIT,{url:_index2.HIT_EVENT_URL,body:requestBody,headers:headers,nextFetchConfig:this.config.nextFetchConfig,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});yield this.flushHits(hitKeysToRemove);this.sendHitsToFsQa(batch.hits);this.dispatchHitsToTag(batch.hits);}catch(error){batch.hits.forEach(function(hit){_this2._hitsPoolQueue.set(hit.key,hit);});(0,_utils.logErrorSprintf)(this.config,_index2.TRACKING_MANAGER,_index2.TRACKING_MANAGER_ERROR,_index2.BATCH_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:_index2.HIT_EVENT_URL,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});var monitoringHttpResponse=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR,logLevel:_index2.LogLevel.ERROR,visitorId:`${this._flagshipInstanceId}`,flagshipInstanceId:this._flagshipInstanceId,traffic:0,config:this.config,httpRequestBody:batch.hits,httpRequestHeaders:headers,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseMethod:'POST',httpResponseUrl:_index2.HIT_EVENT_URL,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now,batchTriggeredBy:batchTriggeredBy});this.sendTroubleshootingHit(monitoringHttpResponse);}});function sendBatch(){return _sendBatch.apply(this,arguments);}return sendBatch;}()},{key:"notConsent",value:function(){var _notConsent=(0,_asyncToGenerator2.default)(function*(visitorId){var _this3=this;var hitKeys=Array.from(this._hitsPoolQueue).filter(function(_ref3){var _ref4=(0,_slicedToArray2.default)(_ref3,2),item=_ref4[1];return((item==null?void 0:item.type)!==_index2.HitType.EVENT||(item==null?void 0:item.action)!==_index2.FS_CONSENT)&&(item.visitorId===visitorId||item.anonymousId===visitorId);});var activateKeys=Array.from(this._activatePoolQueue).filter(function(_ref5){var _ref6=(0,_slicedToArray2.default)(_ref5,2),item=_ref6[1];return item.visitorId===visitorId||item.anonymousId===visitorId;});var keysToFlush=[];hitKeys.forEach(function(_ref7){var _ref8=(0,_slicedToArray2.default)(_ref7,1),key=_ref8[0];_this3._hitsPoolQueue.delete(key);keysToFlush.push(key);});activateKeys.forEach(function(_ref9){var _ref10=(0,_slicedToArray2.default)(_ref9,1),key=_ref10[0];_this3._activatePoolQueue.delete(key);keysToFlush.push(key);});if(!keysToFlush.length){return;}yield this.flushHits(keysToFlush);});function notConsent(_x4){return _notConsent.apply(this,arguments);}return notConsent;}()},{key:"cacheHit",value:function(){var _cacheHit=(0,_asyncToGenerator2.default)(function*(hits){try{var hitCacheImplementation=this.config.hitCacheImplementation;if(this.config.disableCache||!hitCacheImplementation||typeof hitCacheImplementation.cacheHit!=='function'){return;}var data={};hits.forEach(function(item,key){var hitData={version:_index2.HIT_CACHE_VERSION,data:{visitorId:item.visitorId,anonymousId:item.anonymousId,type:item.type,content:item.toObject(),time:Date.now()}};data[key]=hitData;});yield hitCacheImplementation.cacheHit(data);(0,_utils.logDebugSprintf)(this.config,_index2.PROCESS_CACHE_HIT,_index2.HIT_CACHE_SAVED,data);}catch(error){(0,_utils.logErrorSprintf)(this.config,_index2.PROCESS_CACHE,_index2.HIT_CACHE_ERROR,'cacheHit',error.message||error);}});function cacheHit(_x5){return _cacheHit.apply(this,arguments);}return cacheHit;}()},{key:"flushHits",value:function(){var _flushHits=(0,_asyncToGenerator2.default)(function*(hitKeys){try{var hitCacheImplementation=this.config.hitCacheImplementation;if(this.config.disableCache||!hitCacheImplementation||typeof hitCacheImplementation.flushHits!=='function'){return;}yield hitCacheImplementation.flushHits(hitKeys);(0,_utils.logDebugSprintf)(this.config,_index2.PROCESS_CACHE,_index2.HIT_DATA_FLUSHED,hitKeys);}catch(error){(0,_utils.logErrorSprintf)(this.config,_index2.PROCESS_CACHE,_index2.HIT_CACHE_ERROR,'flushHits',error.message||error);}});function flushHits(_x6){return _flushHits.apply(this,arguments);}return flushHits;}()},{key:"flushAllHits",value:function(){var _flushAllHits=(0,_asyncToGenerator2.default)(function*(){try{var hitCacheImplementation=this.config.hitCacheImplementation;if(this.config.disableCache||!hitCacheImplementation||typeof hitCacheImplementation.flushAllHits!=='function'){return;}yield hitCacheImplementation.flushAllHits();(0,_utils.logDebug)(this.config,_index2.ALL_HITS_FLUSHED,_index2.PROCESS_FLUSH_HIT);}catch(error){(0,_utils.logErrorSprintf)(this.config,_index2.PROCESS_CACHE,_index2.HIT_CACHE_ERROR,'flushAllHits',error.message||error);}});function flushAllHits(){return _flushAllHits.apply(this,arguments);}return flushAllHits;}()},{key:"isTroubleshootingActivated",value:function isTroubleshootingActivated(){if(!this.troubleshootingData){return false;}var now=new Date();var isStarted=now>=this.troubleshootingData.startDate;if(!isStarted){return false;}var isFinished=now>this.troubleshootingData.endDate;if(isFinished){this._hasInitTroubleshootingHitSent=false;return false;}return true;}},{key:"addTroubleshootingHit",value:function(){var _addTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(hit){if(!hit.key){var hitKey=`${hit.visitorId}:${(0,_utils.uuidV4)()}`;hit.key=hitKey;}this._troubleshootingQueue.set(hit.key,hit);(0,_utils.logDebug)(this.config,(0,_utils.sprintf)(_index2.TROUBLESHOOTING_HIT_ADDED_IN_QUEUE,JSON.stringify(hit.toApiKeys())),_index2.ADD_TROUBLESHOOTING_HIT);});function addTroubleshootingHit(_x7){return _addTroubleshootingHit.apply(this,arguments);}return addTroubleshootingHit;}()},{key:"sendTroubleshootingHit",value:function(){var _sendTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(hit){if(!this.isTroubleshootingActivated()||hit.traffic===undefined||this.troubleshootingData.traffic<hit.traffic){return;}var requestBody=hit.toApiKeys();var now=Date.now();try{yield this._httpClient.postAsync(_index2.TROUBLESHOOTING_HIT_URL,{body:requestBody});(0,_utils.logDebug)(this.config,(0,_utils.sprintf)(_index2.TROUBLESHOOTING_SENT_SUCCESS,JSON.stringify(Object.assign({},requestBody,{duration:Date.now()-now}))),_index2.SEND_TROUBLESHOOTING);if(hit.key){this._troubleshootingQueue.delete(hit.key);yield this.flushHits([hit.key]);}}catch(error){if(this.isTroubleshootingActivated()){yield this.addTroubleshootingHit(hit);}(0,_utils.logError)(this.config,(0,_utils.errorFormat)(error.message||error,{url:_index2.TROUBLESHOOTING_HIT_URL,headers:{},body:requestBody,duration:Date.now()-now}),_index2.SEND_BATCH);}});function sendTroubleshootingHit(_x8){return _sendTroubleshootingHit.apply(this,arguments);}return sendTroubleshootingHit;}()},{key:"sendInitTroubleshootingHit",value:function(){var _sendInitTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(){if(!this.isTroubleshootingActivated()||!this._initTroubleshootingHit||this._hasInitTroubleshootingHitSent){return;}yield this.sendTroubleshootingHit(this._initTroubleshootingHit);this._hasInitTroubleshootingHitSent=true;});function sendInitTroubleshootingHit(){return _sendInitTroubleshootingHit.apply(this,arguments);}return sendInitTroubleshootingHit;}()},{key:"sendTroubleshootingQueue",value:function(){var _sendTroubleshootingQueue=(0,_asyncToGenerator2.default)(function*(){yield this.sendInitTroubleshootingHit();if(!this.isTroubleshootingActivated()||this._isTroubleshootingQueueSending||this._troubleshootingQueue.size===0){return;}this._isTroubleshootingQueueSending=true;for(var _ref11 of Array.from(this._troubleshootingQueue)){var _ref12=(0,_slicedToArray2.default)(_ref11,2);var _=_ref12[0];var item=_ref12[1];yield this.sendTroubleshootingHit(item);}this._isTroubleshootingQueueSending=false;});function sendTroubleshootingQueue(){return _sendTroubleshootingQueue.apply(this,arguments);}return sendTroubleshootingQueue;}()},{key:"addUsageHit",value:function(){var _addUsageHit=(0,_asyncToGenerator2.default)(function*(hit){if(!hit.key){var hitKey=`${hit.visitorId}:${(0,_utils.uuidV4)()}`;hit.key=hitKey;}this._usageHitQueue.set(hit.key,hit);(0,_utils.logDebug)(this.config,(0,_utils.sprintf)(_index2.ANALYTICS_HIT_ADDED_IN_QUEUE,JSON.stringify(hit.toApiKeys())),_index2.ADD_USAGE_HIT);});function addUsageHit(_x9){return _addUsageHit.apply(this,arguments);}return addUsageHit;}()},{key:"sendUsageHit",value:function(){var _sendUsageHit=(0,_asyncToGenerator2.default)(function*(hit){var requestBody=hit.toApiKeys();var now=Date.now();try{yield this._httpClient.postAsync(_index2.USAGE_HIT_URL,{body:requestBody});(0,_utils.logDebug)(this.config,(0,_utils.sprintf)(_index2.ANALYTICS_HIT_SENT_SUCCESS,JSON.stringify(Object.assign({},requestBody,{duration:Date.now()-now}))),_index2.SEND_USAGE_HIT);if(hit.key){this._usageHitQueue.delete(hit.key);yield this.flushHits([hit.key]);}}catch(error){yield this.addUsageHit(hit);(0,_utils.logError)(this.config,(0,_utils.errorFormat)(error.message||error,{url:_index2.USAGE_HIT_URL,headers:{},body:requestBody,duration:Date.now()-now}),_index2.SEND_BATCH);}});function sendUsageHit(_x10){return _sendUsageHit.apply(this,arguments);}return sendUsageHit;}()},{key:"sendUsageHitQueue",value:function(){var _sendUsageHitQueue=(0,_asyncToGenerator2.default)(function*(){if(this._isUsageHitQueueSending||this._usageHitQueue.size===0){return;}this._isUsageHitQueueSending=true;for(var _ref13 of Array.from(this._usageHitQueue)){var _ref14=(0,_slicedToArray2.default)(_ref13,2);var item=_ref14[1];yield this.sendUsageHit(item);}this._isUsageHitQueueSending=false;});function sendUsageHitQueue(){return _sendUsageHitQueue.apply(this,arguments);}return sendUsageHitQueue;}()}]);}();

/***/ }),

/***/ 7086:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.DecisionMode=void 0;var DecisionMode=exports.DecisionMode=function(DecisionMode){DecisionMode["DECISION_API"]="DECISION-API";DecisionMode["BUCKETING"]="BUCKETING";DecisionMode["BUCKETING_EDGE"]="BUCKETING_EDGE";return DecisionMode;}({});

/***/ }),

/***/ 7100:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.CommonEmotionAI=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _utils=__webpack_require__(9647);var _FlagshipConstant=__webpack_require__(1786);var _types=__webpack_require__(3957);var _index=__webpack_require__(3664);var _UsageHit=__webpack_require__(1460);var _Troubleshooting=__webpack_require__(6360);var CommonEmotionAI=exports.CommonEmotionAI=function(){function CommonEmotionAI(_ref){var httpClient=_ref.httpClient,sdkConfig=_ref.sdkConfig,eAIConfig=_ref.eAIConfig;(0,_classCallCheck2.default)(this,CommonEmotionAI);this._EAIScoreChecked=false;this._httpClient=httpClient;this._sdkConfig=sdkConfig;this._eAIConfig=eAIConfig;this._isEAIDataCollecting=false;}return(0,_createClass2.default)(CommonEmotionAI,[{key:"init",value:function init(visitor){this._visitor=visitor;}},{key:"onEAICollectStatusChange",value:function onEAICollectStatusChange(callback){this._onEAICollectStatusChange=callback;}},{key:"EAIScore",get:function get(){return this._EAIScore;}},{key:"EAIScoreChecked",get:function get(){return this._EAIScoreChecked;}},{key:"setIsEAIDataCollected",value:function setIsEAIDataCollected(isCollected){return this._visitor.setIsEAIDataCollected(isCollected);}},{key:"isEAIDataCollected",value:function isEAIDataCollected(){return this._visitor.isEAIDataCollected();}},{key:"sendEAIScoreTroubleshooting",value:function sendEAIScoreTroubleshooting(eAIScore,endpoint){var _this$_visitor$sdkIni;var troubleshooting=new _Troubleshooting.Troubleshooting({flagshipInstanceId:(_this$_visitor$sdkIni=this._visitor.sdkInitialData)==null?void 0:_this$_visitor$sdkIni.instanceId,visitorId:this._visitor.visitorId,label:_types.TroubleshootingLabel.EMOTION_AI_SCORE_FROM_LOCAL_CACHE,logLevel:_index.LogLevel.DEBUG,eAIScore:eAIScore,isEAIScoreFromLocalCache:true,config:this._sdkConfig,httpRequestUrl:endpoint,traffic:this._visitor.traffic});this._visitor.sendTroubleshooting(troubleshooting);}},{key:"sendRequestTroubleshooting",value:function sendRequestTroubleshooting(response,label,endpoint){var _this$_visitor$sdkIni2;var method=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'GET';var apiKeys=arguments.length>4?arguments[4]:undefined;var eAIScore=arguments.length>5?arguments[5]:undefined;var troubleshooting=new _Troubleshooting.Troubleshooting({flagshipInstanceId:(_this$_visitor$sdkIni2=this._visitor.sdkInitialData)==null?void 0:_this$_visitor$sdkIni2.instanceId,visitorId:this._visitor.visitorId,label:label,logLevel:_index.LogLevel.DEBUG,hitContent:apiKeys,eAIScore:eAIScore,httpResponseBody:response.body,httpRequestMethod:method,httpRequestUrl:endpoint,httpResponseCode:response.status,httpResponseHeaders:response.headers,traffic:this._visitor.traffic,config:this._sdkConfig});this._visitor.sendTroubleshooting(troubleshooting);}},{key:"sendRequestTroubleshootingError",value:function sendRequestTroubleshootingError(error,label,endpoint,apiKeys){var _this$_visitor$sdkIni3;var troubleshooting=new _Troubleshooting.Troubleshooting({flagshipInstanceId:(_this$_visitor$sdkIni3=this._visitor.sdkInitialData)==null?void 0:_this$_visitor$sdkIni3.instanceId,visitorId:this._visitor.visitorId,label:label,logLevel:_index.LogLevel.ERROR,httpRequestMethod:'GET',httpRequestUrl:endpoint,hitContent:apiKeys,traffic:this._visitor.traffic,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,config:this._sdkConfig});this._visitor.sendTroubleshooting(troubleshooting);}},{key:"sendCollectingTroubleshooting",value:function sendCollectingTroubleshooting(timestamp,label,score){var _this$_visitor$sdkIni4;var troubleshooting=new _Troubleshooting.Troubleshooting({flagshipInstanceId:(_this$_visitor$sdkIni4=this._visitor.sdkInitialData)==null?void 0:_this$_visitor$sdkIni4.instanceId,visitorId:this._visitor.visitorId,label:label,logLevel:_index.LogLevel.DEBUG,eAIDataTimestamp:new Date(timestamp).toISOString(),config:this._sdkConfig,eAIScore:score,traffic:this._visitor.traffic});this._visitor.sendTroubleshooting(troubleshooting);}},{key:"sendCollectingUsageHit",value:function sendCollectingUsageHit(label){var _this$_visitor$sdkIni5;var usageHit=new _UsageHit.UsageHit({visitorId:(_this$_visitor$sdkIni5=this._visitor.sdkInitialData)==null?void 0:_this$_visitor$sdkIni5.instanceId,label:label,config:this._sdkConfig,logLevel:_index.LogLevel.DEBUG});this._visitor.sendUsageHit(usageHit);}},{key:"fetchEAIScore",value:function(){var _fetchEAIScore=(0,_asyncToGenerator2.default)(function*(){var _this$_eAIConfig;var noCache=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!((_this$_eAIConfig=this._eAIConfig)!=null&&_this$_eAIConfig.eaiActivationEnabled)){return undefined;}if(this._EAIScoreChecked){return this._EAIScore;}var cachedEAIScore=yield this._visitor.getCachedEAIScore();if(cachedEAIScore){var _this$_EAIScore;this._EAIScore=cachedEAIScore;this._EAIScoreChecked=true;this._visitor.context[_FlagshipConstant.EAI_SCORE_CONTEXT_KEY]=(_this$_EAIScore=this._EAIScore)==null||(_this$_EAIScore=_this$_EAIScore.eai)==null?void 0:_this$_EAIScore.eas;this.sendEAIScoreTroubleshooting(this._EAIScore);return this._EAIScore;}if(this._fetchEAIScorePromise){yield this._fetchEAIScorePromise;return this._EAIScore;}var visitorId=this._visitor.visitorId;var url=(0,_utils.sprintf)(_FlagshipConstant.EMOTION_AI_UC_URL,this._sdkConfig.envId,visitorId);var versionQuery=noCache?`&v=${Date.now()}`:'';var endpoint=`${url}?partner=eai${versionQuery}`;try{this._fetchEAIScorePromise=this._httpClient.getAsync(endpoint);var response=yield this._fetchEAIScorePromise;this._EAIScore=response.body;this._EAIScoreChecked=true;this.sendRequestTroubleshooting(response,_types.TroubleshootingLabel.EMOTION_AI_SCORE,endpoint,'GET',undefined,this._EAIScore);if(this._EAIScore){var _this$_EAIScore2;this._visitor.setCachedEAIScore(this._EAIScore);this._visitor.updateContext(_FlagshipConstant.EAI_SCORE_CONTEXT_KEY,(_this$_EAIScore2=this._EAIScore)==null||(_this$_EAIScore2=_this$_EAIScore2.eai)==null?void 0:_this$_EAIScore2.eas);}(0,_utils.logDebugSprintf)(this._sdkConfig,_FlagshipConstant.FETCH_EAI_SCORE,_FlagshipConstant.FETCH_EAI_SCORE_SUCCESS,visitorId,this._EAIScore);}catch(error){(0,_utils.logErrorSprintf)(this._sdkConfig,_FlagshipConstant.FETCH_EAI_SCORE,_FlagshipConstant.FETCH_EAI_SCORE_ERROR,visitorId,error.message);this.sendRequestTroubleshootingError(error,_types.TroubleshootingLabel.EMOTION_AI_SCORE_ERROR,endpoint);}finally{this._fetchEAIScorePromise=undefined;}return this._EAIScore;});function fetchEAIScore(){return _fetchEAIScore.apply(this,arguments);}return fetchEAIScore;}()},{key:"collectEAIEventsAsync",value:function(){var _collectEAIEventsAsync=(0,_asyncToGenerator2.default)(function*(currentPage){var _this$_eAIConfig2;if(this._isEAIDataCollecting||!((_this$_eAIConfig2=this._eAIConfig)!=null&&_this$_eAIConfig2.eaiCollectEnabled)){return;}var isEAIDataCollected=yield this.isEAIDataCollected();if(!this._eAIConfig.eaiActivationEnabled&&isEAIDataCollected){return;}var score=yield this.fetchEAIScore();if(score){return;}var visitorId=this._visitor.visitorId;yield this.startCollectingEAIData(visitorId,currentPage);});function collectEAIEventsAsync(_x){return _collectEAIEventsAsync.apply(this,arguments);}return collectEAIEventsAsync;}()},{key:"reportPageView",value:function(){var _reportPageView=(0,_asyncToGenerator2.default)(function*(pageView){if(!this._isEAIDataCollecting){return;}return this.sendEAIEvent(pageView);});function reportPageView(_x2){return _reportPageView.apply(this,arguments);}return reportPageView;}()},{key:"sendEAIEvent",value:function(){var _sendEAIEvent=(0,_asyncToGenerator2.default)(function*(event){var apiKeys=event.toApiKeys();try{var response=yield this._httpClient.postAsync(_FlagshipConstant.EMOTION_AI_EVENT_URL,{body:apiKeys,headers:(0,_defineProperty2.default)({},_FlagshipConstant.HEADER_CONTENT_TYPE,_FlagshipConstant.HEADER_APPLICATION_JSON)});var label=apiKeys.t==='PAGEVIEW'?_types.TroubleshootingLabel.EMOTION_AI_PAGE_VIEW:_types.TroubleshootingLabel.EMOTION_AI_VISITOR_EVENT;this.sendRequestTroubleshooting(response,label,_FlagshipConstant.EMOTION_AI_EVENT_URL,'POST',event.toApiKeys());(0,_utils.logDebugSprintf)(this._sdkConfig,_FlagshipConstant.SEND_EAI_EVENT,_FlagshipConstant.SEND_EAI_EVENT_SUCCESS,event.toApiKeys());}catch(error){var _label=apiKeys.t==='PAGEVIEW'?_types.TroubleshootingLabel.EMOTION_AI_PAGE_VIEW_ERROR:_types.TroubleshootingLabel.EMOTION_AI_VISITOR_EVENT_ERROR;this.sendRequestTroubleshootingError(error,_label,_FlagshipConstant.EMOTION_AI_EVENT_URL,apiKeys);(0,_utils.logErrorSprintf)(this._sdkConfig,_FlagshipConstant.SEND_EAI_EVENT,_FlagshipConstant.SEND_EAI_EVENT_ERROR,error.message);}});function sendEAIEvent(_x3){return _sendEAIEvent.apply(this,arguments);}return sendEAIEvent;}()},{key:"finalizeDataCollection",value:function finalizeDataCollection(isCollected){if(this._scoringIntervalId){clearInterval(this._scoringIntervalId);this._scoringIntervalId=undefined;}this._isEAIDataCollecting=false;this.setIsEAIDataCollected(isCollected);}},{key:"stopCollectingEAIData",value:function stopCollectingEAIData(){var _this$_eAIConfig3,_this=this;this.sendCollectingTroubleshooting(Date.now(),_types.TroubleshootingLabel.EMOTION_AI_STOP_COLLECTING);this.sendCollectingUsageHit(_types.TroubleshootingLabel.EMOTION_AI_STOP_COLLECTING);this.removeListeners();if(!((_this$_eAIConfig3=this._eAIConfig)!=null&&_this$_eAIConfig3.eaiActivationEnabled)){this._isEAIDataCollecting=false;this.setIsEAIDataCollected(true);return;}this._startScoringTimestamp=Date.now();this.sendCollectingTroubleshooting(this._startScoringTimestamp,_types.TroubleshootingLabel.EMOTION_AI_START_SCORING);this._scoringIntervalId=setInterval((0,_asyncToGenerator2.default)(function*(){var elapsedTime=Date.now()-_this._startScoringTimestamp;if(elapsedTime>_FlagshipConstant.MAX_SCORING_POLLING_TIME){_this.sendCollectingTroubleshooting(Date.now(),_types.TroubleshootingLabel.EMOTION_AI_SCORING_FAILED);_this.finalizeDataCollection(false);return;}_this._EAIScoreChecked=false;var score=yield _this.fetchEAIScore(true);if(score){_this.sendCollectingTroubleshooting(Date.now(),_types.TroubleshootingLabel.EMOTION_AI_SCORING_SUCCESS,score);_this.finalizeDataCollection(true);}}),_FlagshipConstant.SCORING_INTERVAL);}},{key:"reportVisitorEvent",value:function(){var _reportVisitorEvent=(0,_asyncToGenerator2.default)(function*(visitorEvent){if(!this._isEAIDataCollecting){return;}var timestampDiff=Date.now()-this._startCollectingEAIDataTimestamp;if(timestampDiff<=_FlagshipConstant.MAX_COLLECTING_TIME_MS){this.sendEAIEvent(visitorEvent);}else if(timestampDiff<=_FlagshipConstant.MAX_LAST_COLLECTING_TIME_MS){this.sendEAIEvent(visitorEvent);this.stopCollectingEAIData();}else{this.removeListeners();this._isEAIDataCollecting=false;this.setIsEAIDataCollected(false);}});function reportVisitorEvent(_x4){return _reportVisitorEvent.apply(this,arguments);}return reportVisitorEvent;}()}]);}();

/***/ }),

/***/ 7118:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.BucketingManager=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _FlagshipConstant=__webpack_require__(1786);var _index=__webpack_require__(3664);var _types=__webpack_require__(3957);var _utils=__webpack_require__(9647);var _DecisionManager2=__webpack_require__(6090);var _Segment=__webpack_require__(2223);var _Troubleshooting=__webpack_require__(6360);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var BucketingManager=exports.BucketingManager=function(_DecisionManager){function BucketingManager(_ref){var _this;var httpClient=_ref.httpClient,config=_ref.config,murmurHash=_ref.murmurHash,sdkManager=_ref.sdkManager,trackingManager=_ref.trackingManager,flagshipInstanceId=_ref.flagshipInstanceId;(0,_classCallCheck2.default)(this,BucketingManager);_this=_callSuper(this,BucketingManager,[{httpClient:httpClient,config:config,trackingManager:trackingManager,flagshipInstanceId:flagshipInstanceId}]);_this._murmurHash=murmurHash;_this._sdkManager=sdkManager;return _this;}(0,_inherits2.default)(BucketingManager,_DecisionManager);return(0,_createClass2.default)(BucketingManager,[{key:"_bucketingContent",get:function get(){return this._sdkManager.getBucketingContent();}},{key:"sendContext",value:function(){var _sendContext=(0,_asyncToGenerator2.default)(function*(visitor){try{var _visitor$sdkInitialDa;if(Object.keys(visitor.context).length<=3||!visitor.hasConsented||!visitor.hasContextBeenUpdated){return;}visitor.hasContextBeenUpdated=false;var SegmentHit=new _Segment.Segment({context:visitor.context,visitorId:visitor.visitorId,anonymousId:visitor.anonymousId});yield visitor.sendHit(SegmentHit);var hitTroubleshooting=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_SEND_HIT,logLevel:_index.LogLevel.INFO,traffic:visitor.traffic||0,visitorId:visitor.visitorId,visitorSessionId:visitor.instanceId,flagshipInstanceId:(_visitor$sdkInitialDa=visitor.sdkInitialData)==null?void 0:_visitor$sdkInitialDa.instanceId,anonymousId:visitor.anonymousId,config:this.config,hitContent:SegmentHit.toApiKeys()});visitor.segmentHitTroubleshooting=hitTroubleshooting;}catch(error){(0,_utils.logError)(this.config,error.message||error,'sendContext');}});function sendContext(_x){return _sendContext.apply(this,arguments);}return sendContext;}()},{key:"getThirdPartySegment",value:function(){var _getThirdPartySegment=(0,_asyncToGenerator2.default)(function*(visitorId){var url=(0,_utils.sprintf)(_FlagshipConstant.THIRD_PARTY_SEGMENT_URL,this.config.envId,visitorId);var now=Date.now();var contexts={};try{var response=yield this._httpClient.getAsync(url,{nextFetchConfig:this.config.nextFetchConfig});var content=response.body;if(Array.isArray(content)){for(var item of content){contexts[`${item.partner}::${item.segment}`]=item.value;}}}catch(error){(0,_utils.logError)(this.config,(0,_utils.errorFormat)(error.message||error,{url:url,nextFetchConfig:this.config.nextFetchConfig,duration:Date.now()-now}),_FlagshipConstant.GET_THIRD_PARTY_SEGMENT);}return contexts;});function getThirdPartySegment(_x2){return _getThirdPartySegment.apply(this,arguments);}return getThirdPartySegment;}()},{key:"getCampaignsAsync",value:function(){var _getCampaignsAsync=(0,_asyncToGenerator2.default)(function*(visitor){var _this$_bucketingConte,_this2=this;if(!this._bucketingContent){return null;}var troubleshooting=(_this$_bucketingConte=this._bucketingContent)==null||(_this$_bucketingConte=_this$_bucketingConte.accountSettings)==null?void 0:_this$_bucketingConte.troubleshooting;this.troubleshooting=undefined;if(troubleshooting){this.troubleshooting={startDate:new Date(troubleshooting.startDate),endDate:new Date(troubleshooting.endDate),timezone:troubleshooting.timezone,traffic:troubleshooting.traffic};}if(this._bucketingContent.panic){this.panic=true;return[];}this.panic=false;if(!this._bucketingContent.campaigns){return null;}if(this.config.fetchThirdPartyData){var thirdPartySegments=yield this.getThirdPartySegment(visitor.visitorId);visitor.updateContext(thirdPartySegments);}yield this.sendContext(visitor);var visitorCampaigns=[];this._bucketingContent.campaigns.forEach(function(campaign){var currentCampaigns=_this2.getVisitorCampaigns(campaign.variationGroups,campaign.id,campaign.type,visitor);if(currentCampaigns){var _campaign$slug;currentCampaigns.slug=(_campaign$slug=campaign.slug)!=null?_campaign$slug:null;currentCampaigns.name=campaign.name;visitorCampaigns.push(currentCampaigns);}});return visitorCampaigns;});function getCampaignsAsync(_x3){return _getCampaignsAsync.apply(this,arguments);}return getCampaignsAsync;}()},{key:"getVisitorCampaigns",value:function getVisitorCampaigns(variationGroups,campaignId,campaignType,visitor){for(var variationGroup of variationGroups){var check=this.isMatchTargeting(variationGroup,visitor);if(check){var variation=this.getVariation(variationGroup,visitor);if(!variation){return null;}return{id:campaignId,variation:variation,variationGroupId:variationGroup.id,variationGroupName:variationGroup.name,type:campaignType};}}return null;}},{key:"getVariation",value:function getVariation(variationGroup,visitor){var _this3=this;var hash=this._murmurHash.murmurHash3Int32(variationGroup.id+visitor.visitorId);var hashAllocation=hash%100;var totalAllocation=0;var _loop=function _loop(){var _visitor$visitorCache;var assignmentsHistory=(_visitor$visitorCache=visitor.visitorCache)==null||(_visitor$visitorCache=_visitor$visitorCache.data)==null?void 0:_visitor$visitorCache.assignmentsHistory;var cacheVariationId=assignmentsHistory?assignmentsHistory[variationGroup.id]:null;if(cacheVariationId){var newVariation=variationGroup.variations.find(function(x){return x.id===cacheVariationId;});if(!newVariation){return 0;}(0,_utils.logDebugSprintf)(_this3.config,_FlagshipConstant.ALLOCATION,_FlagshipConstant.BUCKETING_VARIATION_CACHE,visitor.visitorId,newVariation.id);return{v:{id:newVariation.id,name:newVariation.name,modifications:newVariation.modifications,reference:newVariation.reference}};}if(variation.allocation===undefined||variation.allocation===0){return 0;}totalAllocation+=variation.allocation;if(hashAllocation<totalAllocation){(0,_utils.logDebugSprintf)(_this3.config,_FlagshipConstant.ALLOCATION,_FlagshipConstant.BUCKETING_NEW_ALLOCATION,visitor.visitorId,variation.id,totalAllocation);return{v:{id:variation.id,modifications:variation.modifications,reference:variation.reference,name:variation.name}};}},_ret;for(var variation of variationGroup.variations){_ret=_loop();if(_ret===0)continue;if(_ret)return _ret.v;}return null;}},{key:"isMatchTargeting",value:function isMatchTargeting(variationGroup,visitor){var _this4=this;if(!variationGroup||!variationGroup.targeting||!variationGroup.targeting.targetingGroups){return false;}return variationGroup.targeting.targetingGroups.some(function(targetingGroup){return _this4.checkAndTargeting(targetingGroup.targetings,visitor);});}},{key:"isANDListOperator",value:function isANDListOperator(operator){return['NOT_EQUALS','NOT_CONTAINS'].includes(operator);}},{key:"checkAndTargeting",value:function checkAndTargeting(targetings,visitor){var contextValue;var check=false;for(var _ref2 of targetings){var key=_ref2.key;var value=_ref2.value;var operator=_ref2.operator;if(operator==='EXISTS'){if(key in visitor.context){check=true;continue;}check=false;break;}if(operator==='NOT_EXISTS'){if(key in visitor.context){check=false;break;}check=true;continue;}if(key==='fs_all_users'){check=true;continue;}if(key==='fs_users'){contextValue=visitor.visitorId;}else{if(!(key in visitor.context)){check=false;break;}contextValue=visitor.context[key];}check=this.testOperator(operator,contextValue,value);if(!check){break;}}return check;}},{key:"testListOperatorLoop",value:function testListOperatorLoop(operator,contextValue,value,initialCheck){var check=initialCheck;for(var v of value){check=this.testOperator(operator,contextValue,v);if(check!==initialCheck){break;}}return check;}},{key:"testListOperator",value:function testListOperator(operator,contextValue,value){var andOperator=this.isANDListOperator(operator);if(andOperator){return this.testListOperatorLoop(operator,contextValue,value,true);}return this.testListOperatorLoop(operator,contextValue,value,false);}},{key:"testOperator",value:function testOperator(operator,contextValue,value){var check;if(Array.isArray(value)){return this.testListOperator(operator,contextValue,value);}switch(operator){case'EQUALS':check=contextValue===value;break;case'NOT_EQUALS':check=contextValue!==value;break;case'CONTAINS':check=contextValue.toString().includes(value.toString());break;case'NOT_CONTAINS':check=!contextValue.toString().includes(value.toString());break;case'GREATER_THAN':check=contextValue>value;break;case'LOWER_THAN':check=contextValue<value;break;case'GREATER_THAN_OR_EQUALS':check=contextValue>=value;break;case'LOWER_THAN_OR_EQUALS':check=contextValue<=value;break;case'STARTS_WITH':check=contextValue.toString().startsWith(value.toString());break;case'ENDS_WITH':check=contextValue.toString().endsWith(value.toString());break;default:check=false;break;}return check;}}]);}(_DecisionManager2.DecisionManager);

/***/ }),

/***/ 7471:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));Object.defineProperty(exports, "EventEmitter", ({enumerable:true,get:function get(){return _events.EventEmitter;}}));Object.defineProperty(exports, "LocalAbortController", ({enumerable:true,get:function get(){return _LocalAbortController.LocalAbortController;}}));exports.myFetch=void 0;var _events=__webpack_require__(6261);var _LocalAbortController=__webpack_require__(1385);var myFetch=exports.myFetch=function myFetch(input,init){return fetch(input,init);};

/***/ }),

/***/ 7518:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.PageView=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var PageView=exports.PageView=function(){function PageView(_ref){var customerAccountId=_ref.customerAccountId,visitorId=_ref.visitorId,hasAdBlocker=_ref.hasAdBlocker,screenDepth=_ref.screenDepth,screenSize=_ref.screenSize,doNotTrack=_ref.doNotTrack,fonts=_ref.fonts,hasFakeBrowserInfos=_ref.hasFakeBrowserInfos,hasFakeLanguageInfos=_ref.hasFakeLanguageInfos,hasFakeOsInfos=_ref.hasFakeOsInfos,hasFakeResolutionInfos=_ref.hasFakeResolutionInfos,userLanguage=_ref.userLanguage,deviceCategory=_ref.deviceCategory,pixelRatio=_ref.pixelRatio,plugins=_ref.plugins,documentReferer=_ref.documentReferer,viewportSize=_ref.viewportSize,touchSupport=_ref.touchSupport,currentUrl=_ref.currentUrl,userAgent=_ref.userAgent,customerUserId=_ref.customerUserId,timezoneOffset=_ref.timezoneOffset,eventCategory=_ref.eventCategory;(0,_classCallCheck2.default)(this,PageView);this._customerAccountId=customerAccountId;this._visitorId=visitorId;this._hasAdBlocker=hasAdBlocker;this._screenDepth=screenDepth;this._screenSize=screenSize;this._doNotTrack=doNotTrack;this._fonts=fonts;this._hasFakeBrowserInfos=hasFakeBrowserInfos;this._hasFakeLanguageInfos=hasFakeLanguageInfos;this._hasFakeOsInfos=hasFakeOsInfos;this._hasFakeResolutionInfos=hasFakeResolutionInfos;this._userLanguage=userLanguage;this._deviceCategory=deviceCategory;this._pixelRatio=pixelRatio;this._plugins=plugins;this._documentReferer=documentReferer;this._viewportSize=viewportSize;this._touchSupport=touchSupport;this._currentUrl=currentUrl;this._userAgent=userAgent;this._customerUserId=customerUserId;this._timezoneOffset=timezoneOffset;this._eventCategory=eventCategory;}return(0,_createClass2.default)(PageView,[{key:"customerAccountId",get:function get(){return this._customerAccountId;}},{key:"visitorId",get:function get(){return this._visitorId;}},{key:"hasAdBlocker",get:function get(){return this._hasAdBlocker;}},{key:"screenDepth",get:function get(){return this._screenDepth;}},{key:"screenSize",get:function get(){return this._screenSize;}},{key:"doNotTrack",get:function get(){return this._doNotTrack;}},{key:"fonts",get:function get(){return this._fonts;}},{key:"hasFakeBrowserInfos",get:function get(){return this._hasFakeBrowserInfos;}},{key:"hasFakeLanguageInfos",get:function get(){return this._hasFakeLanguageInfos;}},{key:"hasFakeOsInfos",get:function get(){return this._hasFakeOsInfos;}},{key:"hasFakeResolutionInfos",get:function get(){return this._hasFakeResolutionInfos;}},{key:"userLanguage",get:function get(){return this._userLanguage;}},{key:"deviceCategory",get:function get(){return this._deviceCategory;}},{key:"pixelRatio",get:function get(){return this._pixelRatio;}},{key:"plugins",get:function get(){return this._plugins;}},{key:"documentReferer",get:function get(){return this._documentReferer;}},{key:"viewportSize",get:function get(){return this._viewportSize;}},{key:"touchSupport",get:function get(){return this._touchSupport;}},{key:"currentUrl",get:function get(){return this._currentUrl;}},{key:"userAgent",get:function get(){return this._userAgent;}},{key:"customerUserId",get:function get(){return this._customerUserId;}},{key:"timezoneOffset",get:function get(){return this._timezoneOffset;}},{key:"eventCategory",get:function get(){return this._eventCategory;}},{key:"toApiKeys",value:function toApiKeys(){var apiKeys={cid:this._customerAccountId,vid:this._visitorId,adb:this._hasAdBlocker,sd:this._screenDepth,sr:this._screenSize,dnt:this._doNotTrack,fnt:this._fonts,hlb:this._hasFakeBrowserInfos,hll:this._hasFakeLanguageInfos,hlo:this._hasFakeOsInfos,hlr:this._hasFakeResolutionInfos,ul:this._userLanguage,dc:this._deviceCategory,pxr:this._pixelRatio,dr:this._documentReferer,vp:this._viewportSize,tof:this._timezoneOffset,tsp:this._touchSupport,dl:this._currentUrl,ua:this._userAgent,ec:this._eventCategory,t:'PAGEVIEW'};if(this._plugins){apiKeys.plu=this._plugins;}if(this._customerUserId){apiKeys.cuid=this._customerUserId;}return apiKeys;}}]);}();

/***/ }),

/***/ 7564:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.NotReadyStrategy=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var _DefaultStrategy2=__webpack_require__(8981);var _FSFlagMetadata=__webpack_require__(8955);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var NotReadyStrategy=exports.NotReadyStrategy=function(_DefaultStrategy){function NotReadyStrategy(){(0,_classCallCheck2.default)(this,NotReadyStrategy);return _callSuper(this,NotReadyStrategy,arguments);}(0,_inherits2.default)(NotReadyStrategy,_DefaultStrategy);return(0,_createClass2.default)(NotReadyStrategy,[{key:"lookupHits",value:function(){var _lookupHits=(0,_asyncToGenerator2.default)(function*(){});function lookupHits(){return _lookupHits.apply(this,arguments);}return lookupHits;}()},{key:"lookupVisitor",value:function(){var _lookupVisitor=(0,_asyncToGenerator2.default)(function*(){});function lookupVisitor(){return _lookupVisitor.apply(this,arguments);}return lookupVisitor;}()},{key:"cacheVisitor",value:function(){var _cacheVisitor=(0,_asyncToGenerator2.default)(function*(){});function cacheVisitor(){return _cacheVisitor.apply(this,arguments);}return cacheVisitor;}()},{key:"collectEAIEventsAsync",value:function(){var _collectEAIEventsAsync=(0,_asyncToGenerator2.default)(function*(){this.log('collectEAIData');});function collectEAIEventsAsync(){return _collectEAIEventsAsync.apply(this,arguments);}return collectEAIEventsAsync;}()},{key:"onEAICollectStatusChange",value:function onEAICollectStatusChange(){}},{key:"reportEaiPageView",value:function reportEaiPageView(){}},{key:"reportEaiVisitorEvent",value:function reportEaiVisitorEvent(){}},{key:"sendVisitorAllocatedVariations",value:function sendVisitorAllocatedVariations(){}},{key:"sendHit",value:function(){var _sendHit=(0,_asyncToGenerator2.default)(function*(_hit){this.log('sendHit');});function sendHit(_x){return _sendHit.apply(this,arguments);}return sendHit;}()},{key:"sendHits",value:function(){var _sendHits=(0,_asyncToGenerator2.default)(function*(_hits){this.log('sendHits');});function sendHits(_x2){return _sendHits.apply(this,arguments);}return sendHits;}()},{key:"fetchFlags",value:function(){var _fetchFlags=(0,_asyncToGenerator2.default)(function*(){this.log('fetchFlags');});function fetchFlags(){return _fetchFlags.apply(this,arguments);}return fetchFlags;}()},{key:"getFlagValue",value:function getFlagValue(param){this.log('Flag.value');return param.defaultValue;}},{key:"visitorExposed",value:function(){var _visitorExposed=(0,_asyncToGenerator2.default)(function*(){this.log(_index.FLAG_VISITOR_EXPOSED);});function visitorExposed(){return _visitorExposed.apply(this,arguments);}return visitorExposed;}()},{key:"getFlagMetadata",value:function getFlagMetadata(param){var emptyMetaData=_FSFlagMetadata.FSFlagMetadata.Empty();(0,_utils.logErrorSprintf)(this.config,_index.FLAG_METADATA,_index.METADATA_SDK_NOT_READY,this.visitor.visitorId,param.key,emptyMetaData);return emptyMetaData;}},{key:"sendActivate",value:function(){var _sendActivate=(0,_asyncToGenerator2.default)(function*(_flagDto,_defaultValue){});function sendActivate(_x3,_x4){return _sendActivate.apply(this,arguments);}return sendActivate;}()},{key:"sendTroubleshootingHit",value:function(){var _sendTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(){});function sendTroubleshootingHit(){return _sendTroubleshootingHit.apply(this,arguments);}return sendTroubleshootingHit;}()},{key:"sendSdkConfigAnalyticHit",value:function(){var _sendSdkConfigAnalyticHit=(0,_asyncToGenerator2.default)(function*(){});function sendSdkConfigAnalyticHit(){return _sendSdkConfigAnalyticHit.apply(this,arguments);}return sendSdkConfigAnalyticHit;}()},{key:"addInTrackingManager",value:function(){var _addInTrackingManager=(0,_asyncToGenerator2.default)(function*(){});function addInTrackingManager(){return _addInTrackingManager.apply(this,arguments);}return addInTrackingManager;}()},{key:"log",value:function log(methodName){(0,_utils.logErrorSprintf)(this.config,methodName,_index.METHOD_DEACTIVATED_ERROR,this.visitor.visitorId,methodName,_index.FSSdkStatus[_index.FSSdkStatus.SDK_NOT_INITIALIZED]);}}]);}(_DefaultStrategy2.DefaultStrategy);

/***/ }),

/***/ 7826:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/slicedToArray");

/***/ }),

/***/ 7935:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.NoBatchingContinuousCachingStrategy=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(7826));var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _BatchTriggeredBy=__webpack_require__(594);var _index=__webpack_require__(3664);var _types=__webpack_require__(3957);var _utils=__webpack_require__(9647);var _BatchingCachingStrategyAbstract=__webpack_require__(7001);var _ActivateBatch=__webpack_require__(3401);var _Troubleshooting=__webpack_require__(6360);function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var NoBatchingContinuousCachingStrategy=exports.NoBatchingContinuousCachingStrategy=function(_BatchingCachingStrat){function NoBatchingContinuousCachingStrategy(param){var _this;(0,_classCallCheck2.default)(this,NoBatchingContinuousCachingStrategy);_this=_callSuper(this,NoBatchingContinuousCachingStrategy,[param]);_this.cacheHitKeys={};return _this;}(0,_inherits2.default)(NoBatchingContinuousCachingStrategy,_BatchingCachingStrat);return(0,_createClass2.default)(NoBatchingContinuousCachingStrategy,[{key:"activateFlag",value:function(){var _activateFlag=(0,_asyncToGenerator2.default)(function*(hit){var hitKey=`${hit.visitorId}:${(0,_utils.uuidV4)()}`;hit.key=hitKey;yield this.sendActivate({activateHitsPool:[],currentActivate:hit,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy.ActivateLength});});function activateFlag(_x){return _activateFlag.apply(this,arguments);}return activateFlag;}()},{key:"addHit",value:function(){var _addHit=(0,_asyncToGenerator2.default)(function*(hit){var hitKey=`${hit.visitorId}:${(0,_utils.uuidV4)()}`;hit.key=hitKey;if(hit.type===_index.HitType.EVENT&&hit.action===_index.FS_CONSENT&&hit.label===`${_index.SDK_INFO.name}:false`){yield this.notConsent(hit.visitorId);}yield this.sendHit(hit);});function addHit(_x2){return _addHit.apply(this,arguments);}return addHit;}()},{key:"addHitInPoolQueue",value:function addHitInPoolQueue(_hit){return Promise.resolve();}},{key:"sendHit",value:function(){var _sendHit=(0,_asyncToGenerator2.default)(function*(hit){var headers=(0,_defineProperty2.default)({},_index.HEADER_CONTENT_TYPE,_index.HEADER_APPLICATION_JSON);var requestBody=hit.toApiKeys();var now=Date.now();try{yield this._httpClient.postAsync(_index.HIT_EVENT_URL,{headers:headers,body:requestBody,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});(0,_utils.logDebugSprintf)(this.config,_index.TRACKING_MANAGER,_index.HIT_SENT_SUCCESS,_index.DIRECT_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:_index.HIT_EVENT_URL,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[_BatchTriggeredBy.BatchTriggeredBy.DirectHit]});this.sendHitsToFsQa([hit]);this.dispatchHitsToTag([hit]);}catch(error){if(hit.type!==_index.HitType.EVENT||hit.action!==_index.FS_CONSENT){this.cacheHitKeys[hit.key]=hit.visitorId;}yield this.cacheHit(new Map().set(hit.key,hit));(0,_utils.logErrorSprintf)(this.config,_index.TRACKING_MANAGER,_index.TRACKING_MANAGER_ERROR,_index.DIRECT_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:_index.HIT_EVENT_URL,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[_BatchTriggeredBy.BatchTriggeredBy.DirectHit]});var monitoringHttpResponse=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.SEND_HIT_ROUTE_ERROR,logLevel:_index.LogLevel.ERROR,visitorId:`${this._flagshipInstanceId}`,traffic:0,config:this.config,httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:_index.HIT_EVENT_URL,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy.DirectHit});this.sendTroubleshootingHit(monitoringHttpResponse);}});function sendHit(_x3){return _sendHit.apply(this,arguments);}return sendHit;}()},{key:"notConsent",value:function(){var _notConsent=(0,_asyncToGenerator2.default)(function*(visitorId){var _this2=this;var cacheHitKeysEntries=Object.entries(this.cacheHitKeys).filter(function(_ref){var _ref2=(0,_slicedToArray2.default)(_ref,2),_=_ref2[0],value=_ref2[1];return value===visitorId;});var keys=[];for(var _ref3 of cacheHitKeysEntries){var _ref4=(0,_slicedToArray2.default)(_ref3,1);var key=_ref4[0];keys.push(key);}var hitsKeys=Array.from(this._hitsPoolQueue).filter(function(_ref5){var _ref6=(0,_slicedToArray2.default)(_ref5,2),_=_ref6[0],item=_ref6[1];return((item==null?void 0:item.type)!==_index.HitType.EVENT||(item==null?void 0:item.action)!==_index.FS_CONSENT)&&(item.visitorId===visitorId||item.anonymousId===visitorId);});var activateKeys=Array.from(this._activatePoolQueue).filter(function(_ref7){var _ref8=(0,_slicedToArray2.default)(_ref7,2),_=_ref8[0],item=_ref8[1];return item.visitorId===visitorId||item.anonymousId===visitorId;});var keysToFlush=[];hitsKeys.forEach(function(_ref9){var _ref10=(0,_slicedToArray2.default)(_ref9,1),key=_ref10[0];_this2._hitsPoolQueue.delete(key);keysToFlush.push(key);});activateKeys.forEach(function(_ref11){var _ref12=(0,_slicedToArray2.default)(_ref11,1),key=_ref12[0];_this2._activatePoolQueue.delete(key);keysToFlush.push(key);});var mergedKeys=[].concat(keys,keysToFlush);if(!mergedKeys.length){return;}yield this.flushHits(mergedKeys);this.cacheHitKeys={};});function notConsent(_x4){return _notConsent.apply(this,arguments);}return notConsent;}()},{key:"sendActivate",value:function(){var _sendActivate=(0,_asyncToGenerator2.default)(function*(_ref13){var _this3=this;var activateHitsPool=_ref13.activateHitsPool,currentActivate=_ref13.currentActivate,batchTriggeredBy=_ref13.batchTriggeredBy;var headers=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.HEADER_X_API_KEY,this.config.apiKey),_index.HEADER_X_SDK_CLIENT,_index.SDK_INFO.name),_index.HEADER_X_SDK_VERSION,_index.SDK_INFO.version),_index.HEADER_CONTENT_TYPE,_index.HEADER_APPLICATION_JSON);var activateBatch=new _ActivateBatch.ActivateBatch(Array.from(activateHitsPool.filter(function(item){return Date.now()-item.createdAt<_index.DEFAULT_HIT_CACHE_TIME_MS;})),this.config);if(currentActivate){activateBatch.hits.push(currentActivate);}var requestBody=activateBatch.toApiKeys();var url=_index.BASE_API_URL+_index.URL_ACTIVATE_MODIFICATION;var now=Date.now();try{yield this._httpClient.postAsync(url,{headers:headers,body:requestBody,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});(0,_utils.logDebugSprintf)(this.config,_index.TRACKING_MANAGER,_index.HIT_SENT_SUCCESS,_index.ACTIVATE_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});var hitKeysToRemove=activateHitsPool.map(function(item){return item.key;});activateBatch.hits.forEach(function(item){_this3.onVisitorExposed(item);});if(hitKeysToRemove.length){yield this.flushHits(hitKeysToRemove);}this.sendHitsToFsQa(activateBatch.hits);}catch(error){activateBatch.hits.forEach(function(item){_this3.cacheHitKeys[item.key]=item.visitorId;});if(currentActivate){yield this.cacheHit(new Map([[currentActivate.key,currentActivate]]));}(0,_utils.logErrorSprintf)(this.config,_index.TRACKING_MANAGER,_index.TRACKING_MANAGER_ERROR,_index.ACTIVATE_HIT,{httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseCode:error==null?void 0:error.statusCode,duration:Date.now()-now,batchTriggeredBy:_BatchTriggeredBy.BatchTriggeredBy[batchTriggeredBy]});var monitoringHttpResponse=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.SEND_ACTIVATE_HIT_ROUTE_ERROR,logLevel:_index.LogLevel.ERROR,visitorId:`${this._flagshipInstanceId}`,traffic:0,config:this.config,httpRequestBody:requestBody,httpRequestHeaders:headers,httpRequestMethod:'POST',httpRequestUrl:url,httpResponseBody:error==null?void 0:error.message,httpResponseHeaders:error==null?void 0:error.headers,httpResponseMethod:'POST',httpResponseUrl:url,httpResponseCode:error==null?void 0:error.statusCode,httpResponseTime:Date.now()-now,batchTriggeredBy:batchTriggeredBy});this.sendTroubleshootingHit(monitoringHttpResponse);}});function sendActivate(_x5){return _sendActivate.apply(this,arguments);}return sendActivate;}()}]);}(_BatchingCachingStrategyAbstract.BatchingCachingStrategyAbstract);

/***/ }),

/***/ 8010:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.EventCategory=void 0;var EventCategory=exports.EventCategory=function(EventCategory){EventCategory["ACTION_TRACKING"]="Action Tracking";EventCategory["USER_ENGAGEMENT"]="User Engagement";return EventCategory;}({});

/***/ }),

/***/ 8033:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.HitAbstract=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _FlagshipConstant=__webpack_require__(1786);var _utils=__webpack_require__(9647);var HitAbstract=exports.HitAbstract=function(){function HitAbstract(hit){(0,_classCallCheck2.default)(this,HitAbstract);var type=hit.type,userIp=hit.userIp,screenResolution=hit.screenResolution,locale=hit.locale,sessionNumber=hit.sessionNumber,visitorId=hit.visitorId,anonymousId=hit.anonymousId,ds=hit.ds,qaMode=hit.qaMode,isActionTrackingHit=hit.isActionTrackingHit;this._type=type;if(userIp){this.userIp=userIp;}if(screenResolution){this.screenResolution=screenResolution;}if(locale){this.locale=locale;}if(sessionNumber){this.sessionNumber=sessionNumber;}this.visitorId=visitorId;this._anonymousId=anonymousId||null;this.createdAt=Date.now();this.ds=ds||_FlagshipConstant.SDK_APP;this.qaMode=qaMode;this.isActionTrackingHit=isActionTrackingHit;}return(0,_createClass2.default)(HitAbstract,[{key:"isActionTrackingHit",get:function get(){return this._isActionTrackingHit;},set:function set(v){this._isActionTrackingHit=v;}},{key:"key",get:function get(){return this._key;},set:function set(v){this._key=v;}},{key:"sessionNumber",get:function get(){return this._sessionNumber;},set:function set(v){this._sessionNumber=v;}},{key:"locale",get:function get(){return this._locale;},set:function set(v){this._locale=v;}},{key:"screenResolution",get:function get(){return this._screenResolution;},set:function set(v){this._screenResolution=v;}},{key:"userIp",get:function get(){return this._userIp;},set:function set(v){this._userIp=v;}},{key:"anonymousId",get:function get(){return this._anonymousId;},set:function set(v){this._anonymousId=v;}},{key:"visitorId",get:function get(){return this._visitorId;},set:function set(v){this._visitorId=v;}},{key:"ds",get:function get(){return this._ds;},set:function set(v){this._ds=v;}},{key:"type",get:function get(){return this._type;}},{key:"config",get:function get(){return this._config;},set:function set(v){this._config=v;}},{key:"createdAt",get:function get(){return this._createdAt;},set:function set(v){this._createdAt=v;}},{key:"qaMode",get:function get(){return this._qaMode;},set:function set(v){this._qaMode=v;}},{key:"isNotEmptyString",value:function isNotEmptyString(value,itemName){if(!value||typeof value!=='string'){(0,_utils.logError)(this.config,(0,_utils.sprintf)(_FlagshipConstant.TYPE_ERROR,itemName,'string'),itemName);return false;}return true;}},{key:"isNumeric",value:function isNumeric(value,itemName){if(!value||typeof value!=='number'){(0,_utils.logError)(this.config,(0,_utils.sprintf)(_FlagshipConstant.TYPE_ERROR,itemName,'number'),itemName);return false;}return true;}},{key:"isInteger",value:function isInteger(value,itemName){if(!Number.isInteger(value)){(0,_utils.logError)(this.config,(0,_utils.sprintf)(_FlagshipConstant.TYPE_ERROR,itemName,'integer'),itemName);return false;}return true;}},{key:"toApiKeys",value:function toApiKeys(){var _this$config;var apiKeys=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_FlagshipConstant.VISITOR_ID_API_ITEM,this.visitorId),_FlagshipConstant.DS_API_ITEM,this.ds),_FlagshipConstant.CUSTOMER_ENV_ID_API_ITEM,`${(_this$config=this.config)==null?void 0:_this$config.envId}`),_FlagshipConstant.T_API_ITEM,this.type),_FlagshipConstant.CUSTOMER_UID,null),_FlagshipConstant.QT_API_ITEM,Date.now()-this._createdAt);if(this.qaMode){apiKeys[_FlagshipConstant.QA_MODE_API_ITEM]=true;}if(this.userIp){apiKeys[_FlagshipConstant.USER_IP_API_ITEM]=this.userIp;}if(this.screenResolution){apiKeys[_FlagshipConstant.SCREEN_RESOLUTION_API_ITEM]=this.screenResolution;}if(this.locale){apiKeys[_FlagshipConstant.USER_LANGUAGE]=this.locale;}if(this.sessionNumber){apiKeys[_FlagshipConstant.SESSION_NUMBER]=this.sessionNumber;}if(this.visitorId&&this.anonymousId){apiKeys[_FlagshipConstant.VISITOR_ID_API_ITEM]=this.anonymousId;apiKeys[_FlagshipConstant.CUSTOMER_UID]=this.visitorId;}return apiKeys;}},{key:"toObject",value:function toObject(){return{key:this.key,visitorId:this.visitorId,ds:this.ds,type:this.type,userIp:this.userIp,screenResolution:this.screenResolution,locale:this.locale,sessionNumber:this.sessionNumber,anonymousId:this.anonymousId,createdAt:this.createdAt,qaMode:this.qaMode};}},{key:"isReady",value:function isReady(){var _checkParent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return!!(this.visitorId&&this.ds&&this.config&&this.config.envId&&this.type);}}]);}();

/***/ }),

/***/ 8405:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.FSFlag=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _FSFetchStatus=__webpack_require__(9807);var _FSFlagStatus=__webpack_require__(2305);var _FSFlagMetadata=__webpack_require__(8955);var _forceVariation=__webpack_require__(2659);var FSFlag=exports.FSFlag=function(){function FSFlag(param){(0,_classCallCheck2.default)(this,FSFlag);this.hasGetValueBeenCalled=false;var key=param.key,visitor=param.visitor;this._key=key;this._visitor=visitor;}return(0,_createClass2.default)(FSFlag,[{key:"exists",value:function exists(){var _this$_visitor;if(!this._visitor){return false;}var flagDTO=(_this$_visitor=this._visitor)==null?void 0:_this$_visitor.flagsData.get(this._key);var forcedFlagDTO=(0,_forceVariation.forceVariation)({flagDTO:flagDTO,config:this._visitor.config,visitorVariationState:this._visitor.visitorVariationState});var flag=forcedFlagDTO||flagDTO;return!!(flag!=null&&flag.campaignId&&flag!=null&&flag.variationId&&flag!=null&&flag.variationGroupId);}},{key:"metadata",get:function get(){if(!this._visitor){return _FSFlagMetadata.FSFlagMetadata.Empty();}var flagDTO=this._visitor.flagsData.get(this._key);var forcedFlagDTO=(0,_forceVariation.forceVariation)({flagDTO:flagDTO,config:this._visitor.config,visitorVariationState:this._visitor.visitorVariationState});return this._visitor.getFlagMetadata({key:this._key,flag:forcedFlagDTO||flagDTO});}},{key:"visitorExposed",value:function(){var _visitorExposed=(0,_asyncToGenerator2.default)(function*(){if(!this._visitor){return;}var flagDTO=this._visitor.flagsData.get(this._key);var forcedFlagDTO=(0,_forceVariation.forceVariation)({flagDTO:flagDTO,config:this._visitor.config,visitorVariationState:this._visitor.visitorVariationState});return this._visitor.visitorExposed({key:this._key,flag:forcedFlagDTO||flagDTO,defaultValue:this._defaultValue,hasGetValueBeenCalled:this.hasGetValueBeenCalled});});function visitorExposed(){return _visitorExposed.apply(this,arguments);}return visitorExposed;}()},{key:"getValue",value:function getValue(defaultValue){var visitorExposed=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this._defaultValue=defaultValue;this.hasGetValueBeenCalled=true;if(!this._visitor){return defaultValue;}var flagDTO=this._visitor.flagsData.get(this._key);var forcedFlagDTO=(0,_forceVariation.forceVariation)({flagDTO:flagDTO,config:this._visitor.config,visitorVariationState:this._visitor.visitorVariationState});var flag=forcedFlagDTO||flagDTO;this._visitor.sendExposedVariation(flag);return this._visitor.getFlagValue({key:this._key,defaultValue:defaultValue,flag:flag,visitorExposed:visitorExposed});}},{key:"status",get:function get(){var _this$_visitor2,_this$_visitor3,_this$_visitor4;if(((_this$_visitor2=this._visitor)==null||(_this$_visitor2=_this$_visitor2.flagsStatus)==null?void 0:_this$_visitor2.status)===_FSFetchStatus.FSFetchStatus.PANIC){return _FSFlagStatus.FSFlagStatus.PANIC;}if(!this.exists()){return _FSFlagStatus.FSFlagStatus.NOT_FOUND;}if(((_this$_visitor3=this._visitor)==null||(_this$_visitor3=_this$_visitor3.flagsStatus)==null?void 0:_this$_visitor3.status)===_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED||((_this$_visitor4=this._visitor)==null||(_this$_visitor4=_this$_visitor4.flagsStatus)==null?void 0:_this$_visitor4.status)===_FSFetchStatus.FSFetchStatus.FETCHING){return _FSFlagStatus.FSFlagStatus.FETCH_REQUIRED;}return _FSFlagStatus.FSFlagStatus.FETCHED;}}]);}();

/***/ }),

/***/ 8490:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.LogLevel=void 0;var LogLevel=exports.LogLevel=function(LogLevel){LogLevel[LogLevel["NONE"]=0]="NONE";LogLevel[LogLevel["EMERGENCY"]=1]="EMERGENCY";LogLevel[LogLevel["ALERT"]=2]="ALERT";LogLevel[LogLevel["CRITICAL"]=3]="CRITICAL";LogLevel[LogLevel["ERROR"]=4]="ERROR";LogLevel[LogLevel["WARNING"]=5]="WARNING";LogLevel[LogLevel["NOTICE"]=6]="NOTICE";LogLevel[LogLevel["INFO"]=7]="INFO";LogLevel[LogLevel["DEBUG"]=8]="DEBUG";LogLevel[LogLevel["ALL"]=9]="ALL";return LogLevel;}({});

/***/ }),

/***/ 8577:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.TrackingManagerAbstract=exports.LOOKUP_HITS_JSON_OBJECT_ERROR=exports.LOOKUP_HITS_JSON_ERROR=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__(7826));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(3664);var _CacheStrategy=__webpack_require__(6707);var _Segment=__webpack_require__(2223);var _Event=__webpack_require__(2422);var _Screen=__webpack_require__(1192);var _utils=__webpack_require__(9647);var _BatchingContinuousCachingStrategy=__webpack_require__(234);var _BatchingPeriodicCachingStrategy=__webpack_require__(4740);var _NoBatchingContinuousCachingStrategy=__webpack_require__(7935);var _Activate=__webpack_require__(5233);var _BatchTriggeredBy=__webpack_require__(594);var _Item=__webpack_require__(4639);var _Page=__webpack_require__(4479);var _Transaction=__webpack_require__(4634);var LOOKUP_HITS_JSON_ERROR=exports.LOOKUP_HITS_JSON_ERROR='JSON DATA must be an array of object';var LOOKUP_HITS_JSON_OBJECT_ERROR=exports.LOOKUP_HITS_JSON_OBJECT_ERROR='JSON DATA must fit the type HitCacheDTO';var TrackingManagerAbstract=exports.TrackingManagerAbstract=function(){function TrackingManagerAbstract(httpClient,config,flagshipInstanceId,sharedActionTracking){(0,_classCallCheck2.default)(this,TrackingManagerAbstract);this._isPooling=false;this._flagshipInstanceId=flagshipInstanceId;this._hitsPoolQueue=new Map();this._activatePoolQueue=new Map();this._troubleshootingQueue=new Map();this._analyticHitQueue=new Map();this._httpClient=httpClient;this._config=config;this._sharedActionTracking=sharedActionTracking;this.strategy=this.initStrategy();this.lookupHits();}return(0,_createClass2.default)(TrackingManagerAbstract,[{key:"initTroubleshootingHit",get:function get(){return this._initTroubleshootingHit;},set:function set(v){this._initTroubleshootingHit=v;this.strategy.initTroubleshootingHit=v;}},{key:"flagshipInstanceId",get:function get(){return this._flagshipInstanceId;}},{key:"troubleshootingData",get:function get(){return this.strategy.troubleshootingData;},set:function set(v){this.strategy.troubleshootingData=v;}},{key:"initStrategy",value:function initStrategy(){var _this$config$tracking;var strategy;var argument={config:this.config,httpClient:this.httpClient,hitsPoolQueue:this._hitsPoolQueue,activatePoolQueue:this._activatePoolQueue,troubleshootingQueue:this._troubleshootingQueue,analyticHitQueue:this._analyticHitQueue,flagshipInstanceId:this.flagshipInstanceId,initTroubleshootingHit:this.initTroubleshootingHit,sharedActionTracking:this._sharedActionTracking};switch((_this$config$tracking=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking.cacheStrategy){case _CacheStrategy.CacheStrategy.PERIODIC_CACHING:strategy=new _BatchingPeriodicCachingStrategy.BatchingPeriodicCachingStrategy(argument);break;case _CacheStrategy.CacheStrategy.CONTINUOUS_CACHING:strategy=new _BatchingContinuousCachingStrategy.BatchingContinuousCachingStrategy(argument);break;default:strategy=new _NoBatchingContinuousCachingStrategy.NoBatchingContinuousCachingStrategy(argument);break;}return strategy;}},{key:"httpClient",get:function get(){return this._httpClient;}},{key:"config",get:function get(){return this._config;}},{key:"sendTroubleshootingHit",value:function(){var _sendTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(hit){yield this.strategy.sendTroubleshootingHit(hit);});function sendTroubleshootingHit(_x){return _sendTroubleshootingHit.apply(this,arguments);}return sendTroubleshootingHit;}()},{key:"startBatchingLoop",value:function startBatchingLoop(){var _this$config$tracking2,_this=this;var batchIntervals=(_this$config$tracking2=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking2.batchIntervals;if(batchIntervals===0){return;}var timeInterval=batchIntervals*1000;(0,_utils.logInfoSprintf)(this.config,_index.TRACKING_MANAGER,_index.BATCH_LOOP_STARTED,timeInterval);this._intervalID=setInterval(function(){_this.batchingLoop();},timeInterval);}},{key:"stopBatchingLoop",value:function stopBatchingLoop(){clearInterval(this._intervalID);this._isPooling=false;(0,_utils.logInfo)(this.config,_index.BATCH_LOOP_STOPPED,_index.TRACKING_MANAGER);}},{key:"batchingLoop",value:function(){var _batchingLoop=(0,_asyncToGenerator2.default)(function*(){if(this._isPooling){return;}this._isPooling=true;yield this.strategy.sendBatch(_BatchTriggeredBy.BatchTriggeredBy.Timer);yield this.strategy.sendTroubleshootingQueue();yield this.strategy.sendUsageHitQueue();this._isPooling=false;});function batchingLoop(){return _batchingLoop.apply(this,arguments);}return batchingLoop;}()},{key:"checkLookupHitData",value:function checkLookupHitData(item){var _item$data,_item$data2;if((item==null?void 0:item.version)===1&&item!=null&&(_item$data=item.data)!=null&&_item$data.type&&item!=null&&(_item$data2=item.data)!=null&&_item$data2.content){return true;}(0,_utils.logError)(this.config,LOOKUP_HITS_JSON_OBJECT_ERROR,_index.PROCESS_LOOKUP_HIT);return false;}},{key:"extractHitData",value:function(){var _extractHitData=(0,_asyncToGenerator2.default)(function*(key,item){var hit;switch(item.data.type){case _index.HitType.EVENT:{hit=new _Event.Event(item.data.content);break;}case _index.HitType.ITEM:{hit=new _Item.Item(item.data.content);break;}case _index.HitType.PAGE:{hit=new _Page.Page(item.data.content);break;}case _index.HitType.SCREEN:{hit=new _Screen.Screen(item.data.content);break;}case'SEGMENT':{hit=new _Segment.Segment(item.data.content);break;}case _index.HitType.TRANSACTION:{hit=new _Transaction.Transaction(item.data.content);break;}default:}return hit;});function extractHitData(_x2,_x3){return _extractHitData.apply(this,arguments);}return extractHitData;}()},{key:"processCachedHits",value:function(){var _processCachedHits=(0,_asyncToGenerator2.default)(function*(hitsCache){var checkHitTime=function checkHitTime(time){return Date.now()-time<=_index.DEFAULT_HIT_CACHE_TIME_MS;};var wrongHitKeys=[];var entries=Object.entries(hitsCache);for(var _ref of entries){var _ref2=(0,_slicedToArray2.default)(_ref,2);var key=_ref2[0];var item=_ref2[1];if(!this.checkLookupHitData(item)||!checkHitTime(item.data.time)){wrongHitKeys.push(key);continue;}if(item.data.type==='ACTIVATE'){var _hit=new _Activate.Activate(item.data.content);_hit.key=key;_hit.createdAt=item.data.content.createdAt;_hit.config=this.config;this._activatePoolQueue.set(key,_hit);continue;}var _hit2=yield this.extractHitData(key,item);if(!_hit2){wrongHitKeys.push(key);continue;}_hit2.key=key;_hit2.createdAt=item.data.content.createdAt;_hit2.config=this.config;this._hitsPoolQueue.set(key,_hit2);}if(wrongHitKeys.length){yield this.strategy.flushHits(wrongHitKeys);}});function processCachedHits(_x4){return _processCachedHits.apply(this,arguments);}return processCachedHits;}()},{key:"lookupHits",value:function(){var _lookupHits=(0,_asyncToGenerator2.default)(function*(){try{var hitCacheImplementation=this.config.hitCacheImplementation;if(this.config.disableCache||!hitCacheImplementation||typeof hitCacheImplementation.lookupHits!=='function'){return;}var hitsCache=yield hitCacheImplementation.lookupHits();(0,_utils.logDebugSprintf)(this.config,_index.PROCESS_CACHE,_index.HIT_CACHE_LOADED,hitsCache);if(!hitsCache||!Object.keys(hitsCache).length){return;}yield this.processCachedHits(hitsCache);}catch(error){(0,_utils.logErrorSprintf)(this.config,_index.PROCESS_CACHE,_index.HIT_CACHE_ERROR,'lookupHits',error.message||error);}});function lookupHits(){return _lookupHits.apply(this,arguments);}return lookupHits;}()},{key:"sendUsageHit",value:function(){var _sendUsageHit=(0,_asyncToGenerator2.default)(function*(hit){yield this.strategy.sendUsageHit(hit);});function sendUsageHit(_x5){return _sendUsageHit.apply(this,arguments);}return sendUsageHit;}()},{key:"addTroubleshootingHit",value:function(){var _addTroubleshootingHit=(0,_asyncToGenerator2.default)(function*(hit){yield this.strategy.addTroubleshootingHit(hit);});function addTroubleshootingHit(_x6){return _addTroubleshootingHit.apply(this,arguments);}return addTroubleshootingHit;}()}]);}();

/***/ }),

/***/ 8672:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.FSFetchReasons=void 0;var FSFetchReasons=exports.FSFetchReasons=function(FSFetchReasons){FSFetchReasons["UPDATE_CONTEXT"]="UPDATE_CONTEXT";FSFetchReasons["AUTHENTICATE"]="AUTHENTICATE";FSFetchReasons["UNAUTHENTICATE"]="UNAUTHENTICATE";FSFetchReasons["FLAGS_FETCHING_ERROR"]="FLAGS_FETCHING_ERROR";FSFetchReasons["FLAGS_FETCHED_FROM_CACHE"]="FLAGS_FETCHED_FROM_CACHE";FSFetchReasons["FLAGS_NEVER_FETCHED"]="FLAGS_NEVER_FETCHED";FSFetchReasons["NONE"]="NONE";return FSFetchReasons;}({});

/***/ }),

/***/ 8747:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));var _exportNames={BucketingConfig:true,FlagshipConfig:true,DecisionMode:true};Object.defineProperty(exports, "BucketingConfig", ({enumerable:true,get:function get(){return _BucketingConfig.BucketingConfig;}}));Object.defineProperty(exports, "DecisionMode", ({enumerable:true,get:function get(){return _DecisionMode.DecisionMode;}}));Object.defineProperty(exports, "FlagshipConfig", ({enumerable:true,get:function get(){return _FlagshipConfig.FlagshipConfig;}}));var _ConfigManager=__webpack_require__(3998);Object.keys(_ConfigManager).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;if(key in exports&&exports[key]===_ConfigManager[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ConfigManager[key];}});});var _DecisionApiConfig=__webpack_require__(419);Object.keys(_DecisionApiConfig).forEach(function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;if(key in exports&&exports[key]===_DecisionApiConfig[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _DecisionApiConfig[key];}});});var _BucketingConfig=__webpack_require__(4743);var _FlagshipConfig=__webpack_require__(4869);var _DecisionMode=__webpack_require__(7086);

/***/ }),

/***/ 8831:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

Object.defineProperty(exports, "__esModule", ({value:true}));var _FsFlags=__webpack_require__(8405);Object.keys(_FsFlags).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FsFlags[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FsFlags[key];}});});var _FSFlagMetadata=__webpack_require__(8955);Object.keys(_FSFlagMetadata).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FSFlagMetadata[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FSFlagMetadata[key];}});});var _IFSFlag=__webpack_require__(2877);Object.keys(_IFSFlag).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_IFSFlag[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _IFSFlag[key];}});});var _IFSFlagCollection=__webpack_require__(1121);Object.keys(_IFSFlagCollection).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_IFSFlagCollection[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _IFSFlagCollection[key];}});});var _FSFlagCollection=__webpack_require__(2966);Object.keys(_FSFlagCollection).forEach(function(key){if(key==="default"||key==="__esModule")return;if(key in exports&&exports[key]===_FSFlagCollection[key])return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _FSFlagCollection[key];}});});

/***/ }),

/***/ 8868:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.EdgeSdkManager=void 0;var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var EdgeSdkManager=exports.EdgeSdkManager=function(){function EdgeSdkManager(_ref){var httpClient=_ref.httpClient,sdkConfig=_ref.sdkConfig,trackingManager=_ref.trackingManager,flagshipInstanceId=_ref.flagshipInstanceId;(0,_classCallCheck2.default)(this,EdgeSdkManager);this._httpClient=httpClient;this._config=sdkConfig;this._trackingManager=trackingManager;this._bucketingContent=sdkConfig.initialBucketing;this._flagshipInstanceId=flagshipInstanceId;}return(0,_createClass2.default)(EdgeSdkManager,[{key:"resetSdk",value:function resetSdk(){}},{key:"getBucketingContent",value:function getBucketingContent(){return this._bucketingContent;}},{key:"initSdk",value:function(){var _initSdk=(0,_asyncToGenerator2.default)(function*(){});function initSdk(){return _initSdk.apply(this,arguments);}return initSdk;}()},{key:"getEAIConfig",value:function getEAIConfig(){return undefined;}}]);}();

/***/ }),

/***/ 8898:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/createClass");

/***/ }),

/***/ 8929:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.FlagshipLogManager=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _index=__webpack_require__(3664);var _utils=__webpack_require__(9647);var FlagshipLogManager=exports.FlagshipLogManager=function(){function FlagshipLogManager(){var _console$error,_console$warn,_console$debug;(0,_classCallCheck2.default)(this,FlagshipLogManager);this.consoleError=(_console$error=console.error)!=null?_console$error:console.log;this.consoleWarn=(_console$warn=console.warn)!=null?_console$warn:console.log;this.consoleDebug=(_console$debug=console.debug)!=null?_console$debug:console.log;}return(0,_createClass2.default)(FlagshipLogManager,[{key:"emergency",value:function emergency(message,tag){this.consoleError((0,_utils.formatLogOutput)(_index.LogLevel.EMERGENCY,message,tag));}},{key:"alert",value:function alert(message,tag){this.consoleError((0,_utils.formatLogOutput)(_index.LogLevel.ALERT,message,tag));}},{key:"critical",value:function critical(message,tag){this.consoleError((0,_utils.formatLogOutput)(_index.LogLevel.CRITICAL,message,tag));}},{key:"error",value:function error(message,tag){this.consoleError((0,_utils.formatLogOutput)(_index.LogLevel.ERROR,message,tag));}},{key:"warning",value:function warning(message,tag){this.consoleWarn((0,_utils.formatLogOutput)(_index.LogLevel.WARNING,message,tag));}},{key:"notice",value:function notice(message,tag){this.log(_index.LogLevel.NOTICE,message,tag);}},{key:"info",value:function info(message,tag){console.info((0,_utils.formatLogOutput)(_index.LogLevel.INFO,message,tag));}},{key:"debug",value:function debug(message,tag){this.consoleDebug((0,_utils.formatLogOutput)(_index.LogLevel.DEBUG,message,tag));}},{key:"log",value:function log(level,message,tag){console.log((0,_utils.formatLogOutput)(level,message,tag));}}]);}();

/***/ }),

/***/ 8955:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.FSFlagMetadata=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var FSFlagMetadata=exports.FSFlagMetadata=function(){function FSFlagMetadata(flagMetadata){(0,_classCallCheck2.default)(this,FSFlagMetadata);var campaignId=flagMetadata.campaignId,variationGroupId=flagMetadata.variationGroupId,variationId=flagMetadata.variationId,isReference=flagMetadata.isReference,campaignType=flagMetadata.campaignType,slug=flagMetadata.slug,variationGroupName=flagMetadata.variationGroupName,variationName=flagMetadata.variationName,campaignName=flagMetadata.campaignName;this.campaignId=campaignId;this.variationGroupId=variationGroupId;this.variationId=variationId;this.isReference=isReference;this.campaignType=campaignType;this.campaignName=campaignName;this.variationGroupName=variationGroupName;this.variationName=variationName;this.slug=slug;}return(0,_createClass2.default)(FSFlagMetadata,null,[{key:"Empty",value:function Empty(){return new FSFlagMetadata({campaignId:'',campaignName:'',campaignType:'',variationId:'',variationName:'',variationGroupId:'',variationGroupName:'',isReference:false,slug:null});}}]);}();

/***/ }),

/***/ 8981:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.TYPE_HIT_REQUIRED_ERROR=exports.HIT_NULL_ERROR=exports.DefaultStrategy=void 0;var _objectWithoutProperties2=_interopRequireDefault(__webpack_require__(2462));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(5564));var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(6609));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(9285));var _inherits2=_interopRequireDefault(__webpack_require__(2750));var _index=__webpack_require__(3664);var _types=__webpack_require__(3957);var _utils=__webpack_require__(9647);var _StrategyAbstract2=__webpack_require__(4210);var _FlagshipContext=__webpack_require__(1431);var _FSFlagMetadata=__webpack_require__(8955);var _FSFetchStatus=__webpack_require__(9807);var _FSFetchReasons=__webpack_require__(8672);var _Transaction=__webpack_require__(4634);var _Item=__webpack_require__(4639);var _Page=__webpack_require__(4479);var _Screen=__webpack_require__(1192);var _Event=__webpack_require__(2422);var _Troubleshooting=__webpack_require__(6360);var _excluded=["createdAt"];function _callSuper(t,o,e){return o=(0,_getPrototypeOf2.default)(o),(0,_possibleConstructorReturn2.default)(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],(0,_getPrototypeOf2.default)(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}var TYPE_HIT_REQUIRED_ERROR=exports.TYPE_HIT_REQUIRED_ERROR='property type is required and must ';var HIT_NULL_ERROR=exports.HIT_NULL_ERROR='Hit must not be null';var DefaultStrategy=exports.DefaultStrategy=function(_StrategyAbstract){function DefaultStrategy(){(0,_classCallCheck2.default)(this,DefaultStrategy);return _callSuper(this,DefaultStrategy,arguments);}(0,_inherits2.default)(DefaultStrategy,_StrategyAbstract);return(0,_createClass2.default)(DefaultStrategy,[{key:"checkPredefinedContext",value:function checkPredefinedContext(key,value){var type=_FlagshipContext.FLAGSHIP_CONTEXT[key];if(!type){return null;}var check=false;if(type==='string'){check=typeof value==='string';}else if(type==='number'){check=typeof value==='number';}if(!check){(0,_utils.logErrorSprintf)(this.config,_index.PROCESS_UPDATE_CONTEXT,_index.PREDEFINED_CONTEXT_TYPE_ERROR,this.visitor.visitorId,key,type);}return check;}},{key:"updateContextKeyValue",value:function updateContextKeyValue(key,value){var valueType=typeof value;if(typeof key!=='string'||key===''){(0,_utils.logErrorSprintf)(this.config,_index.PROCESS_UPDATE_CONTEXT,_index.CONTEXT_KEY_ERROR,this.visitor.visitorId,key);return;}if(valueType!=='string'&&valueType!=='number'&&valueType!=='boolean'){(0,_utils.logErrorSprintf)(this.config,_index.PROCESS_UPDATE_CONTEXT,_index.CONTEXT_VALUE_ERROR,this.visitor.visitorId,key);return;}if(key===_FlagshipContext.FLAGSHIP_CLIENT||key===_FlagshipContext.FLAGSHIP_VERSION||key===_FlagshipContext.FLAGSHIP_VISITOR){return;}var predefinedContext=this.checkPredefinedContext(key,value);if(typeof predefinedContext==='boolean'&&!predefinedContext){return;}this.visitor.context[key]=value;}},{key:"checkAndUpdateContext",value:function checkAndUpdateContext(oldContext,newContext,value){if((0,_utils.deepEqual)(oldContext,newContext)){return;}this.visitor.hasContextBeenUpdated=true;this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.UPDATE_CONTEXT};(0,_utils.logDebugSprintf)(this.config,_index.PROCESS_UPDATE_CONTEXT,_index.CONTEXT_KEY_VALUE_UPDATE,this.visitor.visitorId,newContext,value,this.visitor.context);}},{key:"updateContext",value:function updateContext(context,value){var oldContext=Object.assign({},this.visitor.context);if(typeof context==='string'){this.updateContextKeyValue(context,value);var _newContext=this.visitor.context;this.checkAndUpdateContext(oldContext,_newContext,value);return;}if(!context){(0,_utils.logError)(this.visitor.config,_index.CONTEXT_NULL_ERROR,_index.PROCESS_UPDATE_CONTEXT);return;}for(var _key in context){var _value=context[_key];this.updateContextKeyValue(_key,_value);}var newContext=this.visitor.context;this.checkAndUpdateContext(oldContext,newContext,context);}},{key:"clearContext",value:function clearContext(){var oldContext=Object.assign({},this.visitor.context);this.visitor.context={};this.visitor.loadPredefinedContext();var newContext=this.visitor.context;if((0,_utils.deepEqual)(oldContext,newContext)){return;}this.visitor.hasContextBeenUpdated=true;this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.UPDATE_CONTEXT};(0,_utils.logDebugSprintf)(this.config,_index.PROCESS_CLEAR_CONTEXT,_index.CLEAR_CONTEXT,this.visitor.visitorId,this.visitor.context);}},{key:"isDeDuplicated",value:function isDeDuplicated(key,deDuplicationTime){if(deDuplicationTime===0){return false;}var deDuplicationCache=this.visitor.deDuplicationCache[key];if(deDuplicationCache&&Date.now()-deDuplicationCache<=deDuplicationTime*1000){return true;}this.visitor.deDuplicationCache[key]=Date.now();this.visitor.clearDeDuplicationCache(deDuplicationTime);return false;}},{key:"sendActivate",value:function(){var _sendActivate=(0,_asyncToGenerator2.default)(function*(flagDto,defaultValue){var _this$visitor$sdkInit;var activateHit={variationGroupId:flagDto.variationGroupId,variationId:flagDto.variationId,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,flagKey:flagDto.key,flagValue:flagDto.value,flagDefaultValue:defaultValue,visitorContext:this.visitor.context,flagMetadata:{campaignName:flagDto.campaignName,campaignId:flagDto.campaignId,campaignType:flagDto.campaignType,variationGroupId:flagDto.variationGroupId,variationGroupName:flagDto.variationGroupName,variationId:flagDto.variationId,variationName:flagDto.variationName,slug:flagDto.slug,isReference:flagDto.isReference},qaMode:this.config.isQAModeEnabled};if(this.isDeDuplicated(JSON.stringify(activateHit),this.config.hitDeduplicationTime)){var logData={visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,flag:flagDto,delay:0};(0,_utils.logDebug)(this.config,(0,_utils.sprintf)('Activate {0} is deduplicated',JSON.stringify(logData)),_index.PROCESS_SEND_HIT);return;}yield this.trackingManager.activateFlag(activateHit);var activateTroubleshooting=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_SEND_ACTIVATE,logLevel:_index.LogLevel.INFO,traffic:this.visitor.traffic,visitorId:activateHit.visitorId,flagshipInstanceId:(_this$visitor$sdkInit=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit.instanceId,visitorSessionId:this.visitor.instanceId,anonymousId:activateHit.anonymousId,config:this.config,hitContent:activateHit});this.sendTroubleshootingHit(activateTroubleshooting);});function sendActivate(_x,_x2){return _sendActivate.apply(this,arguments);}return sendActivate;}()},{key:"sendHit",value:function(){var _sendHit=(0,_asyncToGenerator2.default)(function*(hit){if(!this.hasTrackingManager(_index.PROCESS_SEND_HIT)){return;}yield this.prepareAndSendHit(hit);});function sendHit(_x3){return _sendHit.apply(this,arguments);}return sendHit;}()},{key:"sendHits",value:function(){var _sendHits=(0,_asyncToGenerator2.default)(function*(hits){if(!this.hasTrackingManager(_index.PROCESS_SEND_HIT)){return;}for(var _hit of hits){yield this.prepareAndSendHit(_hit);}});function sendHits(_x4){return _sendHits.apply(this,arguments);}return sendHits;}()},{key:"getHit",value:function(){var _getHit=(0,_asyncToGenerator2.default)(function*(hit){var newHit=null;switch(hit.type.toUpperCase()){case _index.HitType.EVENT:{newHit=new _Event.Event(hit);break;}case _index.HitType.ITEM:{newHit=new _Item.Item(hit);break;}case _index.HitType.PAGE_VIEW:{newHit=new _Page.Page(hit);break;}case _index.HitType.SCREEN_VIEW:{newHit=new _Screen.Screen(hit);break;}case _index.HitType.TRANSACTION:{newHit=new _Transaction.Transaction(hit);break;}}return newHit;});function getHit(_x5){return _getHit.apply(this,arguments);}return getHit;}()},{key:"isHitAbstract",value:function isHitAbstract(hit){return hit&&typeof hit.toApiKeys==='function'&&typeof hit.isReady==='function'&&typeof hit.getErrorMessage==='function'&&typeof hit.toObject==='function';}},{key:"prepareAndSendHit",value:function(){var _prepareAndSendHit=(0,_asyncToGenerator2.default)(function*(hit){var functionName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_index.PROCESS_SEND_HIT;var hitInstance;if(!(hit!=null&&hit.type)){(0,_utils.logError)(this.config,HIT_NULL_ERROR,functionName);return;}if(this.isHitAbstract(hit)){hitInstance=hit;}else{var hitFromInt=yield this.getHit(hit);if(!hitFromInt){(0,_utils.logError)(this.config,TYPE_HIT_REQUIRED_ERROR,functionName);return;}hitInstance=hitFromInt;}hitInstance.visitorId=this.visitor.visitorId;hitInstance.ds=_index.SDK_APP;hitInstance.config=this.config;hitInstance.anonymousId=this.visitor.anonymousId;hitInstance.qaMode=this.config.isQAModeEnabled;var _hitInstance$toObject=hitInstance.toObject(),createdAt=_hitInstance$toObject.createdAt,hitInstanceItem=(0,_objectWithoutProperties2.default)(_hitInstance$toObject,_excluded);if(this.isDeDuplicated(JSON.stringify(hitInstanceItem),this.config.hitDeduplicationTime)){return;}if(!hitInstance.isReady()){(0,_utils.logError)(this.config,hitInstance.getErrorMessage(),functionName);return;}try{var _this$visitor$sdkInit2;yield this.trackingManager.addHit(hitInstance);if(hitInstance.type==='SEGMENT'){return;}var sendHitTroubleshooting=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_SEND_HIT,logLevel:_index.LogLevel.INFO,traffic:this.visitor.traffic,visitorId:hitInstance.visitorId,flagshipInstanceId:(_this$visitor$sdkInit2=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit2.instanceId,visitorSessionId:this.visitor.instanceId,anonymousId:hitInstance.anonymousId,config:this.config,hitContent:hitInstance.toApiKeys()});this.sendTroubleshootingHit(sendHitTroubleshooting);}catch(error){(0,_utils.logError)(this.config,error.message||error,functionName);}});function prepareAndSendHit(_x6){return _prepareAndSendHit.apply(this,arguments);}return prepareAndSendHit;}()},{key:"authenticate",value:function authenticate(visitorId){var _this$visitor$sdkInit3;if(!visitorId){(0,_utils.logErrorSprintf)(this.config,_index.AUTHENTICATE,_index.VISITOR_AUTHENTICATE_VISITOR_ID_ERROR,this.visitor.visitorId);return;}if(this.visitor.anonymousId){(0,_utils.logWarningSprintf)(this.config,_index.AUTHENTICATE,_index.VISITOR_ALREADY_AUTHENTICATE,this.visitor.visitorId,this.visitor.anonymousId);return;}this.visitor.anonymousId=this.visitor.visitorId;this.visitor.visitorId=visitorId;var monitoring=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_AUTHENTICATE,logLevel:_index.LogLevel.INFO,flagshipInstanceId:(_this$visitor$sdkInit3=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit3.instanceId,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorContext:this.visitor.context,traffic:this.visitor.traffic,config:this.config});this.sendTroubleshootingHit(monitoring);this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.AUTHENTICATE};(0,_utils.logDebugSprintf)(this.config,_index.AUTHENTICATE,_index.VISITOR_AUTHENTICATE,this.visitor.visitorId,this.visitor.anonymousId);}},{key:"unauthenticate",value:function unauthenticate(){var _this$visitor$sdkInit4;if(!this.visitor.anonymousId){(0,_utils.logErrorSprintf)(this.config,_index.UNAUTHENTICATE,_index.FLAGSHIP_VISITOR_NOT_AUTHENTICATE,this.visitor.visitorId);return;}this.visitor.visitorId=this.visitor.anonymousId;this.visitor.anonymousId=null;var monitoring=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_UNAUTHENTICATE,logLevel:_index.LogLevel.INFO,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,flagshipInstanceId:(_this$visitor$sdkInit4=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit4.instanceId,visitorContext:this.visitor.context,traffic:this.visitor.traffic,config:this.config});this.sendTroubleshootingHit(monitoring);this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.UNAUTHENTICATE};(0,_utils.logDebugSprintf)(this.config,_index.UNAUTHENTICATE,_index.VISITOR_UNAUTHENTICATE,this.visitor.visitorId);}},{key:"handleFetchFlagsError",value:function handleFetchFlagsError(error,now,campaigns){var _this$visitor$sdkInit5,_this$visitor$sdkInit6,_this$visitor$sdkInit7,_this$visitor$sdkInit8,_this$config$tracking,_this$config$tracking2,_this$config$tracking3;this.visitor.emit(_index.EMIT_READY,error);var message=error instanceof Error?error.message:error;var errorMessage=(0,_utils.errorFormat)(message,{visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,context:this.visitor.context,statusReason:this.visitor.flagsStatus.reason,duration:Date.now()-now});(0,_utils.logError)(this.config,errorMessage,_index.PROCESS_FETCHING_FLAGS);this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.FLAGS_FETCHING_ERROR};var troubleshootingHit=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.VISITOR_FETCH_CAMPAIGNS_ERROR,logLevel:_index.LogLevel.INFO,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:(_this$visitor$sdkInit5=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit5.instanceId,traffic:this.visitor.traffic,config:this.config,visitorContext:this.visitor.context,sdkStatus:this.visitor.getSdkStatus(),visitorCampaigns:campaigns,visitorConsent:this.visitor.hasConsented,visitorIsAuthenticated:!!this.visitor.anonymousId,visitorFlags:this.visitor.flagsData,visitorInitialCampaigns:(_this$visitor$sdkInit6=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit6.initialCampaigns,visitorInitialFlagsData:(_this$visitor$sdkInit7=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit7.initialFlagsData,lastBucketingTimestamp:this.configManager.decisionManager.lastBucketingTimestamp,lastInitializationTimestamp:(_this$visitor$sdkInit8=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit8.lastInitializationTimestamp,httpResponseTime:Date.now()-now,sdkConfigMode:this.getSdkConfigDecisionMode(),sdkConfigTimeout:this.config.timeout,sdkConfigPollingInterval:this.config.pollingInterval,sdkConfigTrackingManagerStrategy:(_this$config$tracking=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking.cacheStrategy,sdkConfigTrackingManagerBatchIntervals:(_this$config$tracking2=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking2.batchIntervals,sdkConfigTrackingManagerPoolMaxSize:(_this$config$tracking3=this.config.trackingManagerConfig)==null?void 0:_this$config$tracking3.poolMaxSize,sdkConfigFetchNow:this.config.fetchNow,sdkConfigReuseVisitorIds:this.config.reuseVisitorIds,sdkConfigInitialBucketing:this.config.initialBucketing,sdkConfigDecisionApiUrl:this.config.decisionApiUrl,sdkConfigHitDeduplicationTime:this.config.hitDeduplicationTime});this.trackingManager.addTroubleshootingHit(troubleshootingHit);}},{key:"getCampaigns",value:function(){var _getCampaigns=(0,_asyncToGenerator2.default)(function*(now){var campaigns=null;var functionName=_index.PROCESS_FETCHING_FLAGS;try{var time=Date.now()-this.visitor.lastFetchFlagsTimestamp;var fetchStatus=this.visitor.flagsStatus.status;if(fetchStatus===_FSFetchStatus.FSFetchStatus.FETCHING&&this.visitor.getCampaignsPromise){campaigns=yield this.visitor.getCampaignsPromise;return{campaigns:campaigns,isFetching:true};}var fetchFlagBufferingTime=this.config.fetchFlagsBufferingTime*1000;if(fetchStatus===_FSFetchStatus.FSFetchStatus.FETCHED&&time<fetchFlagBufferingTime){(0,_utils.logInfoSprintf)(this.config,functionName,_index.FETCH_FLAGS_BUFFERING_MESSAGE,this.visitor.visitorId,fetchFlagBufferingTime-time);return{campaigns:campaigns,isBuffered:true};}(0,_utils.logDebugSprintf)(this.config,functionName,_index.FETCH_FLAGS_STARTED,this.visitor.visitorId);this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCHING,reason:_FSFetchReasons.FSFetchReasons.NONE};yield this.lookupVisitor();yield this.visitor.emotionAi.fetchEAIScore();this.visitor.getCampaignsPromise=this.decisionManager.getCampaignsAsync(this.visitor);campaigns=yield this.visitor.getCampaignsPromise;this.visitor.lastFetchFlagsTimestamp=Date.now();if(this.decisionManager.isPanic()){this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.PANIC,reason:_FSFetchReasons.FSFetchReasons.NONE};}this.configManager.trackingManager.troubleshootingData=this.decisionManager.troubleshooting;(0,_utils.logDebugSprintf)(this.config,functionName,_index.FETCH_CAMPAIGNS_SUCCESS,this.visitor.visitorId,this.visitor.anonymousId,this.visitor.context,campaigns,Date.now()-now);return{campaigns:campaigns};}catch(error){(0,_utils.logError)(this.config,error.message,_index.PROCESS_FETCHING_FLAGS);this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.FLAGS_FETCHING_ERROR};return{error:error,campaigns:campaigns};}});function getCampaigns(_x7){return _getCampaigns.apply(this,arguments);}return getCampaigns;}()},{key:"fetchCampaignsFromCache",value:function fetchCampaignsFromCache(visitor){var _visitor$visitorCache;if(!Array.isArray(visitor==null||(_visitor$visitorCache=visitor.visitorCache)==null?void 0:_visitor$visitorCache.data.campaigns)){return null;}return visitor.visitorCache.data.campaigns.map(function(campaign){return{id:campaign.campaignId,variationGroupId:campaign.variationGroupId,slug:campaign.slug,variation:{id:campaign.variationId,reference:!!campaign.isReference,modifications:{type:campaign.type,value:campaign.flags}}};});}},{key:"handleNoCampaigns",value:function handleNoCampaigns(now){var campaigns=this.fetchCampaignsFromCache(this.visitor);if(campaigns){this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCH_REQUIRED,reason:_FSFetchReasons.FSFetchReasons.FLAGS_FETCHED_FROM_CACHE};(0,_utils.logDebugSprintf)(this.config,_index.PROCESS_FETCHING_FLAGS,_index.FETCH_CAMPAIGNS_FROM_CACHE,this.visitor.visitorId,this.visitor.anonymousId,this.visitor.context,campaigns,Date.now()-now);}return campaigns;}},{key:"sendVisitorAllocatedVariations",value:function sendVisitorAllocatedVariations(){var _this=this;if(false){ var visitorAllocatedVariations; }}},{key:"extractFlags",value:function extractFlags(campaigns){var flags=new Map();campaigns.forEach(function(campaign){var object=campaign.variation.modifications.value;for(var _key2 in object){var _value2=object[_key2];flags.set(_key2,{key:_key2,campaignId:campaign.id,campaignName:campaign.name||'',variationGroupId:campaign.variationGroupId,variationGroupName:campaign.variationGroupName||'',variationId:campaign.variation.id,variationName:campaign.variation.name||'',isReference:!!campaign.variation.reference,campaignType:campaign.type,slug:campaign.slug,value:_value2});}});return flags;}},{key:"fetchFlags",value:function(){var _fetchFlags=(0,_asyncToGenerator2.default)(function*(){var now=Date.now();var campaigns=null;var _yield$this$getCampai=yield this.getCampaigns(now),fetchedCampaigns=_yield$this$getCampai.campaigns,fetchCampaignError=_yield$this$getCampai.error,isFetching=_yield$this$getCampai.isFetching,isBuffered=_yield$this$getCampai.isBuffered;if(isFetching||isBuffered){return;}campaigns=fetchedCampaigns;try{if(!campaigns){campaigns=this.handleNoCampaigns(now);}campaigns=campaigns||[];this.visitor.campaigns=campaigns;this.visitor.flagsData=this.extractFlags(this.visitor.campaigns);this.cacheVisitor();this.visitor.emit(_index.EMIT_READY,fetchCampaignError);if(this.visitor.flagsStatus.status===_FSFetchStatus.FSFetchStatus.FETCHING){this.visitor.flagsStatus={status:_FSFetchStatus.FSFetchStatus.FETCHED,reason:_FSFetchReasons.FSFetchReasons.NONE};}this.sendVisitorAllocatedVariations();(0,_utils.logDebugSprintf)(this.config,_index.PROCESS_FETCHING_FLAGS,_index.FETCH_FLAGS_FROM_CAMPAIGNS,this.visitor.visitorId,this.visitor.anonymousId,this.visitor.context,this.visitor.flagsData);if(this.decisionManager.troubleshooting){this.sendFetchFlagsTroubleshooting({campaigns:campaigns,now:now,isFromCache:this.visitor.flagsStatus.reason===_FSFetchReasons.FSFetchReasons.FLAGS_FETCHED_FROM_CACHE});this.sendConsentHitTroubleshooting();this.sendSegmentHitTroubleshooting();}this.sendSdkConfigAnalyticHit();}catch(error){this.handleFetchFlagsError(error,now,campaigns);}});function fetchFlags(){return _fetchFlags.apply(this,arguments);}return fetchFlags;}()},{key:"visitorExposed",value:function(){var _visitorExposed=(0,_asyncToGenerator2.default)(function*(param){var key=param.key,flag=param.flag,defaultValue=param.defaultValue,hasGetValueBeenCalled=param.hasGetValueBeenCalled;if(!flag){(0,_utils.logWarningSprintf)(this.visitor.config,_index.FLAG_VISITOR_EXPOSED,_index.USER_EXPOSED_FLAG_ERROR,this.visitor.visitorId,key);this.sendFlagTroubleshooting(_types.TroubleshootingLabel.VISITOR_EXPOSED_FLAG_NOT_FOUND,key,defaultValue);return;}if(!hasGetValueBeenCalled){(0,_utils.logWarningSprintf)(this.visitor.config,_index.FLAG_VISITOR_EXPOSED,_index.VISITOR_EXPOSED_VALUE_NOT_CALLED,this.visitor.visitorId,key);this.sendFlagTroubleshooting(_types.TroubleshootingLabel.FLAG_VALUE_NOT_CALLED,key,defaultValue,true);return;}if(defaultValue!==null&&defaultValue!==undefined&&flag.value!==null&&!(0,_utils.hasSameType)(flag.value,defaultValue)){(0,_utils.logWarningSprintf)(this.visitor.config,_index.FLAG_VISITOR_EXPOSED,_index.USER_EXPOSED_CAST_ERROR,this.visitor.visitorId,key);this.sendFlagTroubleshooting(_types.TroubleshootingLabel.VISITOR_EXPOSED_TYPE_WARNING,key,defaultValue);return;}yield this.sendActivate(flag,defaultValue);});function visitorExposed(_x8){return _visitorExposed.apply(this,arguments);}return visitorExposed;}()},{key:"sendFlagTroubleshooting",value:function sendFlagTroubleshooting(label,key,defaultValue,visitorExposed){var _this$visitor$sdkInit9;var troubleshooting=new _Troubleshooting.Troubleshooting({label:label,logLevel:_index.LogLevel.WARNING,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:(_this$visitor$sdkInit9=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit9.instanceId,traffic:this.visitor.traffic,config:this.config,visitorContext:this.visitor.context,flagKey:key,flagDefault:defaultValue,visitorExposed:visitorExposed});this.sendTroubleshootingHit(troubleshooting);}},{key:"getFlagValue",value:function getFlagValue(param){var key=param.key,defaultValue=param.defaultValue,flag=param.flag,visitorExposed=param.visitorExposed;if(!flag){(0,_utils.logWarningSprintf)(this.config,_index.FLAG_VALUE,_index.GET_FLAG_MISSING_ERROR,this.visitor.visitorId,key,defaultValue);this.sendFlagTroubleshooting(_types.TroubleshootingLabel.GET_FLAG_VALUE_FLAG_NOT_FOUND,key,defaultValue,visitorExposed);return defaultValue;}if(visitorExposed){this.sendActivate(flag,defaultValue);}if(flag.value===null){return defaultValue;}if(defaultValue!==null&&defaultValue!==undefined&&!(0,_utils.hasSameType)(flag.value,defaultValue)){(0,_utils.logWarningSprintf)(this.config,_index.FLAG_VALUE,_index.GET_FLAG_CAST_ERROR,this.visitor.visitorId,key,defaultValue);this.sendFlagTroubleshooting(_types.TroubleshootingLabel.GET_FLAG_VALUE_TYPE_WARNING,key,defaultValue,visitorExposed);return defaultValue;}(0,_utils.logDebugSprintf)(this.config,_index.FLAG_VALUE,_index.GET_FLAG_VALUE,this.visitor.visitorId,key,flag.value);return flag.value;}},{key:"SendFlagMetadataTroubleshooting",value:function SendFlagMetadataTroubleshooting(key){var _this$visitor$sdkInit10;(0,_utils.logWarningSprintf)(this.config,_index.FLAG_METADATA,_index.NO_FLAG_METADATA,this.visitor.visitorId,key);var monitoring=new _Troubleshooting.Troubleshooting({label:_types.TroubleshootingLabel.GET_FLAG_METADATA_TYPE_WARNING,logLevel:_index.LogLevel.WARNING,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:(_this$visitor$sdkInit10=this.visitor.sdkInitialData)==null?void 0:_this$visitor$sdkInit10.instanceId,traffic:this.visitor.traffic,config:this.config,visitorContext:this.visitor.context,flagKey:key});this.sendTroubleshootingHit(monitoring);}},{key:"getFlagMetadata",value:function getFlagMetadata(param){var key=param.key,flag=param.flag;if(!flag){(0,_utils.logWarningSprintf)(this.config,_index.FLAG_METADATA,_index.NO_FLAG_METADATA,this.visitor.visitorId,key);this.SendFlagMetadataTroubleshooting(key);return _FSFlagMetadata.FSFlagMetadata.Empty();}var metadata=new _FSFlagMetadata.FSFlagMetadata({campaignId:flag.campaignId,campaignName:flag.campaignName,variationGroupId:flag.variationGroupId,variationGroupName:flag.variationGroupName,variationId:flag.variationId,variationName:flag.variationName,isReference:!!flag.isReference,campaignType:flag.campaignType,slug:flag.slug});return metadata;}}]);}(_StrategyAbstract2.StrategyAbstract);

/***/ }),

/***/ 9226:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/get");

/***/ }),

/***/ 9285:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/getPrototypeOf");

/***/ }),

/***/ 9635:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.VisitorProfileCache=void 0;var _classCallCheck2=_interopRequireDefault(__webpack_require__(5998));var _createClass2=_interopRequireDefault(__webpack_require__(8898));var _Flagship=__webpack_require__(3046);var _utils=__webpack_require__(9647);var VisitorProfileCache=exports.VisitorProfileCache=function(){function VisitorProfileCache(sdkConfig){(0,_classCallCheck2.default)(this,VisitorProfileCache);this._sdkConfig=sdkConfig;}return(0,_createClass2.default)(VisitorProfileCache,[{key:"saveVisitorProfile",value:function saveVisitorProfile(visitorProfile){try{var extendedFlagship=_Flagship.Flagship;var onSaveVisitorProfile=extendedFlagship.getOnSaveVisitorProfile();onSaveVisitorProfile==null||onSaveVisitorProfile(JSON.stringify(visitorProfile));}catch(error){(0,_utils.logErrorSprintf)(this._sdkConfig,'VisitorProfileCache.saveVisitorProfile',error==null?void 0:error.message);}}},{key:"loadVisitorProfile",value:function loadVisitorProfile(){try{var extendedFlagship=_Flagship.Flagship;var data=extendedFlagship.getVisitorProfile();return data?JSON.parse(data):null;}catch(error){(0,_utils.logErrorSprintf)(this._sdkConfig,'VisitorProfileCache.loadVisitorProfile',error==null?void 0:error.message);}return null;}}]);}();

/***/ }),

/***/ 9647:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var _interopRequireDefault=__webpack_require__(3751);Object.defineProperty(exports, "__esModule", ({value:true}));exports.deepEqual=deepEqual;exports.errorFormat=errorFormat;exports.formatLogOutput=formatLogOutput;exports.hasSameType=hasSameType;exports.hexToValue=hexToValue;exports.isBrowser=isBrowser;exports.logDebug=logDebug;exports.logDebugSprintf=logDebugSprintf;exports.logError=logError;exports.logErrorSprintf=logErrorSprintf;exports.logInfo=logInfo;exports.logInfoSprintf=logInfoSprintf;exports.logWarning=logWarning;exports.logWarningSprintf=logWarningSprintf;exports.onDomReady=onDomReady;exports.sprintf=sprintf;exports.uuidV4=uuidV4;exports.valueToHex=valueToHex;exports.visitorFlagSyncStatusMessage=visitorFlagSyncStatusMessage;var _defineProperty2=_interopRequireDefault(__webpack_require__(1116));var _FSFetchReasons=__webpack_require__(8672);var _index=__webpack_require__(3664);function sprintf(format){var formatted=format;for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++){var item=i+1<1||arguments.length<=i+1?undefined:arguments[i+1];var element=typeof item==='string'?item:JSON.stringify(item instanceof Map?Array.from(item.values()):item);formatted=formatted.replace(new RegExp(`\\{${i}\\}`,'g'),element);}return formatted;}function logErrorSprintf(config,tag,message){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.ERROR){return;}for(var _len=arguments.length,arg=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){arg[_key-3]=arguments[_key];}var customMessage=sprintf.apply(void 0,[message].concat(arg));logError(config,customMessage,tag);}function logError(config,message,tag){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.ERROR){return;}if(typeof config.onLog==='function'){config.onLog(_index.LogLevel.ERROR,tag,message);}if(config.logManager&&typeof config.logManager.error==='function'){config.logManager.error(message,tag);}}function logWarningSprintf(config,tag,message){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.WARNING){return;}for(var _len2=arguments.length,arg=new Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++){arg[_key2-3]=arguments[_key2];}var customMessage=sprintf.apply(void 0,[message].concat(arg));logWarning(config,customMessage,tag);}function logWarning(config,message,tag){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.WARNING){return;}if(typeof config.onLog==='function'){config.onLog(_index.LogLevel.WARNING,tag,message);}if(config.logManager&&typeof config.logManager.warning==='function'){config.logManager.warning(message,tag);}}function logInfoSprintf(config,tag,message){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.INFO){return;}for(var _len3=arguments.length,arg=new Array(_len3>3?_len3-3:0),_key3=3;_key3<_len3;_key3++){arg[_key3-3]=arguments[_key3];}var customMessage=sprintf.apply(void 0,[message].concat(arg));logInfo(config,customMessage,tag);}function logInfo(config,message,tag){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.INFO){return;}if(typeof config.onLog==='function'){config.onLog(_index.LogLevel.INFO,tag,message);}if(config.logManager&&typeof config.logManager.info==='function'){config.logManager.info(message,tag);}}function logDebugSprintf(config,tag,message){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.DEBUG){return;}for(var _len4=arguments.length,arg=new Array(_len4>3?_len4-3:0),_key4=3;_key4<_len4;_key4++){arg[_key4-3]=arguments[_key4];}var customMessage=sprintf.apply(void 0,[message].concat(arg));logDebug(config,customMessage,tag);}function logDebug(config,message,tag){if(!config||!config.logLevel||config.logLevel<_index.LogLevel.DEBUG){return;}if(typeof config.onLog==='function'){config.onLog(_index.LogLevel.DEBUG,tag,message);}if(config.logManager&&typeof config.logManager.debug==='function'){config.logManager.debug(message,tag);}}function isBrowser(){return typeof window!=='undefined'&&typeof window.document!=='undefined';}function hasSameType(flagValue,defaultValue){if(typeof flagValue!==typeof defaultValue){return false;}if(typeof flagValue==='object'&&typeof defaultValue==='object'&&Array.isArray(flagValue)!==Array.isArray(defaultValue)){return false;}return true;}function uuidV4(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(char){var rand=Math.random()*16|0;var value=char==='x'?rand:rand&0x3|0x8;return value.toString(16);});}function errorFormat(message,errorData){return JSON.stringify({message:message,data:errorData});}function visitorFlagSyncStatusMessage(reason){var message='';switch(reason){case _FSFetchReasons.FSFetchReasons.FLAGS_NEVER_FETCHED:message=`Visitor \`{0}\` has been created ${_index.VISITOR_SYNC_FLAGS_MESSAGE}`;break;case _FSFetchReasons.FSFetchReasons.UPDATE_CONTEXT:message=`Visitor context for visitor \`{0}\` has been updated ${_index.VISITOR_SYNC_FLAGS_MESSAGE}`;break;case _FSFetchReasons.FSFetchReasons.AUTHENTICATE:message=`Visitor \`{0}\` has been authenticated ${_index.VISITOR_SYNC_FLAGS_MESSAGE}`;break;case _FSFetchReasons.FSFetchReasons.UNAUTHENTICATE:message=`Visitor \`{0}\` has been unauthenticated ${_index.VISITOR_SYNC_FLAGS_MESSAGE}`;break;case _FSFetchReasons.FSFetchReasons.FLAGS_FETCHING_ERROR:message='There was an error while fetching flags for visitor `{0}`. So the value of the flag `{1}` may be outdated"';break;case _FSFetchReasons.FSFetchReasons.FLAGS_FETCHED_FROM_CACHE:message='Flags for visitor `{0}` have been fetched from cache';break;default:break;}return message;}function valueToHex(value){var jsonString=JSON.stringify(value);var hex=Array.from(jsonString,function(char){return char.charCodeAt(0).toString(16);}).join('');return hex;}function hexToValue(hex,config){if(typeof hex!=='string'){logErrorSprintf(config,'hexToValue','Invalid hex string: {0}',hex);return null;}var jsonString='';for(var i=0;i<hex.length;i+=2){var hexChar=hex.slice(i,i+2);var charCode=parseInt(hexChar,16);if(isNaN(charCode)){logErrorSprintf(config,'hexToValue','Invalid hex character: {0}',hexChar);return null;}jsonString+=String.fromCharCode(charCode);}try{var value=JSON.parse(jsonString);return value;}catch(error){logErrorSprintf(config,'hexToValue','Error while parsing JSON: {0}',error);return null;}}function deepEqual(obj1,obj2){if(obj1===obj2)return true;if(typeof obj1!=='object'||typeof obj2!=='object'||obj1==null||obj2==null){return false;}var keys1=Object.keys(obj1);var keys2=Object.keys(obj2);if(keys1.length!==keys2.length)return false;for(var key of keys1){if(!keys2.includes(key)||!deepEqual(obj1[key],obj2[key])){return false;}}return true;}function onDomReady(callback){if(false){ var _domContentLoadedHandler, isDomReady; }return false;}function formatLogOutput(level,message,tag){var now=new Date();var formatTwoDigits=function formatTwoDigits(value){return value.toString().padStart(2,'0');};var formatMilliseconds=function formatMilliseconds(value){return value.toString().padStart(3,'0');};var colorCodes=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},_index.LogLevel.EMERGENCY,'\x1b[1;37;41m'),_index.LogLevel.ALERT,'\x1b[1;37;45m'),_index.LogLevel.CRITICAL,'\x1b[1;37;41m'),_index.LogLevel.ERROR,'\x1b[1;37;41m'),_index.LogLevel.WARNING,'\x1b[33;1m'),_index.LogLevel.NOTICE,'\x1b[36;1m'),_index.LogLevel.INFO,'\x1b[32;1m'),_index.LogLevel.DEBUG,'\x1b[90;1m'),_index.LogLevel.NONE,''),_index.LogLevel.ALL,'\x1b[90;1m');var resetColor='\x1b[0m';var colorCode=colorCodes[level]||'';var year=now.getFullYear();var month=formatTwoDigits(now.getMonth()+1);var day=formatTwoDigits(now.getDate());var hours=formatTwoDigits(now.getHours());var minutes=formatTwoDigits(now.getMinutes());var seconds=formatTwoDigits(now.getSeconds());var milliseconds=formatMilliseconds(now.getMilliseconds());var timestamp=`${year}-${month}-${day} ${hours}:${minutes}:${seconds}.${milliseconds}`;var levelName=_index.LogLevel[level].padEnd(2);return`${colorCode}[${timestamp}] [${_index.FLAGSHIP_SDK}] [${levelName}] [${tag}] ${message}${resetColor}`;}

/***/ }),

/***/ 9807:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.FSFetchStatus=void 0;var FSFetchStatus=exports.FSFetchStatus=function(FSFetchStatus){FSFetchStatus["FETCHED"]="FETCHED";FSFetchStatus["FETCHING"]="FETCHING";FSFetchStatus["FETCH_REQUIRED"]="FETCH_REQUIRED";FSFetchStatus["PANIC"]="PANIC";FSFetchStatus["INITIAL_DATA"]="INITIAL_DATA";return FSFetchStatus;}({});

/***/ }),

/***/ 9851:
/***/ ((__unused_webpack_module, exports) => {

Object.defineProperty(exports, "__esModule", ({value:true}));exports.SharedActionSource=exports.ImportHitType=void 0;var SharedActionSource=exports.SharedActionSource=function(SharedActionSource){SharedActionSource["ABT_TAG_TRACK_ACTION"]="ABT_TAG_TRACK_ACTION";SharedActionSource["ABT_WEB_SDK_TRACK_ACTION"]="ABT_WEB_SDK_TRACK_ACTION";return SharedActionSource;}({});var ImportHitType=exports.ImportHitType=function(ImportHitType){ImportHitType["Event"]="Event";ImportHitType["Item"]="Item";ImportHitType["Page"]="Page";ImportHitType["Screen"]="Screen";ImportHitType["Transaction"]="Transaction";ImportHitType["Segment"]="Segment";ImportHitType["Activate"]="Activate";ImportHitType["Troubleshooting"]="Troubleshooting";ImportHitType["UsageHit"]="UsageHit";ImportHitType["ActivateBatch"]="ActivateBatch";ImportHitType["Batch"]="Batch";ImportHitType["HitAbstract"]="HitAbstract";ImportHitType["Diagnostic"]="Diagnostic";return ImportHitType;}({});

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__(4356);
/******/ 	module.exports = __webpack_exports__;
/******/ 	
/******/ })()
;
//# sourceMappingURL=index.react-native.commonjs.js.map